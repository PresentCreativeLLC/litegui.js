var LiteGUI;(()=>{"use strict";var __webpack_modules__={423:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Split=e.Area=void 0;const i=s(776);class o{constructor(t){let e=t;const s=document.createElement("div");s.className="litearea",(null==e?void 0:e.id)&&(s.id=e.id),(null==e?void 0:e.className)&&(s.className+=" "+e.className),this.root=s,this.root.litearea=this;let o=(null==e?void 0:e.width)||"100%",n=(null==e?void 0:e.height)||"100%";"number"==typeof o&&o<0&&(o="calc( 100% - "+Math.abs(o)+"px)"),"number"==typeof n&&n<0&&(n="calc( 100% - "+Math.abs(n)+"px)"),s.style.width=o,s.style.height=n,this.options=e;const r=this;this._computed_size=[this.root.offsetWidth,this.root.offsetHeight];const l=document.createElement("div");(null==t?void 0:t.content_id)&&(l.id=t.content_id),l.className="liteareacontent",l.style.width="100%",l.style.height="100%",this.root.appendChild(l),this.content=l,this.split_direction="none",this.sections=[],(null==t?void 0:t.autoresize)&&i.LiteGUI.bind(i.LiteGUI,"resized",(()=>{r.onResize()}))}getSection(t){return t=t||0,this.sections.length>t?this.sections[t]:null}onResize(t){const e=[this.root.offsetWidth,this.root.offsetHeight];t&&this._computed_size&&e[0]==this._computed_size[0]&&e[1]==this._computed_size[1]||this.sendResizeEvent(t)}sendResizeEvent(t){if(this.sections.length)for(const e in this.sections){this.sections[e].onResize(t)}else for(let t=0;t<this.root.childNodes.length;t++){const e=this.root.childNodes[t];e.litearea?e.litearea.onResize():i.LiteGUI.trigger(e,"resize")}i.LiteGUI.sizeToCSS(),this.onresize&&this.onresize()}get getWidth(){return this.root.offsetWidth}get getHeight(){return this.root.offsetHeight}get isVisible(){return"none"!=this.root.style.display}adjustHeight(){if(!this.root.parentNode)return void console.error("Cannot adjust height of LiteGUI.Area without parent");this.root.parentNode.offsetHeight;const t=this.root.getClientRects()[0].top;this.root.style.height="calc( 100% - "+t+"px )"}split(t,e,s){if(!t||t.constructor!==String)throw"First parameter must be a string: 'vertical' or 'horizontal'";if(e||(e=["50%",null]),"vertical"!=t&&"horizontal"!=t)throw"First parameter must be a string: 'vertical' or 'horizontal'";if(this.sections.length)throw"cannot split twice";const i=new o({content_id:this.content.id});i.root.style.display="inline-block";const n=new o;n.root.style.display="inline-block";let r,l="",a=null;if(s&&(l=" - "+(o.splitbar_size+2)+"px",a=document.createElement("div"),a.className="litesplitbar "+t,"vertical"==t?a.style.height=o.splitbar_size+"px":a.style.width=o.splitbar_size+"px",this.splitbar=a,a.addEventListener("mousedown",(function(t){const e=c.root.ownerDocument;e.addEventListener("mousemove",h),e.addEventListener("mouseup",u),d[0]=t.pageX,d[1]=t.pageY,t.stopPropagation(),t.preventDefault()}))),e=e||["50%",null],"vertical"==t)if(i.root.style.width="100%",n.root.style.width="100%",null==e[0]){let t=e[1];"number"==typeof t&&(t=e[1]+"px"),i.root.style.height="-moz-calc( 100% - "+t+l+" )",i.root.style.height="-webkit-calc( 100% - "+t+l+" )",i.root.style.height="calc( 100% - "+t+l+" )",n.root.style.height=t,n.size=t,r=i}else if(null==e[1]){let t=e[0];"number"==typeof t&&(t=e[0]+"px"),i.root.style.height=t,i.size=t,n.root.style.height="-moz-calc( 100% - "+t+l+" )",n.root.style.height="-webkit-calc( 100% - "+t+l+" )",n.root.style.height="calc( 100% - "+t+l+" )",r=n}else{let t=e[0];"number"==typeof t&&(t=e[0]+"px");let s=e[1];"number"==typeof s&&(s=e[1]+"px"),i.root.style.height=t,i.size=t,n.root.style.height=s,n.size=s}else if(i.root.style.height="100%",n.root.style.height="100%",null==e[0]){let t=e[1];"number"==typeof t&&(t=e[1]+"px"),i.root.style.width="-moz-calc( 100% - "+t+l+" )",i.root.style.width="-webkit-calc( 100% - "+t+l+" )",i.root.style.width="calc( 100% - "+t+l+" )",n.root.style.width=t,n.size=e[1],r=i}else if(null==e[1]){let t=e[0];"number"==typeof t&&(t=e[0]+"px"),i.root.style.width=t,i.size=t,n.root.style.width="-moz-calc( 100% - "+t+l+" )",n.root.style.width="-webkit-calc( 100% - "+t+l+" )",n.root.style.width="calc( 100% - "+t+l+" )",r=n}else{let t=e[0];"number"==typeof t&&(t=e[0]+"px");let s=e[1];"number"==typeof s&&(s=e[1]+"px"),i.root.style.width=t,i.size=t,n.root.style.width=s,n.size=s}i.root.removeChild(i.content),i.root.appendChild(this.content),i.content=this.content,this.root.appendChild(i.root),a&&this.root.appendChild(a),this.root.appendChild(n.root),this.sections=[i,n],this.dynamic_section=r,this.direction=t;const c=this,d=[0,0];function h(e){var s;"horizontal"==t?d[0]!=e.pageX&&c.moveSplit(d[0]-e.pageX):"vertical"==t&&d[1]!=e.pageY&&c.moveSplit(e.pageY-d[1]),d[0]=e.pageX,d[1]=e.pageY,e.stopPropagation(),e.preventDefault(),(null===(s=c.options)||void 0===s?void 0:s.immediateResize)&&c.onResize()}function u(t){const e=c.root.ownerDocument;e.removeEventListener("mousemove",h),e.removeEventListener("mouseup",u),c.onResize()}}hide(){this.root.style.display="none"}show(){this.root.style.display="block"}showSection(t){let e=this.sections[t],s=0;if(!e||"none"==e.root.style.display){s="horizontal"==this.direction?e.root.style.width:e.root.style.height,-1!=s.indexOf("calc")&&(s="50%");for(const i in this.sections)e=this.sections[i],i==t.toString()?e.root.style.display="inline-block":"horizontal"==this.direction?e.root.style.width="calc( 100% - "+s+" - 5px)":e.root.style.height="calc( 100% - "+s+" - 5px)";this.splitbar&&(this.splitbar.style.display="inline-block"),this.sendResizeEvent()}}hideSection(t){for(const e in this.sections){const s=this.sections[e];e==t.toString()?s.root.style.display="none":"horizontal"==this.direction?s.root.style.width="100%":s.root.style.height="100%"}this.splitbar&&(this.splitbar.style.display="none"),this.sendResizeEvent()}moveSplit(t){var e;if(!this.sections)return;const s=this.sections[0],n=this.sections[1],r=" - "+o.splitbar_size+"px",l=(null===(e=this.options)||void 0===e?void 0:e.minSplitSize)||10;if("horizontal"==this.direction)if(this.dynamic_section==s){let e=n.root.offsetWidth+t;e<l&&(e=l),s.root.style.width="-moz-calc( 100% - "+e+"px "+r+" )",s.root.style.width="-webkit-calc( 100% - "+e+"px "+r+" )",s.root.style.width="calc( 100% - "+e+"px "+r+" )",n.root.style.width=e+"px"}else{let e=s.root.offsetWidth-t;e<l&&(e=l),n.root.style.width="-moz-calc( 100% - "+e+"px "+r+" )",n.root.style.width="-webkit-calc( 100% - "+e+"px "+r+" )",n.root.style.width="calc( 100% - "+e+"px "+r+" )",s.root.style.width=e+"px"}else if("vertical"==this.direction)if(this.dynamic_section==s){let e=n.root.offsetHeight-t;e<l&&(e=l),s.root.style.height="-moz-calc( 100% - "+e+"px "+r+" )",s.root.style.height="-webkit-calc( 100% - "+e+"px "+r+" )",s.root.style.height="calc( 100% - "+e+"px "+r+" )",n.root.style.height=e+"px"}else{let e=s.root.offsetHeight+t;e<l&&(e=l),n.root.style.height="-moz-calc( 100% - "+e+"px "+r+" )",n.root.style.height="-webkit-calc( 100% - "+e+"px "+r+" )",n.root.style.height="calc( 100% - "+e+"px "+r+" )",s.root.style.height=e+"px"}i.LiteGUI.trigger(this.root,"split_moved");const a=this.root.querySelectorAll(".litearea");for(let t=0;t<a.length;++t)i.LiteGUI.trigger(a[t],"split_moved")}addEventListener(t,e,s,i){return this.root.addEventListener(t,e,s)}setAreaSize(t,e){const s=e+o.splitbar_size+"px";t.root.style.width="-moz-calc( 100% - "+s+" )",t.root.style.width="-webkit-calc( 100% - "+s+" )",t.root.style.width="calc( 100% - "+s+" )"}merge(t){if(0==this.sections.length)throw"not splitted";const e=this.sections[t||0];this.root.appendChild(e.content),this.content=e.content,this.root.removeChild(this.sections[0].root),this.root.removeChild(this.sections[1].root),this.sections=[],this._computed_size=[],this.onResize()}add(t){let e=t;if("string"==typeof e){const t=document.createElement("div");t.innerHTML=e,e=t}this.content.appendChild(e.root||e)}query(t){return this.root.querySelector(t)}}e.Area=o,o.VERTICAL="vertical",o.HORIZONTAL="horizontal",o.splitbar_size=4;e.Split=class{constructor(t,e,s){if(e=e||{},t&&t.constructor===String){const i=t;t=e,(e=s||{}).id=i,console.warn("LiteGUI.Split legacy parameter, use sections as first parameter instead of id.")}const i=document.createElement("div");this.root=i,e.id&&(i.id=e.id),i.className="litesplit "+(e.vertical?"vsplit":"hsplit"),this.sections=[];for(const s in t){const o=document.createElement("div");o.className="split-section split"+s,"number"==typeof t[s]?e.vertical?o.style.height=t[s].toFixed(1)+"%":o.style.width=t[s].toFixed(1)+"%":"string"==typeof t[s]?e.vertical?o.style.height=t[s]:o.style.width=t[s]:(t[s].id&&(o.id=t[s].id),e.vertical?o.style.height="number"==typeof t[s].height?t[s].height.toFixed(1)+"%":t[s].height:o.style.width="number"==typeof t[s].width?t[s].width.toFixed(1)+"%":t[s].width),o.add=function(t){this.appendChild(t.root||t)},this.sections.push(o),i.appendChild(o)}e.parent&&(e.parent.root?e.parent.root.appendChild(i):e.parent.appendChild(i))}getSection(t){return this.sections[t]}}},688:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Console=void 0;e.Console=class{constructor(t){var e;this.options=t||{},this.root=document.createElement("div"),this.root.className="liteconsole",this.root.innerHTML="<div class='log'></div><div class='foot'><input type='text'/></div>",this.log_element=this.root.querySelector(".log"),this.input=this.root.querySelector("input"),null===(e=this.input)||void 0===e||e.addEventListener("keydown",this.processKeyDown.bind(this)),this._prompt=t.prompt||"]",this.history=[],this._history_offset=0}processKeyDown(t){if(!this._input_blocked&&this.input){if("enter"==t.key){const t=this.input.value.trim();this.addMessage(this._prompt+t,"me",!0),this.input.value="",this.history.push(t),this.history.length>10&&this.history.shift(),this.onProcessCommand(t),this._history_offset=0}else if("up arrow"==t.key||"down arrow"==t.key){this._history_offset+="up arrow"==t.key?-1:1,this._history_offset>0?this._history_offset=0:this._history_offset<-this.history.length&&(this._history_offset=-this.history.length);const e=this.history.length+this._history_offset;if(e<0)return;e>=this.history.length?this.input.value="":this.input.value=this.history[e]}else{if("tab"!=t.key)return;this.input.value=this.onAutocomplete(this.input.value)}t.preventDefault(),t.stopPropagation()}}addMessage(t,e,s=!0){const i=this.log_element;let o;if(t&&t.constructor===Array)for(let e=0;e<t.length;++e)n(t[e]);else t&&t.constructor===Object?n(JSON.stringify(t,null,"")):n(t);function n(t){o=document.createElement("pre"),s?o.innerText=t:o.innerHTML=t,o.className="msg",e&&(o.className+=" "+e),i.appendChild(o),i.children.length>1e3&&i.removeChild(i.children[0])}if(this.log_element.scrollTop=1e6,o)return o.update=function(t){this.innerHTML=t},o}log(){const t=Array.prototype.slice.call(arguments).join(",");return this.addMessage(t,"msglog")}warn(){const t=Array.prototype.slice.call(arguments).join(",");return this.addMessage(t,"msgwarn")}error(){const t=Array.prototype.slice.call(arguments).join(",");return this.addMessage(t,"msgerror")}clear(){this.log_element&&(this.log_element.innerHTML="")}onAutocomplete(t){return t}onProcessCommand(t){}}},776:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LiteGUI=e.purgeElement=e.Core=e.special_codes=void 0;const i=s(423),o=s(684),n=s(797),r=s(673),l=s(649),a=s(360),c=s(688),d=s(526),h=s(683),u=s(773),p=s(900);let g;var m;!function(t){t.close="&#10005;",t.navicon="&#9776;",t.refresh="&#8634;",t.gear="&#9881;",t.open_folder="&#128194;",t.download="&#11123;",t.tick="&#10003;",t.trash="&#128465;"}(m||(e.special_codes=m={}));class f{constructor(){this.root=null,this.content=null,this.container=null,this.panels={},this.windows=[],this.undo_steps=[],this.modalbg_div=null,this.Area=i.Area,this.Split=i.Split,this.Menubar=n.Menubar,this.Dialog=o.Dialog,this.Panel=r.Panel,this.Button=a.Button,this.SearchBox=a.SearchBox,this.ContextMenu=a.ContextMenu,this.Checkbox=a.Checkbox,this.LiteBox=a.LiteBox,this.List=a.List,this.Slider=a.Slider,this.LineEditor=a.LineEditor,this.ComplexList=a.ComplexList,this.Tabs=l.Tabs,this.Tree=d.Tree,this.Console=c.Console,this.Inspector=h.Inspector,this.Dragger=u.Dragger,this.Table=p.Table,this.special_codes=m}init(t){if(t=t||{},this.container=null,t.container&&(this.container=document.getElementById(t.container)),this.container||(this.container=document.body),t.wrapped){const t=document.createElement("div");t.style.position="relative",t.style.overflow="hidden",this.root=t,this.container.appendChild(t);const e=document.createElement("div");this.content=e,this.root.appendChild(e),this.root.classList.contains("fullscreen")&&window.addEventListener("resize",(t=>{this.maximizeWindow()}))}else this.root=this.content=this.container;t.width&&t.height&&this.setWindowSize(t.width,t.height),this.root.className="litegui-wrap fullscreen",this.content.className="litegui-maincontent";const e=this.modalbg_div=document.createElement("div");this.modalbg_div.className="litemodalbg",this.root.appendChild(this.modalbg_div),e.style.display="none",t.menubar&&this.createMenubar(),t.gui_callback&&t.gui_callback(),window.addEventListener("beforeunload",(t=>{for(let t=0;t<this.windows.length;++t)this.windows[t].close();this.windows=[]}))}trigger(t,e,s){const i=new CustomEvent(e,{detail:s});return t.dispatchEvent?t.dispatchEvent(i):t.__events&&t.__events.dispatchEvent(i),i}bind(t,e,s){if(!t)throw"Cannot bind to null";if(!e)throw"Event bind missing";if(!s)throw"Bind callback missing";if(t.constructor===String&&(t=document.querySelectorAll(t)),t.constructor===NodeList||t.constructor===Array)for(let e=0;e<t.length;++e)i(t[e]);else i(t);function i(t){if(t.addEventListener)t.addEventListener(e,s);else if(t.__events)t.__events.addEventListener(e,s);else{const i=document.createElement("span");i.widget=t,Object.defineProperty(t,"__events",{enumerable:!1,configurable:!1,writable:!1,value:i}),t.__events.addEventListener(e,s)}}}unbind(t,e,s){t.removeEventListener?t.removeEventListener(e,s):t.__events&&t.__events.removeEventListener&&t.__events.removeEventListener(e,s)}removeClass(t,e,s){s||(s=e,e="."+e);const i=(t||document).querySelectorAll(e);for(let t=0;t<i.length;++t)i[t].classList.remove(s)}add(t){var e;null===(e=this.content)||void 0===e||e.appendChild(t.root||t)}remove(t){if(t){if(t.constructor===String){const e=document.querySelectorAll(t);for(let t=0;t<e.length;++t){const s=e[t];s&&s.parentNode&&s.parentNode.removeChild(s)}}if(t.constructor===Array||t.constructor===NodeList)for(let e=0;e<t.length;++e)this.remove(t[e]);else t.root&&t.root.parentNode?t.root.parentNode.removeChild(t.root):t.parentNode&&t.parentNode.removeChild(t)}}getById(t){return document.getElementById(t)}createMenubar(){this.menubar=new e.LiteGUI.Menubar("mainmenubar"),this.add(this.menubar)}setWindowSize(t,s){var i,o,n,r;const l=null===(i=this.root)||void 0===i?void 0:i.style;if(t&&s)l.width=t+"px",l.height=s+"px",l.boxShadow="0 0 4px black",null===(o=this.root)||void 0===o||o.classList.remove("fullscreen");else{if(null===(n=this.root)||void 0===n?void 0:n.classList.contains("fullscreen"))return;null===(r=this.root)||void 0===r||r.classList.add("fullscreen"),l.width="100%",l.height="100%",l.boxShadow="0 0 0"}e.LiteGUI.trigger(e.LiteGUI,"resized",void 0)}maximizeWindow(){this.setWindowSize(void 0,void 0)}setCursor(t){this.root.style.cursor=t}isCursorOverElement(t,e){const s=t.pageX,i=t.pageY,o=e.getBoundingClientRect();return!!o&&(i>o.top&&i<o.top+o.height&&s>o.left&&s<o.left+o.width)}getRect(t){return t.getBoundingClientRect()}toClipboard(t,e){t&&t.constructor!==String&&(t=JSON.stringify(t));let s=null,i=!1;if(!e)try{document.queryCommandSupported("copy");s=document.createElement("input"),s.type="text",s.style.opacity=(0).toString(),s.value=t,document.body.appendChild(s),s.select(),i=document.execCommand("copy"),console.log(i?"saved to clipboard":"problem saving to clipboard"),document.body.removeChild(s)}catch(t){s&&document.body.removeChild(s),console.warn("Oops, unable to copy using the true clipboard")}try{this._safe_cliboard=void 0,localStorage.setItem("litegui_clipboard",t)}catch(e){this._safe_cliboard=t,console.warn("cliboard quota excedeed")}}getLocalClipboard(){let t=localStorage.getItem("litegui_clipboard");return!t&&this._safe_cliboard&&(t=this._safe_cliboard),t?"{"==t[0]?JSON.parse(t):t:null}addCSS(t){if(t){if(t.constructor===String){const e=document.createElement("style");return e.type="text/css",e.innerHTML=t,void document.getElementsByTagName("head")[0].appendChild(e)}for(const e in t)document.body.style[parseInt(e)]=t[e]}}requireCSS(t,e){for("string"==typeof t&&(t=[t]);t.length;){const s=document.createElement("link");s.rel="stylesheet",s.type="text/css",s.href=t.shift(),s.media="all";document.getElementsByTagName("head")[0].appendChild(s),0==t.length&&(s.onload=e)}}request(t){let s=t.dataType||"text";"json"==s||"xml"==s?s="text":"binary"==s&&(s="arraybuffer",t.mimeType="application/octet-stream");const i=new XMLHttpRequest;i.open(t.data?"POST":"GET",t.url,!0),s&&(i.responseType=s),t.mimeType&&i.overrideMimeType(t.mimeType),t.nocache&&i.setRequestHeader("Cache-Control","no-cache"),i.onload=function(s){let o=this.response;if(200!=this.status){const s="Error "+this.status;return t.error&&t.error(s),void e.LiteGUI.trigger(i,"fail",this.status)}if("json"==t.dataType)try{o=JSON.parse(o)}catch(e){if(!t.error)throw e;t.error(e)}else if("xml"==t.dataType)try{o=(new DOMParser).parseFromString(o,"text/xml")}catch(e){if(!t.error)throw e;t.error(e)}t.success&&t.success.call(this,o,this)},i.onerror=function(e){t.error&&t.error(e)};const o=new FormData;if(t.data)for(const e in t.data)o.append(e,t.data[e]);return i.send(o),i}requestText(t,e,s){return this.request({url:t,dataType:"text",success:e,error:s})}requestJSON(t,e,s){return this.request({url:t,dataType:"json",success:e,error:s})}requestBinary(t,e,s){return this.request({url:t,dataType:"binary",success:e,error:s})}requireScript(t,e,s,i,o){if(!t)throw"invalid URL";t.constructor===String&&(t=[t]);let n=t.length;const r=[],l=function(t,s){n--,r.push(t),n?i&&i(t.original_src,t.num):e&&e(r)};for(const e in t){const i=document.createElement("script");i.num=e,i.type="text/javascript",i.src=t[parseInt(e)]+(o?"?version="+o:""),i.original_src=t[parseInt(e)],i.async=!1,i.onload=l.bind(void 0,i),s&&(i.onerror=function(t){s(t,this.original_src,this.num)}),document.getElementsByTagName("head")[0].appendChild(i)}}requireScriptSerial(t,e,s){"string"==typeof t&&(t=[t]);const i=[];!function o(){const n=document.createElement("script");n.type="text/javascript",n.src=t.shift(),n.onload=function(n){if(t.length)return s&&s(t[0],t.length),void o();i.push(this),e&&e(i)},document.getElementsByTagName("head")[0].appendChild(n)}()}newDiv(t,e){return this.createElement("div",t,e,void 0,void 0)}createElement(t,e,s,i,o){const n=document.createElement(t);if(e){const t=e.split(" ");for(let e=0;e<t.length;e++)"."==t[e][0]?n.classList.add(t[e].substr(1)):"#"==t[e][0]?n.id=t[e].substr(1):n.id=t[e]}if(n.root=n,s&&(n.innerHTML=s),n.add=function(t){this.appendChild(t.root||t)},i)if(i.constructor===String)n.setAttribute("style",i);else for(const t in i)n.style[t]=i[t];if(o)for(const t in o)n.addEventListener(t,o[t]);return n}createListItem(t,e,s){let i=document.createElement("span");if(i.innerHTML=t,i=i.childNodes[0],e)for(const t in e){const s=i.querySelector(t);s&&(s.innerText=e[t])}if(s)for(const t in s)i.style[t]=s[t];return i}createButton(t,e,s,i){const o=document.createElement("button");if(o.className="litegui litebutton button",t){const e=t.split(" ");for(let t=0;t<e.length;t++)"."==e[t][0]?o.classList.add(e[t].substr(1)):"#"==e[t][0]?o.id=e[t].substr(1):o.id=e[t]}if(o.root=o,void 0!==e&&(o.innerHTML=e),s&&o.addEventListener("click",s),i)if(i.constructor===String)o.setAttribute("style",i);else for(const t in i)o.style[t]=i[t];return o}getParents(t){const e=[];let s=t.parentElement;for(;null!==s;)t.nodeType===Node.ELEMENT_NODE&&(e.push(t),s=s.parentElement);return e}newWindow(t,e,s,i){i=i||{};const o=window.open("","","width="+e+", height="+s+", location=no, status=no, menubar=no, titlebar=no, fullscreen=yes");o.document.write("<html><head><title>"+t+"</title>");const n=document.querySelectorAll("link[rel='stylesheet'],style");for(let t=0;t<n.length;t++)o.document.write(n[t].outerHTML);if(i.scripts){const t=document.querySelectorAll("script");for(let e=0;e<t.length;e++)t[e].src&&o.document.write(t[e].outerHTML)}const r=i.content||"";return o.document.write("</head><body>"+r+"</body></html>"),o.document.close(),o}showModalBackground(t){this.modalbg_div&&(this.modalbg_div.style.display=t?"block":"none")}showMessage(t,s){(s=s||{}).title=s.title||"Attention",s.content=t,s.close="fade";const i=new e.LiteGUI.Dialog(s);return s.noclose||i.addButton("Close",{close:!0}),i.makeModal(),i}popup(t,s){(s=s||{}).min_height=140,"string"==typeof t&&(t="<p>"+t+"</p>"),s.content=t,s.close="fade";const i=new e.LiteGUI.Dialog(s);return s.noclose||i.addButton("Close",{close:!0}),i.show(),i}alert(t,s){return(s=s||{}).className="alert",s.title=s.title||"Alert",s.width=s.width||280,s.height=s.height||140,"string"==typeof t&&(t="<p>"+t+"</p>"),e.LiteGUI.remove(".litepanel.alert"),e.LiteGUI.showMessage(t,s)}confirm(t,e,s){(s=s||{}).className="alert",s.title=s.title||"Confirm",s.width=s.width||280,"string"==typeof t&&(t="<p>"+t+"</p>"),t+="<button class='litebutton' data-value='yes' style='width:45%; margin-left: 10px'>Yes</button><button class='litebutton' data-value='no' style='width:45%'>No</button>",s.noclose=!0;const i=this.showMessage(t,s);i.content.style.paddingBottom="10px";const o=i.content.querySelectorAll("button"),n=t=>{const s="yes"==t.target.dataset.value;i.close(),e&&e(s)};for(let t=0;t<o.length;t++){o[t].addEventListener("click",n)}return o[0].focus(),i}prompt(t,e,s){(s=s||{}).className="alert",s.title=s.title||"Prompt",s.width=s.width||280,"string"==typeof t&&(t="<p>"+t+"</p>");const i=s.value||"";let o="<input type='text' value='"+i+"'/>";s.textarea&&(o="<textarea class='textfield' style='width:95%'>"+i+"</textarea>"),t+="<p>"+o+"</p><button class='litebutton' data-value='accept' style='width:45%; margin-left: 10px; margin-bottom: 10px'>Accept</button><button class='litebutton' data-value='cancel' style='width:45%'>Cancel</button>",s.noclose=!0;const n=this.showMessage(t,s),r=function(t){const s=t.target;let i=a.value;s.dataset&&"cancel"==s.dataset.value&&(i=void 0),n.close(),e&&e(i)},l=n.content.querySelectorAll("button");for(let t=0;t<l.length;t++)l[t].addEventListener("click",r);const a=n.content.querySelector("input,textarea");return a.addEventListener("keydown",(function(t){t||(t=window.event);const e=t.keyCode||t.which;if(13==e)return r(t),!1;29==e&&n.close()}),!0),a.focus(),n}choice(t,e,s,i){(i=i||{}).className="alert",i.title=i.title||"Select one option",i.width=i.width||280,"string"==typeof t&&(t="<p>"+t+"</p>");for(const s in e)t+="<button class='litebutton' data-value='"+s+"' style='width:45%; margin-left: 10px'>"+(e[s].content||e[s])+"</button>";i.noclose=!0;const o=this.showMessage(t,i);o.content.style.paddingBottom="10px";const n=o.content.querySelectorAll("button"),r=t=>{const i=t.target,n=e[i.dataset.value];o.close(),s&&s(n)};for(let t=0;t<n.length;t++)n[t].addEventListener("click",r);return o}downloadURL(t,e){const s=document.createElement("a");s.href=t,s.download=e,document.body.appendChild(s),s.click(),document.body.removeChild(s)}downloadFile(t,e,s){if(!e)return void console.warn("No file provided to download");s||(s=e.constructor===String?"text/plain":"application/octet-stream");let i=null;i=e.constructor!==File&&e.constructor!==Blob?new Blob([e],{type:s}):e;const o=URL.createObjectURL(i),n=document.createElement("a");n.setAttribute("href",o),n.setAttribute("download",t),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n),setTimeout((()=>{URL.revokeObjectURL(o)}),6e4)}getUrlVars(){const t=[];let e;const s=window.location.href.slice(window.location.href.indexOf("?")+1).split("&");for(let i=0;i<s.length;i++)e=s[i].split("="),t.push(e[0]),t[e[0]]=e[1];return t}getUrlVar(t){return e.LiteGUI.getUrlVars()[t]}focus(t){t.focus()}blur(t){t.blur()}draggable(t,e,s,i,o){(e=e||t).addEventListener("mousedown",(function e(d){if("mousedown"==d.type)return l||(l=t.getClientRects()[0],a=l?l.left:0,c=l?l.top:0),o&&0==o(t,d)?(d.stopPropagation(),!1):(n=d.clientX,r=d.clientY,document.addEventListener("mousemove",e),document.addEventListener("mouseup",e),s&&s(t,d),d.stopPropagation(),!1);if("mouseup"==d.type)return document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",e),void(i&&i(t,d));if("mousemove"==d.type){const e=d.clientX-n,s=d.clientY-r;n=d.clientX,r=d.clientY,a+=e,c+=s,t.style.left=a+"px",t.style.top=c+"px"}return})),e.style.cursor="move";let n=0,r=0,l=t.getClientRects()[0],a=l?l.left:0,c=l?l.top:0;t.style.position="absolute",t.style.left=a+"px",t.style.top=c+"px"}cloneObject(t,e){const s=e||{};for(const e in t){if("_"==e[0]||"jQuery"==e.substring(0,5))continue;const i=t[e];if(null==i)s[e]=null;else{if("function"==typeof i)continue;if("number"==typeof i||"string"==typeof i)s[e]=i;else if(i.constructor==Float32Array)s[e]=Array.apply([],i);else if(Array.isArray(i))s[e]&&s[e].constructor==Float32Array?s[e].set(i):s[e]=JSON.parse(JSON.stringify(i));else try{s[e]=JSON.parse(JSON.stringify(i))}catch(t){console.error(t)}}}return s}safeName(t){return String(t).replace(/[\s.]/g,"")}htmlEncode(t){const e=document.createElement("div");return e.innerHTML=t,e.innerText}htmlDecode(t){const e=document.createElement("div");return e.innerText=t,e.innerHTML}sizeToCSS(t){const e=t;return null==e?null:e.constructor===String?e:"number"==typeof e&&e>=0?e+"px":"calc( 100% - "+Math.abs(e)+"px )"}getElementWindow(t){const e=t.ownerDocument;return e.defaultView||e.parentWindow}createDropArea(t,e,s,i){function o(e){t.addEventListener("dragexit",o),t.addEventListener("dragover",o),t.addEventListener("drop",n),e.stopPropagation(),e.preventDefault(),"dragenter"==e.type&&s&&s(e,t),"dragexit"==e.type&&i&&i(e,t)}function n(s){let i;if(s.stopPropagation(),s.preventDefault(),t.removeEventListener("dragexit",o),t.removeEventListener("dragover",o),t.removeEventListener("drop",n),e&&(i=e(s)),i)return s.stopPropagation(),s.stopImmediatePropagation(),!0}t.addEventListener("dragenter",o)}}e.Core=f,Object.defineProperty(String.prototype,"template",{value:function(t,e){let s=this;const i=/{{([^}}]+)?}}/g;let o;for(;o;){const n=e?new Function("with(this) { try { return "+o[1]+"} catch(e) { return 'error';} }").call(t):t[o[1]];s=s.replace(o[0],n),o=i.exec(s)}return s},enumerable:!1}),e.purgeElement=function t(e,s){let i,o,n,r=e.attributes;if(r)for(i=r.length-1;i>=0;i-=1)n=r[i].name,"function"==typeof e[n]&&(e[n]=null);if(r=e.childNodes,r)for(o=r.length,i=0;i<o;i+=1)t(e.childNodes[i],void 0)},void 0===g&&(g=function(t){return t.replace(/[\u00A0-\u2666<>&]/g,(t=>"&"+(g.entityTable[t.charCodeAt(0)]||"#"+t.charCodeAt(0))+";"))},g.entityTable={34:"quot",38:"amp",39:"apos",60:"lt",62:"gt",160:"nbsp",161:"iexcl",162:"cent",163:"pound",164:"curren",165:"yen",166:"brvbar",167:"sect",168:"uml",169:"copy",170:"ordf",171:"laquo",172:"not",173:"shy",174:"reg",175:"macr",176:"deg",177:"plusmn",178:"sup2",179:"sup3",180:"acute",181:"micro",182:"para",183:"middot",184:"cedil",185:"sup1",186:"ordm",187:"raquo",188:"frac14",189:"frac12",190:"frac34",191:"iquest",192:"Agrave",193:"Aacute",194:"Acirc",195:"Atilde",196:"Auml",197:"Aring",198:"AElig",199:"Ccedil",200:"Egrave",201:"Eacute",202:"Ecirc",203:"Euml",204:"Igrave",205:"Iacute",206:"Icirc",207:"Iuml",208:"ETH",209:"Ntilde",210:"Ograve",211:"Oacute",212:"Ocirc",213:"Otilde",214:"Ouml",215:"times",216:"Oslash",217:"Ugrave",218:"Uacute",219:"Ucirc",220:"Uuml",221:"Yacute",222:"THORN",223:"szlig",224:"agrave",225:"aacute",226:"acirc",227:"atilde",228:"auml",229:"aring",230:"aelig",231:"ccedil",232:"egrave",233:"eacute",234:"ecirc",235:"euml",236:"igrave",237:"iacute",238:"icirc",239:"iuml",240:"eth",241:"ntilde",242:"ograve",243:"oacute",244:"ocirc",245:"otilde",246:"ouml",247:"divide",248:"oslash",249:"ugrave",250:"uacute",251:"ucirc",252:"uuml",253:"yacute",254:"thorn",255:"yuml",402:"fnof",913:"Alpha",914:"Beta",915:"Gamma",916:"Delta",917:"Epsilon",918:"Zeta",919:"Eta",920:"Theta",921:"Iota",922:"Kappa",923:"Lambda",924:"Mu",925:"Nu",926:"Xi",927:"Omicron",928:"Pi",929:"Rho",931:"Sigma",932:"Tau",933:"Upsilon",934:"Phi",935:"Chi",936:"Psi",937:"Omega",945:"alpha",946:"beta",947:"gamma",948:"delta",949:"epsilon",950:"zeta",951:"eta",952:"theta",953:"iota",954:"kappa",955:"lambda",956:"mu",957:"nu",958:"xi",959:"omicron",960:"pi",961:"rho",962:"sigmaf",963:"sigma",964:"tau",965:"upsilon",966:"phi",967:"chi",968:"psi",969:"omega",977:"thetasym",978:"upsih",982:"piv",8226:"bull",8230:"hellip",8242:"prime",8243:"Prime",8254:"oline",8260:"frasl",8472:"weierp",8465:"image",8476:"real",8482:"trade",8501:"alefsym",8592:"larr",8593:"uarr",8594:"rarr",8595:"darr",8596:"harr",8629:"crarr",8656:"lArr",8657:"uArr",8658:"rArr",8659:"dArr",8660:"hArr",8704:"forall",8706:"part",8707:"exist",8709:"empty",8711:"nabla",8712:"isin",8713:"notin",8715:"ni",8719:"prod",8721:"sum",8722:"minus",8727:"lowast",8730:"radic",8733:"prop",8734:"infin",8736:"ang",8743:"and",8744:"or",8745:"cap",8746:"cup",8747:"int",8756:"there4",8764:"sim",8773:"cong",8776:"asymp",8800:"ne",8801:"equiv",8804:"le",8805:"ge",8834:"sub",8835:"sup",8836:"nsub",8838:"sube",8839:"supe",8853:"oplus",8855:"otimes",8869:"perp",8901:"sdot",8968:"lceil",8969:"rceil",8970:"lfloor",8971:"rfloor",9001:"lang",9002:"rang",9674:"loz",9824:"spades",9827:"clubs",9829:"hearts",9830:"diams",338:"OElig",339:"oelig",352:"Scaron",353:"scaron",376:"Yuml",710:"circ",732:"tilde",8194:"ensp",8195:"emsp",8201:"thinsp",8204:"zwnj",8205:"zwj",8206:"lrm",8207:"rlm",8211:"ndash",8212:"mdash",8216:"lsquo",8217:"rsquo",8218:"sbquo",8220:"ldquo",8221:"rdquo",8222:"bdquo",8224:"dagger",8225:"Dagger",8240:"permil",8249:"lsaquo",8250:"rsaquo",8364:"euro"}),e.LiteGUI=new f},684:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Dialog=void 0;const i=s(776);class o{constructor(t,e){if(this.content=null,this.root=void 0,this.footer=null,this.minimized=[],this.header=null,this.resizable=!1,this.draggable=!1,e||t&&t.constructor===String){const s=t;(t=e||{}).id=s,console.warn("LiteGUI.Dialog legacy parameter, use options as first parameter instead of id.")}this._ctor(t)}getDialog(t){const e=document.getElementById(t);return e?e.dialog:null}_ctor(t){var e,s;t=t||{};const n=this;this.width=t.width,this.height=t.height,this.minWidth=t.minWidth||150,this.minHeight=t.minHeight||100,this.content=t.content||"";const r=document.createElement("div");t.id&&(r.id=t.id),r.className="litedialog "+(t.className||""),r.data=this,r.dialog=this;let l="";if(t.title&&(l+="<div class='panel-header'>"+t.title+"</div><div class='buttons'>",t.minimize&&(l+="<button class='litebutton mini-button minimize-button'>-</button>",l+="<button class='litebutton mini-button maximize-button' style='display:none'></button>"),t.hide&&(l+="<button class='litebutton mini-button hide-button'></button>"),t.detachable&&(l+="<button class='litebutton mini-button detach-button'></button>"),(t.close||t.closable)&&(l+="<button class='litebutton mini-button close-button'>"+i.LiteGUI.special_codes.close+"</button>"),l+="</div>"),l+="<div class='content'>"+this.content+"</div>",l+="<div class='panel-footer'></div>",r.innerHTML=l,this.root=r,this.header=r.querySelector(".panel-header"),this.content=r.querySelector(".content"),this.footer=r.querySelector(".panel-footer"),t.fullcontent&&(this.content.style.width="100%",this.content.style.height=t.title?"calc( 100% - "+o.title_height+" )":"100%"),t.buttons)for(const e in t.buttons)this.addButton(t.buttons[e].name,t.buttons[e]);1==t.scroll&&(this.content.style.overflow="auto");const a=r.querySelector(".close-button");a&&a.addEventListener("click",this.close.bind(this));const c=r.querySelector(".maximize-button");c&&c.addEventListener("click",this.maximize.bind(this));const d=r.querySelector(".minimize-button");d&&d.addEventListener("click",this.minimize.bind(this));const h=r.querySelector(".hide-button");h&&h.addEventListener("click",this.hide.bind(this));const u=r.querySelector(".detach-button");if(u&&u.addEventListener("click",(()=>{n.detachWindow(void 0,void 0)})),this.enableProperties(t),null===(e=this.root)||void 0===e||e.addEventListener("DOMNodeInsertedIntoDocument",(()=>{n.on_attached_to_DOM&&n.on_attached_to_DOM(),n.on_resize&&n.on_resize()})),null===(s=this.root)||void 0===s||s.addEventListener("DOMNodeRemovedFromDocument",(()=>{n.on_detached_from_DOM&&n.on_detached_from_DOM()})),t.attach||t.parent){let e=null;t.parent&&(e="string"==typeof t.parent?document.querySelector(t.parent):t.parent),e||(e=i.LiteGUI.root),null==e||e.appendChild(this.root),this.center()}}add(t){(t.root||t.root)&&this.content.appendChild(t.root)}enableProperties(t){t=t||{};const e=this,s=this.root;s.style.position="absolute",s.style.minWidth=this.minWidth+"px",s.style.minHeight=this.minHeight+"px",this.width&&(s.style.width=this.width+"px"),this.height&&("number"==typeof this.height?s.style.height=this.height+"px":-1!=this.height.indexOf("%")&&(s.style.height=this.height),this.content.style.height="calc( "+this.height+"px - 24px )"),s.style.boxShadow="0 0 3px black",t.draggable&&(this.draggable=!0,i.LiteGUI.draggable(s,s.querySelector(".panel-header"),(()=>{e.bringToFront()}),(()=>{}),(()=>!e.minimized))),t.resizable&&this.setResizable()}setResizable(){var t;if(this.resizable)return;const e=this.root;this.resizable=!0;const s=this.footer;s.style.minHeight="4px",s.classList.add("resizable");const o=document.createElement("div");o.className="resizable-corner",null===(t=this.root)||void 0===t||t.appendChild(o);const n=[0,0],r=this;let l=!1;const a=function(t){const s=t.target;if("mousedown"==t.type)document.body.addEventListener("mousemove",a),document.body.addEventListener("mouseup",a),l=s==o,n[0]=t.pageX,n[1]=t.pageY;else if("mousemove"==t.type){const s=i.LiteGUI.getRect(e),o=s.width,a=o-(n[0]-t.pageX),c=s.height,d=c-(n[1]-t.pageY);l&&(e.style.width=a+"px"),e.style.height=d+"px",n[0]=t.pageX,n[1]=t.pageY,r.content.style.height="calc( 100% - 24px )",!r.on_resize||o==a&&c==d||r.on_resize(t,a,d)}else"mouseup"==t.type&&(document.body.removeEventListener("mousemove",a),document.body.removeEventListener("mouseup",a),l=!1);return t.preventDefault(),t.stopPropagation(),!1};s.addEventListener("mousedown",a),o.addEventListener("mousedown",a,!0)}dockTo(t,e){var s;if(!t)return;const o=this.root;e=e||"full",o.style.top="0",o.style.left="0",o.style.boxShadow="0 0 0","full"==e?(o.style.position="relative",o.style.width="100%",o.style.height="100%",this.content.style.width="100%",this.content.style.height="calc(100% - "+i.LiteGUI.Panel.title_height+")",this.content.style.overflow="auto"):"left"==e||"right"==e?(o.style.position="absolute",o.style.top="0",o.style[e]="0",o.style.width=this.width+"px",o.style.height="100%",this.content.style.height="calc(100% - "+i.LiteGUI.Panel.title_height+")",this.content.style.overflow="auto","right"==e&&(o.style.left="auto",o.style.right="0")):"bottom"!=e&&"top"!=e||(o.style.width="100%",o.style.height=this.height+"px","bottom"==e&&(o.style.bottom="0",o.style.top="auto")),this.draggable&&i.LiteGUI.draggable(o),null===(s=t.root)||void 0===s||s.appendChild(o)}addButton(t,e){(e=e||{}).constructor===Function&&(e={callback:e});const s=this,i=document.createElement("button");i.className="litebutton",i.innerHTML=t,e.className&&(i.className+=" "+e.className),this.root.querySelector(".panel-footer").appendChild(i);return i.addEventListener("click",function(t){e.callback&&e.callback(i),e.close&&s.close()}.bind(i)),i}close(){i.LiteGUI.remove(this.root),i.LiteGUI.trigger(this,"closed",this),this.on_close&&this.on_close(),this.onclose&&console.warn("Dialog: Do not use onclose, use on_close instead"),this.dialog_window&&(this.dialog_window.close(),this.dialog_window=void 0)}highlight(t){t=t||100,this.root.style.outline="1px solid white";const e=this.root.ownerDocument;(e.defaultView||e.parentWindow).focus(),setTimeout((()=>{this.root.style.outline=null}),t)}minimize(){var t,e,s;if(this.minimized.length)return;if(this.old_box=null===(t=this.root)||void 0===t?void 0:t.getBoundingClientRect(),!this.root.querySelector(".content"))return;this.root.querySelector(".content").style.display="none";const o=null===(e=this.root)||void 0===e?void 0:e.querySelector(".minimize-button");o&&(o.style.display="none");const n=null===(s=this.root)||void 0===s?void 0:s.querySelector(".maximize-button");n&&(n.style.display=""),this.root.style.width=i.LiteGUI.Dialog.MINIMIZED_WIDTH+"px";i.LiteGUI.bind(this,"closed",(t=>{const e=t.target;this.minimized.splice(this.minimized.indexOf(e),1),this.arrangeMinimized()})),this.minimized.push(this),this.arrangeMinimized(),i.LiteGUI.trigger(this,"minimizing")}arrangeMinimized(){for(const t in this.minimized){const e=this.minimized[t],s=e.root.parentNode,o=(null==s?void 0:s.getBoundingClientRect().height)-20;e.root.style.left=String(i.LiteGUI.Dialog.MINIMIZED_WIDTH*parseInt(t)),e.root.style.top=o+"px"}}maximize(){if(0==this.minimized.length)return;this.minimized=[],this.root.querySelector(".content").style.display="",i.LiteGUI.draggable(this.root),this.root.style.left=this.old_box.left+"px",this.root.style.top=this.old_box.top+"px",this.root.style.width=this.old_box.width+"px",this.root.style.height=this.old_box.height+"px";const t=this.root.querySelector(".minimize-button");t&&(t.style.display="");const e=this.root.querySelector(".maximize-button");e&&(e.style.display="none"),this.minimized.splice(this.minimized.indexOf(this),1),this.arrangeMinimized(),i.LiteGUI.trigger(this,"maximizing")}makeModal(){var t;i.LiteGUI.showModalBackground(!0),null===(t=i.LiteGUI.modalbg_div)||void 0===t||t.appendChild(this.root),this.show(),this.center(),i.LiteGUI.bind(this,"closed",(function(t){i.LiteGUI.showModalBackground(!1)}))}bringToFront(){var t;const e=null===(t=this.root)||void 0===t?void 0:t.parentNode;e&&(e.removeChild(this.root),e.appendChild(this.root))}show(t){var e;if(!(null===(e=this.root)||void 0===e?void 0:e.parentNode)){if(t){const e=t.ownerDocument;(e.querySelector(".litegui-wrap")||e.body).appendChild(this.root);(e.defaultView||e.parentWindow).focus()}else i.LiteGUI.add(this);this.center()}this.detach_window||(this.root.style.display="",i.LiteGUI.trigger(this,"shown"))}hide(){this.root.style.display="none",i.LiteGUI.trigger(this,"hidden")}fadeIn(t){t=t||1e3,this.root.style.display="",this.root.style.opacity="0";const e=this;setTimeout((()=>{e.root.style.transition="opacity "+t+"ms",e.root.style.opacity="1"}),100)}setPosition(t,e){var s;(null===(s=this.root)||void 0===s?void 0:s.parentNode)||console.warn("LiteGUI.Dialog: Cannot set position of dialog if it is not in the DOM"),this.root.position="absolute",this.root.style.left=t+"px",this.root.style.top=e+"px"}setSize(t,e){this.root.style.width="number"==typeof t?t+"px":t,this.root.style.height="number"==typeof e?e+"px":e}setTitle(t){this.header&&(this.header.innerHTML=t)}center(){var t;if(!(null===(t=this.root)||void 0===t?void 0:t.parentNode))return;this.root.position="absolute";const e=this.root.offsetWidth,s=this.root.offsetHeight,i=this.root.parentNode.offsetWidth,o=this.root.parentNode.offsetHeight;this.root.style.left=Math.floor(.5*(i-e))+"px",this.root.style.top=Math.floor(.5*(o-s))+"px"}adjustSize(t,e){var s;if(t=t||0,this.content.style.height="auto",0==this.content.offsetHeight&&!e){const e=this;return void setTimeout((()=>{e.adjustSize(t,!0)}),1)}let i=0;const o=null===(s=this.root)||void 0===s?void 0:s.querySelector(".panel-footer");o&&(i+=o.offsetHeight);const n=this.content.offsetWidth,r=this.content.offsetHeight+20+t+i;this.setSize(n,r)}clear(){this.content.innerHTML=""}detachWindow(t,e){if(this.minimized.length>0&&this.maximize(),this.dialog_window)return;const s=this.root.getClientRects()[0],o=s.width,n=s.height;let r="Window";this.header&&(r=this.header.textContent);const l=window.open("","","width="+o+", height="+n+", location=no, status=no, menubar=no, titlebar=no, fullscreen=yes");l.document.write("<head><title>"+r+"</title>"),this.dialog_window=l;const a=document.querySelectorAll("link[rel='stylesheet'],style");for(let t=0;t<a.length;t++)l.document.write(a[t].outerHTML);l.document.write("</head><body></body>"),l.document.close();return l.onbeforeunload=function(){const t=i.LiteGUI.windows.indexOf(l);-1!=t&&i.LiteGUI.windows.splice(t,1),e&&e()},l.document.body.appendChild(this.content),this.root.style.display="none",this._old_height=this.content.style.height,this.content.style.height="100%",i.LiteGUI.windows.push(l),t&&t(),l}reattachWindow(){var t;if(!this.dialog_window)return;null===(t=this.root)||void 0===t||t.appendChild(this.content),this.root.style.display="",this.content.style.height=this._old_height,delete this._old_height,this.dialog_window.close();const e=i.LiteGUI.windows.indexOf(this.dialog_window);-1!=e&&i.LiteGUI.windows.splice(e,1),this.dialog_window=void 0}showAll(){var t;const e=document.body.querySelectorAll("litedialog");for(let s=0;s<e.length;s++){null===(t=e[s].dialog)||void 0===t||t.show()}}hideAll(){var t;const e=document.body.querySelectorAll("litedialog");for(let s=0;s<e.length;s++){null===(t=e[s].dialog)||void 0===t||t.hide()}}closeAll(){var t;const e=document.body.querySelectorAll("litedialog");for(let s=0;s<e.length;s++){null===(t=e[s].dialog)||void 0===t||t.close()}}}e.Dialog=o,o.MINIMIZED_WIDTH=200,o.title_height="20px"},773:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Dragger=void 0;const i=s(776);e.Dragger=class{constructor(t,e){this.dragging=!1;let s=t;null==s?s=0:s.constructor===String?s=parseFloat(s):s.constructor!==Number&&(s=0),this.value=s;const o=this;this.options=e||{};const n=null!=(null==e?void 0:e.precision)?e.precision:3,r=document.createElement("div");r.className="dragger "+((null==e?void 0:e.extraclass)?null==e?void 0:e.extraclass:""),this.root=r;const l=document.createElement("span");l.className="inputfield "+((null==e?void 0:e.extraclass)?e.extraclass:"")+((null==e?void 0:e.full)?" full":""),(null==e?void 0:e.disabled)&&(l.className+=" disabled"),r.appendChild(l);const a=(null==e?void 0:e.dragger_class)||"full",c=document.createElement("input");c.className="text number "+(a||""),c.value=s.toFixed(n)+((null==e?void 0:e.units)?e.units:""),c.tabIndex=null==e?void 0:e.tab_index,this.input=c,r.input=c,(null==e?void 0:e.disabled)&&(c.disabled=!0),(null==e?void 0:e.tab_index)&&(c.tabIndex=e.tab_index),l.appendChild(c),c.addEventListener("keydown",(t=>{const e=t.key||t.keyCode;if(38==e)g(1,t);else{if(40!=e)return;g(-1,t)}return t.stopPropagation(),t.preventDefault(),!0}));const d=document.createElement("div");d.className="drag_widget",(null==e?void 0:e.disabled)&&(d.className+=" disabled"),l.appendChild(d),r.dragger=d,d.addEventListener("mousedown",(function(t){h=c.ownerDocument,h.removeEventListener("mousemove",u),h.removeEventListener("mouseup",p),(null==e?void 0:e.disabled)||(r.requestPointerLock&&r.requestPointerLock(),h.addEventListener("mousemove",u),h.addEventListener("mouseup",p),d.data=[t.screenX,t.screenY],o.dragging=!0,i.LiteGUI.trigger(r,"start_dragging"));t.stopPropagation(),t.preventDefault()}));c.addEventListener("wheel",function(t){if(document.activeElement!==c)return;g((t.deltaY?-t.deltaY/3:0)>0?1:-1,t),t.stopPropagation(),t.preventDefault()}.bind(c),!1);let h=null;function u(t){let s=[t.screenX-d.data[0],d.data[1]-t.screenY];void 0!==t.movementX&&(s=[t.movementX,-t.movementY]),d.data=[t.screenX,t.screenY];return g(s[(null==e?void 0:e.horizontal)?0:1],t),t.stopPropagation(),t.preventDefault(),!1}function p(t){o.dragging=!1,i.LiteGUI.trigger(r,"stop_dragging");const e=h||document;return h=null,e.removeEventListener("mousemove",u),e.removeEventListener("mouseup",p),e.exitPointerLock&&e.exitPointerLock(),i.LiteGUI.trigger(d,"blur"),t.stopPropagation(),t.preventDefault(),!1}function g(t,s){let o=t;(null==e?void 0:e.linear)||(o=o>0?Math.pow(o,1.2):-1*Math.pow(Math.abs(o),1.2));let r=(null==e?void 0:e.step)?e.step:1;s&&s.shiftKey?r*=10:s&&s.ctrlKey&&(r*=.1);let l=parseFloat(c.value)+o*r;null!=(null==e?void 0:e.max)&&l>e.max&&(l=e.max),null!=(null==e?void 0:e.min)&&l<e.min&&(l=e.min),c.value=l.toFixed(n),(null==e?void 0:e.units)&&(c.value+=e.units),i.LiteGUI.trigger(c,"change")}}setRange(t,e){this.options.min=t,this.options.max=e}setValue(t,e){let s=parseFloat(t);this.value=s,this.options.precision&&(s=s.toFixed(this.options.precision)),this.options.units&&(s+=this.options.units),this.input.value=s,e||i.LiteGUI.trigger(this.input,"change")}getValue(){return this.value}}},683:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Inspector=void 0;const i=s(776),o=s(776),n=s(90);class r{constructor(t){this.row_number=0,this.name_width=null,this.widgets_width=null,this.onchange=null,this.one_line=null,this._current_container_stack=[],this.name="",this.options=t||{};const e=document.createElement("DIV");this.root=e,this.root.className="inspector "+(this.options.full?"full":"")+(this.options.className||""),this.options.one_line&&(this.one_line=!0,this.root.className+=" one_line"),this.options.id&&(this.root.id=t.id||""),this.sections=new Array,this.values=new Map,this.widgets=new Array,this.widgets_by_name=new Map,this.row_number=0,this.addContainer("",{}),this.tab_index=Math.floor(1e4*Math.random()),this.options.width&&(this.root.style.width=i.LiteGUI.sizeToCSS(this.options.width).toString()),this.options.height&&(this.root.style.height=i.LiteGUI.sizeToCSS(this.options.height).toString(),this.options.one_line||(this.root.style.overflow="auto")),this.options.name_width&&(this.name_width=this.options.name_width),this.options.widgets_width&&(this.widgets_width=this.options.widgets_width),this.options.noscroll&&(this.root.style.overflow="hidden"),this.options.onchange&&(this.onchange=this.options.onchange),this.options.parent&&this.appendTo(this.options.parent,null),this.className=this.root.className,this.widgets_per_row=this.options.widgets_per_row||1}getValues(){const t=new Map;for(const e in this.widgets_by_name){const s=this.widgets_by_name.get(e).getValue();t.set(e,s)}return t}setValues(t){for(const e in t)this.widgets_by_name.get(e)&&this.widgets_by_name.get(e).setValue(t[e])}appendTo(t,e){t&&(t.constructor===String&&(t=document.querySelector(t)),t&&(e?t.insertBefore(this.root,t.firstChild):t.appendChild(this.root)))}clear(){for((0,o.purgeElement)(this.root,!0);this.root.hasChildNodes();)this.root.removeChild(this.root.lastChild);this.root.className=this.className,this.row_number=0,this.values.clear(),this.widgets=[],this.widgets_by_name.clear(),this.sections=[],this.current_section=null,this._current_container=null,this._current_container_stack=[],this.addContainer()}refresh(){this.on_refresh&&this.on_refresh()}append(t,e){const s=(e=e||{}).widget_parent||this._current_container||this.root;e.replace?e.replace.parentNode.replaceChild(t,e.replace):(t.section=this.current_section,s.appendChild(t))}pushContainer(t){if(this._current_container_stack){if(-1!=this._current_container_stack.indexOf(t))return void console.warn("Container already in the stack");this._current_container_stack.push(t)}else this._current_container_stack=[t];this._current_container=t}isContainerInStack(t){return!!this._current_container_stack&&-1!=this._current_container_stack.indexOf(t)}popContainer(t){if(this.row_number=0,this._current_container_stack&&this._current_container_stack.length){if(t){let e=this._current_container_stack.pop();for(;e&&e!=t;)e=this._current_container_stack.pop()}else this._current_container_stack.pop();this._current_container=this._current_container_stack[this._current_container_stack.length-1]}else this._current_container=null}setup(t){for(const e in t){const s=t[e];this.add(s.type,s.name,s.value,s.options)}}getWidget(t){return null!==t&&t.constructor===Number?this.widgets[t]:this.widgets_by_name.get(t.toString())}inspectInstance(t,e,s,i){if(!t)return;e||(e=t.getProperties?t.getProperties():this.collectProperties(t));const o=t.constructor;!s&&o.properties&&(s=o.properties);let n={};if(t.getInspectorProperties)n=t.getInspectorProperties();else for(const i in e){if(s&&s[i]){n[i]=r(s[i]);continue}const l=e[i];if(o["@"+i]){const t=o["@"+i];if(t&&null===t.widget)continue;n[i]=r(t)}else if(t["@"+i])n[i]=t["@"+i];else{if(null==l)continue;switch(l.constructor){case Number:n[i]={type:"number",step:.1};break;case String:n[i]={type:"string"};break;case Boolean:n[i]={type:"boolean"};break;default:if(l&&(l.constructor===Array||l.constructor.BYTES_PER_ELEMENT)){const t=null!=l[0]&&l[0].constructor===Number;switch(l.length){case 2:n[i]={type:t?"vec2":"Array",step:.1};break;case 3:n[i]={type:t?"vec3":"Array",step:.1};break;case 4:n[i]={type:t?"vec4":"Array",step:.1};break;default:n[i]={type:"Array"}}}}}}if(i)for(const t in i)delete n[i[t]];if(o.properties_order){const t={};for(const e in o.properties_order){const s=o.properties_order[e];n[s]?t[s]=n[s]:console.warn("property not found in instance:",s)}for(const e in n)t[e]||(t[e]=n[e]);n=t}return this.showProperties(t,n);function r(t,e){e=e||{};for(const s in t)e[s]=t[s];return e}}collectProperties(t){const e={};for(const s in t){if("_"==s[0]||"@"==s[0]||"jQuery"==s.substr(0,6))continue;const i=t[s];i&&i.constructor==Function&&!t.constructor["@"+s]||(e[s]=i)}return e}showProperties(t,e){for(const s in e){let i=s,o=e[s];if(!o)continue;if(o.constructor===String&&(o={type:o}),o.name&&(i=o.name),!o.callback){const e={instance:t,name:i,options:o};"function"!=o.type&&(o.callback=this.assignValue.bind(e))}if(!o.callback_update){const e={instance:t,name:i};o.callback_update=(()=>this.instance[this.name]).bind(e)}o.instance=t,o.varname=i;const n=o.widget||o.type||"string";this.on_addProperty&&this.on_addProperty(n,t,i,t[i],o),this.add(n,i,t[i],o)}if(t.constructor.widgets)for(const e in t.constructor.widgets){const s=t.constructor.widgets[e];this.add(s.widget,s.name,s.value,s)}t.onShowProperties&&t.onShowProperties(this),t.constructor.onShowProperties&&t.constructor.onShowProperties(t,this)}assignValue(t){var e,s;const i=this.instance,o=i[this.name];if(null==o||null==t||"enum"==this.options.type)i[this.name]=t;else if("number"==typeof o)i[this.name]=parseFloat(t.toString());else if("string"==typeof o)i[this.name]=t;else if(!(t&&t.length&&o&&o.length)||Object.getOwnPropertyDescriptor(i,this.name)&&(null===(e=Object.getOwnPropertyDescriptor(i,this.name))||void 0===e?void 0:e.set)||Object.getOwnPropertyDescriptor(Object.getPrototypeOf(i),this.name)&&(null===(s=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(i),this.name))||void 0===s?void 0:s.set))i[this.name]=t;else for(let e=0;e<t.length;++e)o[e]=t[e]}createWidget(t,e,s){var o,n;s=s||{},e=null==e?"":e;const r=document.createElement("DIV");r.className="widget "+(s.className||""),r.inspector=this,r.options=s,r.name=t,this.row_number+=this.widgets_per_row,this.row_number%2==0&&(r.className+=" even");const l=s.width||this.widgets_width;l&&(r.style.width=null===(o=i.LiteGUI.sizeToCSS(l))||void 0===o?void 0:o.toString(),r.style.width||(r.style.width="calc("+i.LiteGUI.sizeToCSS(l)+")"),r.style.minWidth="auto");const a=s.height||this.height;a&&(r.style.height=null===(n=i.LiteGUI.sizeToCSS(a))||void 0===n?void 0:n.toString(),r.style.height||(r.style.height="calc("+i.LiteGUI.sizeToCSS(a)+")"),r.style.minHeight="auto"),this.widgets.push(r),(s.widget_name||t)&&this.widgets_by_name.set(s.widget_name||t,r),1!=this.widgets_per_row&&(s.width||(r.style.width=(100/this.widgets_per_row).toFixed(2)+"%"),r.style.display="inline-block");let c="",d="";if(null!=t&&(this.name_width||s.name_width)&&!this.one_line){const t=i.LiteGUI.sizeToCSS(s.name_width||this.name_width);c="style='width: calc("+t+" - 0px); width: -webkit-calc("+t+" - 0px); width: -moz-calc("+t+" - 0px); '",d="style='width: calc( 100% - "+t+"); width: -webkit-calc(100% - "+t+"); width: -moz-calc( 100% - "+t+"); '"}s.name_width&&(c="style='width: "+i.LiteGUI.sizeToCSS(s.name_width)+" '"),s.content_width&&(d="style='width: "+i.LiteGUI.sizeToCSS(s.content_width)+" '");let h="",u="";const p=this.one_line?"":"<span class='filling'></span>";s.pretitle&&(u=s.pretitle);let g="wcontent ",m=t;if(s.title&&(m=s.title),null==t?g+=" full":h+=""===t?"<span class='wname' title='"+m+"' "+c+">"+u+"</span>":"<span class='wname' title='"+m+"' "+c+">"+u+t+p+"</span>",e.constructor===String||e.constructor===Number||e.constructor===Boolean)r.innerHTML=h+"<span class='info_content "+g+"' "+d+">"+e+"</span>";else{r.innerHTML=h+"<span class='info_content "+g+"' "+d+"></span>";const t=r.querySelector("span.info_content");t&&t.appendChild(e)}return r.content=r.querySelector("span.info_content"),r.remove=function(){this.parentNode&&this.parentNode.removeChild(this)},r}onWidgetChange(t,e,s,o,n,r){const l=t.section;let a;return o.skip_wchange||(l&&i.LiteGUI.trigger(l,"wbeforechange",s),i.LiteGUI.trigger(t,"wbeforechange",s)),this.values.set(e,s),o.callback&&(a=n?o.callback.apply(t,s):o.callback.call(t,s,r)),o.skip_wchange||(l&&i.LiteGUI.trigger(l,"wchange",s),i.LiteGUI.trigger(t,"wchange",s)),this.onchange&&this.onchange(e,s,t),a}add(t,e,s,i){if(!t)throw"Inspector: no type specified";1==arguments.length&&"object"==typeof t&&(t=(i=t).type,e=i.name,s=i.value);let o=r.widget_constructors[t.toLowerCase()];if(o){if("string"==typeof o&&(o=r.prototype[o]),o&&o.constructor===Function)return i&&i.constructor===Function&&(i={callback:i}),o.call(this,e,s,i)}else console.warn("LiteGUI.Inspector do not have a widget called",t)}getValue(t){return this.values.get(t)}applyOptions(t,e){t&&e&&(e.className&&(t.className+=" "+e.className),e.id&&(t.id=e.id),e.width&&(t.style.width=i.LiteGUI.sizeToCSS(e.width)),e.height&&(t.style.height=i.LiteGUI.sizeToCSS(e.height)))}addSeparator(){const t=document.createElement("DIV");return t.className="separator",this.append(t),t}addNull(t,e,s){return null}addString(t,e,s){s=this.processOptions(s),e=e||"";const o=this;this.values.set(t,e);let n="text";s.password&&(n="password");const r=s.focus?"autofocus":"",l=this.createWidget(t,"<span class='inputfield full "+(s.disabled?"disabled":"")+"'><input type='"+n+"' tabIndex='"+this.tab_index+"' "+r+" class='text string' value='"+e+"' "+(s.disabled?"disabled":"")+"/></span>",s),a=l.querySelector(".wcontent input");return s.placeHolder&&(null==a||a.setAttribute("placeHolder",s.placeHolder)),"right"==s.align&&(a.style.direction="rtl"),a.addEventListener(s.immediate?"keyup":"change",(e=>{const i=this.onWidgetChange.call(o,l,t,e.target.value,s,null,null);void 0!==i&&(a.value=i)})),s.callback_enter&&a.addEventListener("keydown",(e=>{if(13==e.keyCode){this.onWidgetChange.call(o,l,t,e.target.value,s,null,null);s.callback_enter(),e.preventDefault()}})),this.tab_index+=1,l.setIcon=function(t){t?(a.style.background="transparent url('"+t+"') no-repeat left 4px center",a.style.paddingLeft="1.7em"):(a.style.background="",a.style.paddingLeft="")},s.icon&&l.setIcon(s.icon),l.setValue=function(t,e){void 0!==t&&t!==a.value&&(a.value=t,e||i.LiteGUI.trigger(a,"change"))},l.getValue=function(){return a.value},l.focus=function(){this.querySelector("input").focus()},l.disable=function(){a.disabled=!0},l.enable=function(){a.disabled=!1},this.append(l,s),this.processElement(l,s),l}addStringButton(t,e,s){s=this.processOptions(s),void 0===e&&(e="");const o=this;this.values.set(t,e);const n=this.createWidget(t,"<span class='inputfield button'><input type='text' tabIndex='"+this.tab_index+"' class='text string' value='' "+(s.disabled?"disabled":"")+"/></span><button class='micro'>"+(s.button||"...")+"</button>",s),r=n.querySelector(".wcontent input");r.value=e,r.addEventListener("change",(e=>{const i=this.onWidgetChange.call(o,n,t,e.target.value,s,null,null);void 0!==i&&(r.value=i)})),s.disabled&&r.setAttribute("disabled","disabled"),n.setIcon=function(t){t?(r.style.background="transparent url('"+t+"') no-repeat left 4px center",r.style.paddingLeft="1.7em"):(r.style.background="",r.style.paddingLeft="")},s.icon&&n.setIcon(s.icon);const l=n.querySelector(".wcontent button");if(l.addEventListener("click",(t=>{s.callback_button&&s.callback_button.call(n,r.value,t)})),s.button_width){l.style.width=i.LiteGUI.sizeToCSS(s.button_width);n.querySelector(".inputfield").style.width="calc( 100% - "+l.style.width+" - 6px)"}return this.tab_index+=1,this.append(n,s),n.setValue=function(t,e){r.value=t,e||i.LiteGUI.trigger(r,"change")},n.disable=function(){r.disabled=!0,l.disabled=!0},n.enable=function(){r.disabled=!1,l.disabled=!1},n.getValue=function(){return r.value},n.focus=function(){i.LiteGUI.focus(r)},this.processElement(n,s),n}addTextarea(t,e,s){s=this.processOptions(s),e=e||"";const o=this;this.values.set(t,e);const n=this.createWidget(t,"<span class='inputfield textarea "+(s.disabled?"disabled":"")+"'><textarea tabIndex='"+this.tab_index+"' "+(s.disabled?"disabled":"")+"></textarea></span>",s);this.tab_index++;const r=n.querySelector(".wcontent textarea");return r.value=e,r.addEventListener(s.immediate?"keyup":"change",(e=>{this.onWidgetChange.call(o,n,t,e.target.value,s,!1,e)})),s.callback_keydown&&r.addEventListener("keydown",s.callback_keydown),s.height&&(r.style.height="calc( "+i.LiteGUI.sizeToCSS(s.height)+" - 5px )"),this.append(n,s),n.setValue=function(t,s){void 0!==t&&t!=r.value&&(e=t,r.value=t,s||i.LiteGUI.trigger(r,"change"))},n.getValue=function(t){return r.value},n.focus=function(){i.LiteGUI.focus(r)},n.disable=function(){r.disabled=!0},n.enable=function(){r.disabled=!1},this.processElement(n,s),n}addNumber(t,e,s){s=this.processOptions(s),e=e||0;const o=this;this.values.set(t,e);const n=this.createWidget(t,"",s);let r;this.append(n,s),s.extraclass="full",s.tab_index=this.tab_index,s.full=!0,s.precision=void 0!==s.precision?s.precision:2,s.step=void 0===s.step?0==s.precision?1:.1:s.step,this.tab_index++,r=new i.LiteGUI.Dragger(e,s),r.root.style.width="calc( 100% - 1px )",n.querySelector(".wcontent").appendChild(r.root);r.root.addEventListener("start_dragging",function(t){t.callback_before&&t.callback_before.call(n)}.bind(void 0,s)),n.dragger=r,s.disabled&&r.input.setAttribute("disabled","disabled");const l=n.querySelector("input");return l.addEventListener("change",(e=>{const l=e.target;if(i.LiteGUI.trigger(n,"wbeforechange",e.target.value),this.values.set(t,e.target.value),s.callback&&r.dragging){const t=s.callback.call(n,parseFloat(e.target.value));"number"==typeof t&&(l.value=t)}else if((s.callback||s.finalCallback)&&!r.dragging){let t;s.finalCallback?t=s.finalCallback.call(n,parseFloat(e.target.value)):s.callback&&(t=s.callback.call(n,parseFloat(e.target.value))),"number"==typeof t&&(l.value=t)}i.LiteGUI.trigger(n,"wchange",e.target.value),o.onchange&&o.onchange(t,e.target.value,n)})),r.root.addEventListener("stop_dragging",(t=>{i.LiteGUI.trigger(l,"change")})),n.setValue=function(t,e){void 0!==t&&(t=parseFloat(t),s.precision&&(t=t.toFixed(s.precision)),t+=s.units||"",l.value!=t&&(l.value=t,e||i.LiteGUI.trigger(l,"change")))},n.setRange=function(t,e){r.setRange(t,e)},n.getValue=function(){return parseFloat(l.value)},n.focus=function(){i.LiteGUI.focus(l)},n.disable=function(){l.disabled=!0},n.enable=function(){l.disabled=!1},this.processElement(n,s),n}addVector2(t,e,s){(s=this.processOptions(s)).step||(s.step=.1),e=e||[0,0];const o=this;this.values.set(t,e);const n=this.createWidget(t,"",s);s.step=s.step||.1,s.tab_index=this.tab_index,s.full=!0,this.tab_index++;const r=n.draggers=[],l=function(t){s.callback_before&&s.callback_before(t)};for(let t=0;t<2;t++){const o=new i.LiteGUI.Dragger(e[t],s);o.root.style.marginLeft=String(0),o.root.style.width="calc( 25% - 1px )",n.querySelector(".wcontent").appendChild(o.root),s.tab_index=this.tab_index,this.tab_index++,o.root.addEventListener("start_dragging",l),r.push(o)}const a=n.querySelectorAll("input"),c=e=>{let r=[];const l=a;for(let t=0;t<l.length;t++)r.push(parseFloat(l[t].value));i.LiteGUI.trigger(n,"wbeforechange",[r]),this.values.set(t,r);const c=e.target.dragger;if(s.callback&&c.dragging){const t=s.callback.call(n,r);if("object"==typeof t&&t.length>=2){for(let e=0;e<l.length;e++)l[e].value=t[e];r=t}}else if((s.callback||s.finalCallback)&&!c.dragging){let t;if(s.finalCallback?t=s.finalCallback.call(n,r):s.callback&&(t=s.callback.call(n,r)),"object"==typeof t&&t.length>=2){for(let e=0;e<l.length;e++)l[e].value=t[e];r=t}}i.LiteGUI.trigger(n,"wchange",[r]),o.onchange&&o.onchange(t,r,n)},d=function(t,e){i.LiteGUI.trigger(t,"change")};for(let t=0;t<a.length;++t){const e=r[t],s=a[t];s.dragger=e,s.addEventListener("change",c),e.root.addEventListener("stop_dragging",d.bind(void 0,s))}return this.append(n,s),n.setValue=function(t,e){if(t)for(let s=0;s<r.length;s++)r[s].setValue(t[s],e||s<r.length-1)},n.setRange=function(t,e){for(const s in r)r[s].setRange(t,e)},this.processElement(n,s),n}addVector3(t,e,s){(s=this.processOptions(s)).step||(s.step=.1),e=e||[0,0,0];const o=this;this.values.set(t,e);const n=this.createWidget(t,"",s);s.step=s.step||.1,s.tab_index=this.tab_index,s.full=!0,this.tab_index++;const r=n.draggers=[],l=function(t){s.callback_before&&s.callback_before(t)};for(let t=0;t<3;t++){const o=new i.LiteGUI.Dragger(e[t],s);o.root.style.marginLeft=String(0),o.root.style.width="calc( 25% - 1px )",n.querySelector(".wcontent").appendChild(o.root),s.tab_index=this.tab_index,this.tab_index++,o.root.addEventListener("start_dragging",l),r.push(o)}const a=n.querySelectorAll("input"),c=e=>{let r=[];const l=a;for(let t=0;t<l.length;t++)r.push(parseFloat(l[t].value));i.LiteGUI.trigger(n,"wbeforechange",[r]),this.values.set(t,r);const c=e.target.dragger;if(s.callback&&c.dragging){const t=s.callback.call(n,r);if("object"==typeof t&&t.length>=2){for(let e=0;e<l.length;e++)l[e].value=t[e];r=t}}else if((s.callback||s.finalCallback)&&!c.dragging){let t;if(s.finalCallback?t=s.finalCallback.call(n,r):s.callback&&(t=s.callback.call(n,r)),"object"==typeof t&&t.length>=2){for(let e=0;e<l.length;e++)l[e].value=t[e];r=t}}i.LiteGUI.trigger(n,"wchange",[r]),o.onchange&&o.onchange(t,r,n)},d=function(t,e){i.LiteGUI.trigger(t,"change")};for(let t=0;t<a.length;++t){const e=r[t],s=a[t];s.dragger=e,s.addEventListener("change",c),e.root.addEventListener("stop_dragging",d.bind(void 0,s))}return this.append(n,s),n.setValue=function(t,e){if(t)for(let s=0;s<r.length;s++)r[s].setValue(t[s],e||s<r.length-1)},n.setRange=function(t,e){for(const s in r)r[s].setRange(t,e)},this.processElement(n,s),n}addVector4(t,e,s){(s=this.processOptions(s)).step||(s.step=.1),e=e||[0,0,0,0];const o=this;this.values.set(t,e);const n=this.createWidget(t,"",s);s.step=s.step||.1,s.tab_index=this.tab_index,s.full=!0,this.tab_index++;const r=n.draggers=[],l=function(t){s.callback_before&&s.callback_before(t)};for(let t=0;t<4;t++){const o=new i.LiteGUI.Dragger(e[t],s);o.root.style.marginLeft=String(0),o.root.style.width="calc( 25% - 1px )",n.querySelector(".wcontent").appendChild(o.root),s.tab_index=this.tab_index,this.tab_index++,o.root.addEventListener("start_dragging",l),r.push(o)}const a=n.querySelectorAll("input"),c=e=>{let r=[];const l=a;for(let t=0;t<l.length;t++)r.push(parseFloat(l[t].value));i.LiteGUI.trigger(n,"wbeforechange",[r]),this.values.set(t,r);const c=e.target.dragger;if(s.callback&&c.dragging){const t=s.callback.call(n,r);if("object"==typeof t&&t.length>=4){for(let e=0;e<l.length;e++)l[e].value=t[e];r=t}}else if((s.callback||s.finalCallback)&&!c.dragging){let t;if(s.finalCallback?t=s.finalCallback.call(n,r):s.callback&&(t=s.callback.call(n,r)),"object"==typeof t&&t.length>=4){for(let e=0;e<l.length;e++)l[e].value=t[e];r=t}}i.LiteGUI.trigger(n,"wchange",[r]),o.onchange&&o.onchange(t,r,n)},d=function(t,e){i.LiteGUI.trigger(t,"change")};for(let t=0;t<a.length;++t){const e=r[t],s=a[t];s.dragger=e,s.addEventListener("change",c),e.root.addEventListener("stop_dragging",d.bind(void 0,s))}return this.append(n,s),n.setValue=function(t,e){if(t)for(let s=0;s<r.length;s++)r[s].setValue(t[s],e||s<r.length-1)},n.setRange=function(t,e){for(const s in r)r[s].setRange(t,e)},this.processElement(n,s),n}addPad(t,e,s){(s=this.processOptions(s)).step||(s.step=.1),e=e||[0,0];const o=this;this.values.set(t,e);const n=this.createWidget(t,"",s);s.step=s.step||.1,s.tab_index=this.tab_index,s.full=!0,this.tab_index++;const r=s.minx||s.min||0,l=s.miny||s.min||0,a=s.maxx||s.max||1,c=s.maxy||s.max||1,d=n.querySelector(".wcontent"),h=document.createElement("div");h.className="litepad",d.appendChild(h),h.style.width="100%",h.style.height="100px",s.background&&(h.style.backgroundImage="url('"+s.background+"')",h.style.backgroundSize="100%",h.style.backgroundRepeat="no-repeat");const u=document.createElement("div");u.className="litepad-handler",h.appendChild(u),s.tab_index=this.tab_index,this.tab_index++;let p=!1;return h._onMouseEvent=function(e){const d=h.getBoundingClientRect();if(e.mousex=e.pageX-d.left,e.mousey=e.pageY-d.top,e.preventDefault(),e.stopPropagation(),"mousedown"==e.type)document.body.addEventListener("mousemove",h._onMouseEvent),document.body.addEventListener("mouseup",h._onMouseEvent),p=!0;else if("mousemove"==e.type){let h=e.mousex/d.width,u=e.mousey/d.height;h=h*(a-r)+r,u=u*(c-l)+r;const p=[h,u];if(i.LiteGUI.trigger(n,"wbeforechange",[p]),n.setValue(p),s.callback){const t=s.callback.call(n,p);t&&t.length>=2&&n.setValue(t)}i.LiteGUI.trigger(n,"wchange",[p]),o.onchange&&o.onchange(t,p,n)}else"mouseup"==e.type&&(p=!1,document.body.removeEventListener("mousemove",h._onMouseEvent),document.body.removeEventListener("mouseup",h._onMouseEvent));return!0},h.addEventListener("mousedown",h._onMouseEvent),n.setValue=function(t,e){if(void 0===t)return;const s=h.getBoundingClientRect();let i=(t[0]-r)/(a-r),o=(t[1]-l)/(c-l);i=Math.max(0,Math.min(i,1)),o=Math.max(0,Math.min(o,1));const n=(s.width-10)/s.width*100,d=(s.height-10)/s.height*100;u.style.left=(i*n).toFixed(1)+"%",u.style.top=(o*d).toFixed(1)+"%"},this.append(n,s),n.setValue(e),this.processElement(n,s),n}addInfo(t,e,s){s=this.processOptions(s),e=null==e?"":e;let o=null;null!=t?o=this.createWidget(t,e,s):(o=document.createElement("div"),s.className&&(o.className=s.className),void 0!==e.nodeName?(o.innerHTML="<span class='winfo'></span>",o.childNodes[0].appendChild(e)):o.innerHTML="<span class='winfo'>"+e+"</span>");const n=o.querySelector(".winfo")||o.querySelector(".wcontent");s.callback&&o.addEventListener("click",s.callback.bind(o)),o.setValue=function(t){void 0!==t&&n&&(n.innerHTML=t)};let r=o.querySelector("span.info_content");return r||(r=o.querySelector(".winfo")),s.width&&(o.style.width=i.LiteGUI.sizeToCSS(s.width),o.style.display="inline-block",t||(n.style.margin="2px")),s.height&&(r.style.height=i.LiteGUI.sizeToCSS(s.height),r.style.overflow="auto"),o.scrollToBottom=function(){r.scrollTop=r.offsetTop},o.add=function(t){r.appendChild(t)},this.append(o,s),this.processElement(o,s),o}addSlider(t,e,s){void 0===(s=this.processOptions(s)).min&&(s.min=0),void 0===s.max&&(s.max=1),void 0===s.step&&(s.step=.01);const o=this;null==e&&(e=0),this.values.set(t,e);const n=this.createWidget(t,"<span class='inputfield full'>\n<input tabIndex='"+this.tab_index+"' type='text' class='slider-text fixed liteslider-value' value='' /><span class='slider-container'></span></span>",s),r=n.querySelector(".slider-container"),l=new i.LiteGUI.Slider(e,s);r.appendChild(l.root);const a=n.querySelector(".slider-text");return a.value=e,a.addEventListener("change",(i=>{const r=parseFloat(a.value);e=r,l.setValue(r),this.onWidgetChange.call(o,n,t,r,s,null,null)})),l.onChange=e=>{a.value=e,this.onWidgetChange.call(o,n,t,e,s,null,null)},this.append(n,s),n.setValue=function(t,s){void 0!==t&&(e=t,l.setValue(t,s))},n.getValue=function(){return e},this.processElement(n,s),n}addCheckbox(t,e,s){s=this.processOptions(s),e=Boolean(e);const o=this;this.values.set(t,e);const n=s.label_on||s.label||"on",r=s.label_off||s.label||"off",l=e?n:r,a=this.createWidget(t,"<span class='inputfield'><span tabIndex='"+this.tab_index+"' class='fixed flag checkbox "+(e?"on":"off")+"'>"+l+"</span></span>",s);this.tab_index++;const c=a.querySelector(".wcontent .checkbox");return c.addEventListener("keypress",(t=>{32==t.keyCode&&i.LiteGUI.trigger(c,"click")})),a.addEventListener("click",(()=>{e=!e,a.querySelector("span.flag").innerHTML=e?n:r,e?c.classList.add("on"):c.classList.remove("on"),this.onWidgetChange.call(o,a,t,e,s,null,null)})),a.getValue=function(){return e},a.setValue=function(s,o){void 0!==s&&(e=s,this.values.get(t)==s||o||i.LiteGUI.trigger(c,"click"))},this.append(a,s),this.processElement(a,s),a}addFlags(t,e,s){const i={};for(const e in t)i[e]=t[e];if(e)for(const t in e)void 0===i[t]&&(i[t]=!!e[t]);for(const e in i){const o={};for(const t in s)o[t]=s[t];o.callback=function(e){return function(s){t[e]=s}}(e),this.addCheckbox(e,i[e],o)}}addCombo(t,e,s){s=this.processOptions(s);const i=this;this.values.set(t,e),this.tab_index++;const o=this.createWidget(t,"<span class='inputfield full inputcombo "+(s.disabled?"disabled":"")+"'></span>",s);o.options=s;let n=s.values||[];n.constructor===Function&&(n=s.values());const r="<select tabIndex='"+this.tab_index+"' "+(s.disabled?"disabled":"")+" class='"+(s.disabled?"disabled":"")+"'></select>";o.querySelector("span.inputcombo").innerHTML=r,a(n);let l=!1;function a(t,s){t||(t=[]),n=t,s&&(e=s);let i="",r=0;for(const t in n){const s=n[t],o=n.constructor===Array?r:t;let l=n.constructor===Array?s:t;s&&s.title&&(l=s.title),i+="<option value='"+o+"' "+(s==e?" selected":"")+" data-index='"+o+"'>"+l+"</option>",r++}o.querySelector("select").innerHTML=i}return o.querySelector(".wcontent select").addEventListener("change",(r=>{const a=r.target.value;e=n[a],l||this.onWidgetChange.call(i,o,t,e,s,null,null)})),o.getValue=function(){return e},o.setValue=function(t,s){if(void 0===t)return;e=t;const i=o.querySelector("select"),r=i.querySelectorAll("option");let a=-1;if(n.constructor===Array)a=n.indexOf(t);else{let e=0;for(const s in n){if(n[e]==t){a=e;break}e++}}if(-1!=a){l=s;for(const t in r){const e=r[t];e&&e.dataset&&(parseFloat(e.dataset.index)==a?(e.setAttribute("selected",!0),i.selectedIndex=a):e.removeAttribute("selected"))}l=!1}},o.setOptionValues=a,this.append(o,s),this.processElement(o,s),o}addComboButtons(t,e,s){s=this.processOptions(s),e=e||"";const o=this;this.values.set(t,e);let n="";if(s.values)for(const t in s.values)n+="<button class='wcombobutton "+(e==s.values[t]?"selected":"")+"' data-name='options.values[i]'>"+s.values[t]+"</button>";const r=this.createWidget(t,n,s),l=r.querySelectorAll(".wcontent button");return i.LiteGUI.bind(l,"click",(e=>{const i=e.target,n=e.target.innerHTML;o.values.set(t,n);const l=r.querySelectorAll(".selected");for(let t=0;t<l.length;++t)l[t].classList.remove("selected");i.classList.add("selected"),this.onWidgetChange.call(o,r,t,n,s,null,null)})),this.append(r,s),this.processElement(r,s),r}addTags(t,e,s){s=this.processOptions(s),e=e||[];const o=this;this.values.set(t,e);let n="<select>";if(s.values)for(const t in s.values)n+="<option>"+s.values[t]+"</option>";n+="</select><div class='wtagscontainer inputfield'></div>";const r=this.createWidget(t,"<span class='inputfield full'>"+n+"</span>",s);r.tags={};for(const t in s.value)l(s.value[t]);function l(e){if(r.tags[e])return;i.LiteGUI.trigger(r,"wbeforechange",r.tags),r.tags[e]=!0;const n=document.createElement("div");n.data=e,n.className="wtag",n.innerHTML=e+"<span class='close'>X</span>",n.querySelector(".close").addEventListener("click",(e=>{const l=n.data;delete r.tags[l],i.LiteGUI.remove(n),i.LiteGUI.trigger(r,"wremoved",l),o.onWidgetChange.call(o,r,t,r.tags,s,null,null)})),r.querySelector(".wtagscontainer").appendChild(n),o.values.set(t,r.tags),s.callback&&s.callback.call(r,r.tags),i.LiteGUI.trigger(r,"wchange",r.tags),i.LiteGUI.trigger(r,"wadded",e),o.onchange&&o.onchange(t,r.tags,r)}return r.querySelector(".wcontent select").addEventListener("change",(t=>{l(t.target.value)})),this.append(r,s),this.processElement(r,s),r}addList(t,e,s){s=this.processOptions(s);const o=this;let n="";s.height&&(n="style='height: 100%; overflow: auto;'");const r="<ul class='lite-list' "+n+" tabIndex='"+this.tab_index+"'><ul>";this.tab_index++;const l=this.createWidget(t,"<span class='inputfield full "+(s.disabled?"disabled":"")+"' style='height: 100%;'>"+r+"</span>",s);l.querySelector(".info_content").style.height="100%";l.querySelector(".lite-list");const a=l.querySelector(".inputfield");a.style.height="100%",a.style.paddingBottom="0.2em";const c=l.querySelectorAll("ul"),d=function(t){const n=l.querySelector("li.selected");if(n){if(13==t.keyCode){if(!n)return;const t=e[n.dataset.pos];s.callback_dblclick&&s.callback_dblclick.call(o,t)}else if(40==t.keyCode){const t=n.nextSibling;t&&i.LiteGUI.trigger(t,"click"),n.scrollIntoViewIfNeeded&&n.scrollIntoViewIfNeeded({block:"end",behavior:"smooth"})}else{if(38!=t.keyCode)return;{const t=n.previousSibling;t&&i.LiteGUI.trigger(t,"click"),n.scrollIntoViewIfNeeded&&n.scrollIntoViewIfNeeded({block:"end",behavior:"smooth"})}}return t.preventDefault(),t.stopPropagation(),!0}},h=n=>{const r=n.target;if(s.multiselection)r.classList.toggle("selected");else{const t=l.querySelectorAll("li");for(let e=0;e<t.length;++e)t[e].classList.remove("selected");r.classList.add("selected")}const a=e[r.dataset.pos];this.onWidgetChange.call(o,l,t,a,s,null,null),i.LiteGUI.trigger(l,"wadded",a)},u=function(t){const i=e[t.target.dataset.pos];s.callback_dblclick&&s.callback_dblclick.call(o,i)},p=function(){document.addEventListener("keydown",d,!0)},g=function(){document.removeEventListener("keydown",d,!0)};for(let t=0;t<c.length;++t){const e=c[t];e.addEventListener("focus",p),e.addEventListener("blur",g)}function m(t,e,o){const n=o;let r=o;e=Boolean(e);let l=null,a="";null!=t&&(t.constructor===String||t.constructor===Number||t.constructor===Boolean?r=String(t):t&&(r=t.content||t.title||t.name||o,l=t.style,t.icon&&(a="<img src='"+t.icon+"' class='icon' /> "),t.selected&&(e=!0)));let c=r;c=c.replace(/<(?:.|\n)*?>/gm,"");const d=document.createElement("li");return d.classList.add("item-"+i.LiteGUI.safeName(n)),e&&d.classList.add("selected"),d.dataset.name=c,d.dataset.pos=n,d.value=t,l&&d.setAttribute("style",l),d.innerHTML=a+r,d.addEventListener("click",h),s.callback_dblclick&&d.addEventListener("dblclick",u),d}return l.updateItems=function(t,o){o=o||s.selected,e=t;const n=this.querySelector("ul");if(n.innerHTML="",e)for(const t in e){const s=m(e[t],o,t);n.appendChild(s)}const r=n.querySelectorAll("li");i.LiteGUI.bind(r,"click",h)},l.addItem=function(t,s,i){if(e.constructor!==Array)return void console.error("cannot add item to list of object, only array");e.push(t);const o=this.querySelector("ul"),n=m(t,s);o.appendChild(n)},l.removeItem=function(t){const e=l.querySelectorAll(".wcontent li");for(let s=0;s<e.length;s++)e[s].dataset.name==t&&i.LiteGUI.remove(e[s])},l.updateItems(e,s.selected),this.append(l,s),l.getSelected=function(){const t=[],e=this.querySelectorAll("ul li.selected");for(let s=0;s<e.length;++s)t.push(e[s].dataset.name);return t},l.getByIndex=function(t){return this.querySelectorAll("ul li")[t]},l.getIndex=l.getByIndex,l.selectIndex=function(t,e){const s=this.querySelectorAll("ul li");for(let i=0;i<s.length;++i){const o=s[i];i==t?o.classList.add("selected"):e||o.classList.remove("selected")}return s[t]},l.deselectIndex=function(t){const e=this.querySelectorAll("ul li")[t];return e&&e.classList.remove("selected"),e},l.scrollToIndex=function(t){const e=this.querySelectorAll("ul li")[t];e&&(this.scrollTop=e.offsetTop)},l.selectAll=function(){const t=this.querySelectorAll("ul li");for(let e=0;e<t.length;++e){const s=t[e];s.classList.contains("selected")||i.LiteGUI.trigger(s,"click")}},l.deselectAll=function(){const t=this.querySelectorAll("ul li");for(let e=0;e<t.length;++e){const s=t[e];s.classList.contains("selected")&&i.LiteGUI.trigger(s,"click")}},l.setValue=function(t){void 0!==t&&this.updateItems(t)},l.getNumberOfItems=function(){return this.querySelectorAll("ul li").length},l.filter=function(t,e){const s=this.querySelectorAll("ul li");let i=!1;if(t&&t.constructor===String){const s=t;e&&s.toLowerCase(),i=!0,t=function(t){return-1!=(e?t:t.toLowerCase()).indexOf(s)}}for(let e=0;e<s.length;++e){const o=s[e];if(!t){o.style.display="";continue}let n=o.value;i&&null!=n&&n.constructor!==String&&(n=o.innerHTML),t(n,o,o.classList.contains("selected"))?o.style.display="":o.style.display="none"}},l.selectByFilter=function(t){const e=this.querySelectorAll("ul li");for(let s=0;s<e.length;++s){const i=e[s],o=t(i.value,i,i.classList.contains("selected"));!0===o?i.classList.add("selected"):!1===o&&i.classList.remove("selected")}},s.height&&(l.scrollTop=0),this.processElement(l,s),l}addButton(t,e,s){s=this.processOptions(s),e=s.button_text||e||"";const o=this;let n="";null===t&&(n="single"),s.micro&&(n+=" micro");let r="";s.disabled&&(r="disabled='disabled'");const l=s.title||"",a=this.createWidget(t,"<button tabIndex='"+this.tab_index+"' "+r+"></button>",s);this.tab_index++;const c=a.querySelector("button");return c.setAttribute("title",l),c.className="litebutton "+n,c.innerHTML=e,c.addEventListener("click",(n=>{this.onWidgetChange.call(o,a,t,c.innerHTML,s,!1,n),i.LiteGUI.trigger(c,"wclick",e)})),this.append(a,s),a.wclick=function(t){s.disabled||i.LiteGUI.bind(this,"wclick",t)},a.setValue=function(t){void 0!==t&&(c.innerHTML=t)},a.disable=function(){c.disabled=!0},a.enable=function(){c.disabled=!1},this.processElement(a,s),a}addButtons(t,e,s){s=this.processOptions(s);const o=this;let n="";const r="calc( "+(100/(e=e||"").length).toFixed(3)+"% - 4px )",l="width:"+r+"; width: -moz-"+r+"; width: -webkit-"+r+"; margin: 2px;";if(e&&"object"==typeof e)for(const t in e){let i="";s.title&&s.title.constructor===Array&&(i=s.title[t]||""),n+="<button class='litebutton' title='"+i+"' tabIndex='"+this.tab_index+"' style='"+l+"'>"+e[t]+"</button>",this.tab_index++}const a=this.createWidget(t,n,s),c=a.querySelectorAll("button"),d=(e,n)=>{this.onWidgetChange.call(o,a,t,e.innerHTML,s,null,n),i.LiteGUI.trigger(a,"wclick",e.innerHTML)};for(let t=0;t<c.length;++t){const e=c[t];e.addEventListener("click",d.bind(void 0,e))}return this.append(a,s),this.processElement(a,s),a}addIcon(t,e,s){s=this.processOptions(s),e=e||"";const o=this,n=s.image,r=s.width||s.size||20,l=s.height||s.size||20,a=this.createWidget(t,"<span class='icon' "+(s.title?"title='"+s.title+"'":"")+" tabIndex='"+this.tab_index+"'></span>",s);this.tab_index++;const c=a.querySelector("span.wcontent"),d=a.querySelector("span.icon");let h=s.x||0;s.index&&(h=s.index*-r);const u=e?l:0;return a.style.minWidth=a.style.width=r+"px",a.style.margin="0 2px",a.style.padding="0",c.style.margin="0",c.style.padding="0",d.style.display="inline-block",d.style.cursor="pointer",d.style.width=r+"px",d.style.height=l+"px",d.style.backgroundImage="url('"+n+"')",d.style.backgroundPosition=h+"px "+u+"px",d.addEventListener("mousedown",(n=>{n.preventDefault(),e=!e;const r=this.onWidgetChange.call(o,a,t,e,s,null,null);i.LiteGUI.trigger(a,"wclick",e),void 0!==r&&(e=r);const c=e?l:0;d.style.backgroundPosition=h+"px "+c+"px",!1===s.toggle&&setTimeout((()=>{d.style.backgroundPosition=h+"px 0px",e=!1}),200)})),this.append(a,s),a.setValue=(i,n)=>{if(void 0===i)return;const r=(e=i)?l:0;d.style.backgroundPosition=h+"px "+r+"px",n||this.onWidgetChange.call(o,a,t,e,s,null,null)},a.getValue=function(){return e},this.processElement(a,s),a}addColor(t,e,s){s=this.processOptions(s),e=e||[0,0,0];const o=this;this.values.set(t,e);let l="<input tabIndex='"+this.tab_index+"' id='colorpicker-"+t+"' class='color' value='"+e[0]+","+e[1]+","+e[2]+"' "+(s.disabled?"disabled":"")+"/>";this.tab_index++,s.show_rgb&&(l+="<span class='rgb-color'>"+r.parseColor(e)+"</span>");const a=this.createWidget(t,l,s);this.append(a,s);const c=a.querySelector("input.color");window.jscolor=n.jscolor;let d=null;if(window.jscolor){d=new n.jscolor.color(c),d.pickerFaceColor="#333",d.pickerBorderColor="black",d.pickerInsetColor="#222";let r=1;if(s.disabled&&(d.pickerOnfocus=!1),e.constructor!==String&&e.length&&e.length>2){const t=1;d.fromRGB(e[0]*t,e[1]*t,e[2]*t),r=t}if(c.addEventListener("change",(t=>{const e=a.querySelector(".rgb-color");e&&(e.innerHTML=i.LiteGUI.Inspector.parseColor(d.rgb))})),c.addEventListener("focusin",(t=>{c.focused=!0})),c.addEventListener("focusout",(t=>{c.focused=!1;const e=[d.rgb[0]*r,d.rgb[1]*r,d.rgb[2]*r];s.finalCallback?s.finalCallback.call(a,e.concat(),"#"+d.toString(),d):s.callback&&s.callback.call(a,e.concat(),"#"+d.toString(),d)})),s.add_dragger){d.onImmediateChange=e=>{const n=[d.rgb[0]*r,d.rgb[1]*r,d.rgb[2]*r],l=[n.concat(),d.toString()];i.LiteGUI.trigger(a,"wbeforechange",l),this.values.set(t,n),s.callback&&e?s.callback.call(a,n.concat(),"#"+d.toString(),d):!s.callback&&!s.finalCallback||e||(s.finalCallback?s.finalCallback.call(a,n.concat(),"#"+d.toString(),d):s.callback&&s.callback.call(a,n.concat(),"#"+d.toString(),d)),i.LiteGUI.trigger(a,"wchange",l),o.onchange&&o.onchange(t,n.concat(),a)},s.step=s.step||.01,s.dragger_class="nano";const e=new i.LiteGUI.Dragger(1,s);a.querySelector(".wcontent").appendChild(e.root);const n=function(t){d.onImmediateChange&&d.onImmediateChange(t)},l=function(){c.focused||n(!1)};e.root.addEventListener("stop_dragging",l),e.input.addEventListener("change",(t=>{const s=parseFloat(e.input.value);r=s,n(e.dragging)})),a.setValue=function(t,s){d.fromRGB(t[0],t[1],t[2]),s||i.LiteGUI.trigger(e.input,"change")}}else d.onImmediateChange=()=>{const e=[d.rgb[0]*r,d.rgb[1]*r,d.rgb[2]*r],n=[e.concat(),d.toString()];i.LiteGUI.trigger(a,"wbeforechange",n),this.values.set(t,e),s.callback&&s.callback.call(a,e.concat(),"#"+d.toString(),d),i.LiteGUI.trigger(a,"wchange",n),o.onchange&&o.onchange(t,e.concat(),a)},a.setValue=function(t){d.fromRGB(t[0],t[1],t[2])};a.getValue=function(){return e}}else c.addEventListener("change",(t=>{const e=a.querySelector(".rgb-color");e&&(e.innerHTML=i.LiteGUI.Inspector.parseColor(d.rgb))}));return this.processElement(a,s),a}addColorPosition(t,e,s){s=this.processOptions(s),e=e||[0,0,0];const o=this;this.values.set(t,e);let l="<input tabIndex='"+this.tab_index+"' id='colorpicker-"+t+"' class='color' value='"+e[0]+","+e[1]+","+e[2]+"' "+(s.disabled?"disabled":"")+"/>";this.tab_index++,s.show_rgb&&(l+="<span class='rgb-color'>"+r.parseColor(e)+"</span>");const a=this.createWidget(t,l,s);this.append(a,s);const c=a.querySelector("input.color");let d=null;if(window.jscolor){if(d=new n.jscolor.color(c),d.pickerFaceColor="#333",d.pickerBorderColor="black",d.pickerInsetColor="#222",d.position=s.position||0,s.disabled&&(d.pickerOnfocus=!1),e.constructor!==String&&e.length&&e.length>2&&d.fromRGB(e[0],e[1],e[2]),c.addEventListener("change",(t=>{const e=a.querySelector(".rgb-color");e&&(e.innerHTML=i.LiteGUI.Inspector.parseColor(d.rgb))})),c.addEventListener("focusin",(t=>{c.focused=!0})),c.addEventListener("focusout",(t=>{c.focused=!1,s.finalCallback?s.finalCallback.call(a,d.position,"#"+d.toString(),d):s.callback&&s.callback.call(a,d.position,"#"+d.toString(),d)})),s.add_dragger){d.onImmediateChange=function(e){const n=[d.rgb[0],d.rgb[1],d.rgb[2]],r=[n.concat(),d.toString()];i.LiteGUI.trigger(a,"wbeforechange",r),this.values.set(t,n),s.callback&&e?s.callback.call(a,d.position,"#"+d.toString(),d):!s.callback&&!s.finalCallback||e||(s.finalCallback?s.finalCallback.call(a,d.position,"#"+d.toString(),d):s.callback&&s.callback.call(a,d.position,"#"+d.toString(),d)),i.LiteGUI.trigger(a,"wchange",r),o.onchange&&o.onchange(t,n.concat(),a)},s.step=s.step||.01,s.dragger_class="nano";const e=new i.LiteGUI.Dragger(d.position,s);a.querySelector(".wcontent").appendChild(e.root);const n=function(t){d.onImmediateChange&&d.onImmediateChange(t)},r=function(){c.focused||n(!1)};e.root.addEventListener("stop_dragging",r),e.input.addEventListener("change",(t=>{const s=parseFloat(e.input.value);d.position=s,n(e.dragging)})),a.setValue=function(t,s){d.fromRGB(t[0],t[1],t[2]),s||i.LiteGUI.trigger(e.input,"change")}}else d.onImmediateChange=()=>{const e=[d.rgb[0]*d.rgb_intensity,d.rgb[1]*d.rgb_intensity,d.rgb[2]*d.rgb_intensity],n=[e.concat(),d.toString()];i.LiteGUI.trigger(a,"wbeforechange",n),this.values.set(t,e),s.callback&&s.callback.call(a,e.concat(),"#"+d.toString(),d),i.LiteGUI.trigger(a,"wchange",n),o.onchange&&o.onchange(t,e.concat(),a)},a.setValue=function(t){d.fromRGB(t[0],t[1],t[2])};a.getValue=function(){return e}}else c.addEventListener("change",(t=>{const e=a.querySelector(".rgb-color");e&&(e.innerHTML=i.LiteGUI.Inspector.parseColor(d.rgb))}));return this.processElement(a,s),a}addFile(t,e,s){s=this.processOptions(s),e=e||"";const i=this;this.values.set(t,e);const o=this.createWidget(t,"<span class='inputfield full whidden' style='width: calc(100% - 26px)'><span class='filename'></span></span><button class='litebutton' style='width:20px; margin-left: 2px;'>...</button><input type='file' size='100' class='file' value='"+e+"'/>",s);o.querySelector(".wcontent").style.position="relative";const n=o.querySelector(".wcontent input");s.accept&&(n.accept=s.accept);const r=o.querySelector(".wcontent .filename");return e&&(r.innerText=e.name),n.addEventListener("change",(e=>{if(!e.target.files.length)return r.innerText="",void this.onWidgetChange.call(i,o,t,null,s,null,null);const n=e.target.files[0];if(n.files=e.target.files,s.generate_url&&(n.url=URL.createObjectURL(e.target.files[0])),r.innerText=n.name,s.read_file){const e=new FileReader;e.onload=e=>{n.data=e.target.result,this.onWidgetChange.call(i,o,t,n,s,null,null)},"binary"==s.read_file?e.readAsArrayBuffer(n):"data_url"==s.read_file?e.readAsDataURL(n):e.readAsText(n)}else this.onWidgetChange.call(i,o,t,n,s,null,null)})),this.append(o,s),o}addLine(t,e,s){s=this.processOptions(s),e=e||"";const o=this;this.values.set(t,e);const n=this.createWidget(t,"<span class='line-editor'></span>",s);n.style.width="100%";const r=new i.LiteGUI.LineEditor(e,s);return n.querySelector("span.line-editor").appendChild(r),i.LiteGUI.bind(r,"change",(e=>{i.LiteGUI.trigger(n,"wbeforechange",[e.target.value]),s.callback&&s.callback.call(n,e.target.value),i.LiteGUI.trigger(n,"wchange",[e.target.value]),this.onWidgetChange.call(o,n,t,e.target.value,s,null,null)})),this.append(n,s),n}addTree(t,e,s){s=this.processOptions(s),e=e||"";const o=this.createWidget(t,"<div class='wtree inputfield full'></div>",s),n=o.querySelector(".wtree");s.height&&(n.style.height="number"==typeof s.height?s.height+"px":s.height,n.style.overflow="auto");const r=o.tree=new i.LiteGUI.Tree(e,s.tree_options);return r.onItemSelected=function(t,e){s.callback&&s.callback.call(o,t,e)},n.appendChild(r.root),o.setValue=function(t){r.updateTree(t)},this.append(o,s),this.processElement(o,s),o}addDataTree(t,e,s){s=this.processOptions(s),e=e||"";const i=this.createWidget(t,"<div class='wtree'></div>",s);return function t(e,s){for(const i in s){const o=document.createElement("div");o.className="treenode","object"==typeof s[i]?(o.innerHTML="<span class='itemname'>"+i+"</span><span class='itemcontent'></span>",t(o.querySelector(".itemcontent"),s[i])):o.innerHTML="<span class='itemname'>"+i+"</span><span class='itemvalue'>"+s[i]+"</span>",e.appendChild(o)}}(i.querySelector(".wtree"),e),this.append(i,s),i}addArray(t,e,s){const i=this;if(!e||e.constructor!==Array)return void console.error("Inspector: Array widget value must be a valid array");const o=(s=this.processOptions(s)).data_type||"string",n=s.max_items||100;let r=null;this.widgets_per_row=3,this.addInfo(t,null,{name_width:"100%",width:"100% - 160px"});const l=this.addString("length",e.length||"0",{width:100,callback:t=>{const s=parseInt(t);e<0&&(e=0),e.length=s,c.call(r,null)}});this.addButtons(null,["+","-"],{width:60,callback:function(t){"+"==t?e.length=e.length+1:e.length>0&&(e.length=e.length-1),l.setValue(e.length),c.call(r,null)}}),this.widgets_per_row=1,r=this.addContainer(t,s),r.value=e;const a=function(t,e){t.value[t.index]=e,s.callback&&s.callback.call(r,t.value,t.index)},c=function(t){const e=t.value,r=Math.min(e.length,n);i.widgets_per_row+=1,t.innerHTML="";for(let n=0;n<r;++n){let r=null;void 0!==e[n]&&(r=e[n]);const l=document.createElement("div");l.className="array-row",l.innerHTML="<span class='row-index'>"+n+"</span><span class='row-cell'></span><button style='width: 30px;' class='litebutton single row-trash'><img src='imgs/mini-icon-trash.png'/></button>",t.appendChild(l);const c={widget_parent:l.querySelector(".row-cell"),callback:a.bind(void 0,{value:t.value,index:n})};if(s.data_options)for(const t in s.data_options)c[t]=s.data_options[t];i.add(o,null,r,c)}i.widgets_per_row-=1};return c(r),r.setValue=function(t){this.value=t,c(r)},r.getValue=function(){return this.value},r}addContainer(t,e){t&&t.constructor!==String&&console.warn("LiteGUI.Inspector.addContainer first parameter must be a string with the name");const s=this.startContainer(null,e);return this.endContainer(),s}startContainer(t,e){e=this.processOptions(e);const s=document.createElement("DIV");return s.className="wcontainer",this.applyOptions(s,e),this.row_number=0,this.append(s),this.pushContainer(s),e.widgets_per_row&&(this.widgets_per_row=e.widgets_per_row),e.height&&(s.style.height=i.LiteGUI.sizeToCSS(e.height),s.style.overflow="auto"),s.refresh=function(){s.on_refresh&&s.on_refresh.call(this,s)},s}endContainer(t,e){this.popContainer()}addSection(t,e){var s;let i=this.processOptions(e);const o=this;this.current_section&&this.current_section.end();const n=document.createElement("DIV");n.className="wsection",t||(n.className+=" notitle"),i.className&&(n.className+=" "+i.className),i.collapsed&&!i.no_collapse&&(n.className+=" collapsed"),i.id&&(n.id=i.id||""),i.instance&&(n.instance=i.instance||{});let r="";return t&&(r+="<div class='wsectiontitle'>"+(i.no_collapse?"":"<span class='switch-section-button'></span>")+t+"</div>"),r+="<div class='wsectioncontent'></div>",n.innerHTML=r,n._last_container_stack=this._current_container_stack.concat(),this.root.appendChild(n),this.sections.push(n),n.sectiontitle=n.querySelector(".wsectiontitle"),t&&!i.no_collapse&&(null===(s=n.sectiontitle)||void 0===s||s.addEventListener("click",(t=>{if("button"==t.target.localName)return;n.classList.toggle("collapsed");const s=n.querySelector(".wsectioncontent");s.style.display="none"===s.style.display?"":"none",e.callback&&e.callback.call(n,n.classList.contains("collapsed"))}))),i.collapsed&&!i.no_collapse&&(n.querySelector(".wsectioncontent").style.display="none"),this.setCurrentSection(n),i.widgets_per_row&&(this.widgets_per_row=i.widgets_per_row),n.refresh=function(){n.on_refresh&&n.on_refresh.call(this,n)},n.end=function(){if(o.current_section!=this)return;o._current_container_stack=this._last_container_stack,o._current_container=null;const t=this.querySelector(".wsectioncontent");t&&(o.isContainerInStack(t)&&o.popContainer(t),o.current_section=null)},n}setCurrentSection(t){if(this.current_section==t)return;this.current_section=t;const e=t.parentNode;this.popContainer(e);const s=t.querySelector(".wsectioncontent");this.pushContainer(s)}getCurrentSection(){for(let t=this._current_container_stack.length-1;t>=0;--t){const e=this._current_container_stack[t];if(e.classList.contains("wsectioncontent"))return e.parentNode}return null}endCurrentSection(){this.current_section&&this.current_section.end()}beginGroup(t,e){e=this.processOptions(e);const s=document.createElement("DIV");s.className="wgroup",t=t||"",s.innerHTML="<div class='wgroupheader "+(e.title?"wtitle":"")+"'><span class='switch-section-button'></span>"+t+"</div>",s.group=!0;const o=document.createElement("DIV");o.className="wgroupcontent",e.collapsed&&(o.style.display="none"),e.height&&(o.style.height=i.LiteGUI.sizeToCSS(e.height)),e.scrollable&&(o.style.overflow="auto"),s.appendChild(o);let n=e.collapsed||!1;const r=s.querySelector(".wgroupheader");return n&&r.classList.add("collapsed"),r.addEventListener("click",(t=>{const e=s.querySelector(".wgroupcontent").style;e.display="none"===e.display?"":"none",n=!n,n?r.classList.add("collapsed"):r.classList.remove("collapsed"),t.preventDefault()})),this.append(s,e),this.pushContainer(o),s}endGroup(){do{this.popContainer()}while(this._current_container&&!this._current_container.classList.contains("wgroupcontent"))}addTitle(t,e){e=this.processOptions(e);const s=document.createElement("DIV");let i="<span class='wtitle'><span class='text'>"+t+"</span>";return e.help&&(i+="<span class='help'><div class='help-content'>"+e.help+"</div></span>"),i+="</span>",s.innerHTML=i,s.setValue=function(t){this.querySelector(".text").innerHTML=t},this.row_number=0,this.append(s,e),s}scrollTo(t){const e=this.root.querySelector("#"+t);if(!e)return;const s=this.root.offsetTop,i=e.offsetTop-s;this.root.parentNode.parentNode.scrollTop=i}processOptions(t){let e;return e="function"==typeof t?{callback:t}:t,e||{}}processElement(t,e){e.callback_update&&t.setValue&&(t.on_update=function(){this.setValue(e.callback_update.call(this),!0)})}updateWidgets(){for(let t=0;t<this.widgets.length;++t){const e=this.widgets[t];e.on_update&&e.on_update(e)}}static parseColor(t){return"<span style='color: #FAA'>"+t[0].toFixed(2)+"</span>,<span style='color: #AFA'>"+t[1].toFixed(2)+"</span>,<span style='color: #AAF'>"+t[2].toFixed(2)+"</span>"}}e.Inspector=r,r.widget_constructors={null:"addNull",title:"addTitle",info:"addInfo",number:"addNumber",slider:"addSlider",string:"addString",text:"addString",textarea:"addTextarea",color:"addColor",boolean:"addCheckbox",checkbox:"addCheckbox",icon:"addIcon",vec2:"addVector2",vector2:"addVector2",vec3:"addVector3",vector3:"addVector3",vec4:"addVector4",vector4:"addVector4",enum:"addCombo",dropdown:"addCombo",combo:"addCombo",button:"addButton",buttons:"addButtons",file:"addFile",line:"addLine",list:"addList",tree:"addTree",datatree:"addDataTree",pad:"addPad",array:"addArray",separator:"addSeparator"}},90:(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.jscolor=void 0;class jscolor{static install(){jscolor.addEvent(window,"load",jscolor.init())}static init(){jscolor.binding&&jscolor.bind(),jscolor.preloading&&jscolor.preload()}static getDir(){if(!jscolor.dir){var t=jscolor.detectDir();jscolor.dir=!1!==t?t:"jscolor/"}return jscolor.dir}static detectDir(){let t=location.href,e=document.getElementsByTagName("base");for(let s=0;s<e.length;s+=1)e[s].href&&(t=e[s].href);let s=document.getElementsByTagName("script");for(var i=0;i<s.length;i+=1)if(s[i].src&&/(^|\/)jscolor(.*).js([?#].*)?$/i.test(s[i].src)){var o=new jscolor.URI(s[i].src).toAbsolute(t);return o.path=o.path.replace(/[^\/]+$/,""),o.query=null,o.fragment=null,o.toString()}return!1}static bind(){for(var matchClass=new RegExp("(^|\\s)("+jscolor.bindClass+")\\s*(\\{[^}]*\\})?","i"),e=document.getElementsByTagName("input"),i=0;i<e.length;i+=1){var m;if(!e[i].color&&e[i].className&&(m=e[i].className.match(matchClass))){var prop={};if(m[3])try{eval("prop="+m[3])}catch(t){}e[i].color=new jscolor.color(e[i],prop)}}}static preload(){for(var t in jscolor.imgRequire)jscolor.imgRequire.hasOwnProperty(t)&&jscolor.loadImage(t)}static requireImage(t){jscolor.imgRequire[t]=!0}static loadImage(t){jscolor.imgLoaded[t]||(jscolor.imgLoaded[t]=new Image,jscolor.imgLoaded[t].src=jscolor.getDir()+t)}static fetchElement(t){return"string"==typeof t?document.getElementById(t):t}static addEvent(t,e,s){t.addEventListener?t.addEventListener(e,s,!1):t.attachEvent&&t.attachEvent("on"+e,s)}static fireEvent(t,e){var s;t&&(document.createEvent?((s=document.createEvent("HTMLEvents")).initEvent(e,!0,!0),t.dispatchEvent(s)):document.createEventObject?(s=document.createEventObject(),t.fireEvent("on"+e,s)):t["on"+e]&&t["on"+e]())}static getElementPos(t){var e=t,s=t,i=0,o=0;if(e.offsetParent)do{i+=e.offsetLeft,o+=e.offsetTop}while(e=e.offsetParent);for(;(s=s.parentNode)&&"BODY"!==s.nodeName.toUpperCase();)i-=s.scrollLeft,o-=s.scrollTop;return[i,o]}static getElementSize(t){return[t.offsetWidth,t.offsetHeight]}static getRelMousePos(t){var e=0,s=0;return t||(t=window.event),"number"==typeof t.offsetX?(e=t.offsetX,s=t.offsetY):"number"==typeof t.layerX&&(e=t.layerX,s=t.layerY),{x:e,y:s}}static getViewPos(){return"number"==typeof window.pageYOffset?[window.pageXOffset,window.pageYOffset]:document.body&&(document.body.scrollLeft||document.body.scrollTop)?[document.body.scrollLeft,document.body.scrollTop]:document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)?[document.documentElement.scrollLeft,document.documentElement.scrollTop]:[0,0]}static getViewSize(){return"number"==typeof window.innerWidth?[window.innerWidth,window.innerHeight]:document.body&&(document.body.clientWidth||document.body.clientHeight)?[document.body.clientWidth,document.body.clientHeight]:document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?[document.documentElement.clientWidth,document.documentElement.clientHeight]:[0,0]}}exports.jscolor=jscolor,jscolor.dir="",jscolor.bindClass="color",jscolor.preloading=!0,jscolor.binding=!0,jscolor.images={pad:[181,101],sld:[16,101],cross:[15,15],arrow:[7,11]},jscolor.imgRequire={},jscolor.imgLoaded={},jscolor.URI=class{constructor(t){this.scheme=null,this.authority=null,this.path="",this.query=null,this.fragment=null,t&&this.parse(t)}parse(t){var e=t.match(/^(([A-Za-z][0-9A-Za-z+.-]*)(:))?((\/\/)([^\/?#]*))?([^?#]*)((\?)([^#]*))?((#)(.*))?/);return this.scheme=e[3]?e[2]:null,this.authority=e[5]?e[6]:null,this.path=e[7],this.query=e[9]?e[10]:null,this.fragment=e[12]?e[13]:null,this}toString(){var t="";return null!==this.scheme&&(t=t+this.scheme+":"),null!==this.authority&&(t=t+"//"+this.authority),null!==this.path&&(t+=this.path),null!==this.query&&(t=t+"?"+this.query),null!==this.fragment&&(t=t+"#"+this.fragment),t}toAbsolute(t){var e=new jscolor.URI(t),s=this,i=new jscolor.URI;return null!==e.scheme&&(null!==s.scheme&&s.scheme.toLowerCase()===e.scheme.toLowerCase()&&(s.scheme=null),null!==s.scheme?(i.scheme=s.scheme,i.authority=s.authority,i.path=this.removeDotSegments(s.path),i.query=s.query):(null!==s.authority?(i.authority=s.authority,i.path=this.removeDotSegments(s.path),i.query=s.query):(""===s.path?(i.path=e.path,null!==s.query?i.query=s.query:i.query=e.query):("/"===s.path.substring(0,1)?i.path=this.removeDotSegments(s.path):(null!==e.authority&&""===e.path?i.path="/"+s.path:i.path=e.path.replace(/[^\/]+$/,"")+s.path,i.path=this.removeDotSegments(i.path)),i.query=s.query),i.authority=e.authority),i.scheme=e.scheme),i.fragment=s.fragment,i)}removeDotSegments(t){for(var e="";t;)if("../"===t.substring(0,3)||"./"===t.substring(0,2))t=t.replace(/^\.+/,"").substring(1);else if("/./"===t.substring(0,3)||"/."===t)t="/"+t.substring(3);else if("/../"===t.substring(0,4)||"/.."===t)t="/"+t.substring(4),e=e.replace(/\/?[^\/]*$/,"");else if("."===t||".."===t)t="";else{var s=t.match(/^\/?[^\/]*/)[0];t=t.substring(s.length),e+=s}return e}},jscolor.color=class color{get Hsv(){return this.hsv}get Rgb(){return this.rgb}constructor(t,e){for(var s in this.required=!0,this.adjust=!0,this.hash=!1,this.caps=!0,this.slider=!0,this.valueElement=t,this.styleElement=t,this.onImmediateChange=null,this.hsv=[0,0,1],this.rgb=[1,1,1],this.pickerOnfocus=!0,this.pickerMode="HSV",this.pickerPosition="bottom",this.pickerSmartPosition=!0,this.pickerButtonHeight=20,this.pickerClosable=!1,this.pickerCloseText="Close",this.pickerButtonColor="ButtonText",this.pickerFace=10,this.pickerFaceColor="ThreeDFace",this.pickerBorder=1,this.pickerBorderColor="ThreeDHighlight ThreeDShadow ThreeDShadow ThreeDHighlight",this.pickerInset=1,this.pickerInsetColor="ThreeDShadow ThreeDHighlight ThreeDHighlight ThreeDShadow",this.pickerZIndex=1e4,this.leaveValue=1,this.leaveStyle=2,this.leavePad=4,this.leaveSld=8,this.modeID="hvs"===this.pickerMode.toLowerCase()?1:0,this.abortBlur=!1,this.valueElement=jscolor.fetchElement(this.valueElement),this.styleElement=jscolor.fetchElement(this.styleElement),this.holdPad=!1,this.holdSld=!1,this.target=t,e)e.hasOwnProperty(s)&&(this[s]=e[s]);if(jscolor.addEvent(t,"focus",(()=>{this.pickerOnfocus&&this.showPicker()})),jscolor.addEvent(t,"blur",(()=>{this.blurTarget(),this.abortBlur=!1})),this.valueElement){var i=()=>{this.fromString(this.valueElement.value,this.leaveValue),this.dispatchImmediateChange()};jscolor.addEvent(this.valueElement,"keyup",i),jscolor.addEvent(this.valueElement,"input",i),jscolor.addEvent(this.valueElement,"blur",this.blurValue),this.valueElement.setAttribute("autocomplete","off")}switch(this.styleElement&&(this.styleElement.jscStyle={backgroundImage:this.styleElement.style.backgroundImage,backgroundColor:this.styleElement.style.backgroundColor,color:this.styleElement.style.color}),this.modeID){case 0:jscolor.requireImage("hs.png");break;case 1:jscolor.requireImage("hv.png")}jscolor.requireImage("cross.gif"),jscolor.requireImage("arrow.gif"),this.importColor()}hidePicker(){this.isPickerOwner()&&this.removePicker()}showPicker(){if(!this.isPickerOwner()){var t,e,s,i=jscolor.getElementPos(this.target),o=jscolor.getElementSize(this.target),n=jscolor.getViewPos(),r=jscolor.getViewSize(),l=this.getPickerDims(this);switch(this.pickerPosition.toLowerCase()){case"left":t=1,e=0,s=-1;break;case"right":t=1,e=0,s=1;break;case"top":t=0,e=1,s=-1;break;default:t=0,e=1,s=1}var a=(o[e]+l[e])/2;if(this.pickerSmartPosition)c=[-n[t]+i[t]+l[t]>r[t]&&-n[t]+i[t]+o[t]/2>r[t]/2&&i[t]+o[t]-l[t]>=0?i[t]+o[t]-l[t]:i[t],-n[e]+i[e]+o[e]+l[e]-a+a*s>r[e]?-n[e]+i[e]+o[e]/2>r[e]/2&&i[e]+o[e]-a-a*s>=0?i[e]+o[e]-a-a*s:i[e]+o[e]-a+a*s:i[e]+o[e]-a+a*s>=0?i[e]+o[e]-a+a*s:i[e]+o[e]-a-a*s];else var c=[i[t],i[e]+o[e]-a+a*s];this.drawPicker(c[t],c[e])}}importColor(){this.valueElement?this.adjust?!this.required&&/^\s*$/.test(this.valueElement.value)?(this.valueElement.value="",this.styleElement.style.backgroundImage=this.styleElement.jscStyle.backgroundImage,this.styleElement.style.backgroundColor=this.styleElement.jscStyle.backgroundColor,this.styleElement.style.color=this.styleElement.jscStyle.color,this.exportColor(this.leaveValue|this.leaveStyle)):this.fromString(this.valueElement.value)||this.exportColor():this.fromString(this.valueElement.value,this.leaveValue)||(this.styleElement.style.backgroundImage=this.styleElement.jscStyle.backgroundImage,this.styleElement.style.backgroundColor=this.styleElement.jscStyle.backgroundColor,this.styleElement.style.color=this.styleElement.jscStyle.color,this.exportColor(this.leaveValue|this.leaveStyle)):this.exportColor()}exportColor(t){if(!((t=t||0)&this.leaveValue)&&this.valueElement){var e=this.toString();this.caps&&(e=e.toUpperCase()),this.hash&&(e="#"+e),this.valueElement.value=e}t&this.leaveStyle||!this.styleElement||(this.styleElement.style.backgroundImage="none",this.styleElement.style.backgroundColor="#"+this.toString(),this.styleElement.style.color=.213*this.rgb[0]+.715*this.rgb[1]+.072*this.rgb[2]<.5?"#FFF":"#000"),t&this.leavePad||!this.isPickerOwner()||this.redrawPad(),t&this.leaveSld||!this.isPickerOwner()||this.redrawSld()}fromHSV(t,e,s,i){null!=t||t<0&&(t=0)||t>6&&(t=6),null!=e||e<0&&(e=0)||e>1&&(e=1),null!=s||s<0&&(s=0)||s>1&&(s=1),this.rgb=this.HSV_RGB(null===t?this.hsv[0]:this.hsv[0]=t,null===e?this.hsv[1]:this.hsv[1]=e,null===s?this.hsv[2]:this.hsv[2]=s),this.exportColor(i)}fromRGB(t,e,s,i){t<0&&(t=0)||t>1&&(t=1),e<0&&(e=0)||e>1&&(e=1),s<0&&(s=0)||s>1&&(s=1);var o=this.RGB_HSV(null===t?this.rgb[0]:this.rgb[0]=t,null===e?this.rgb[1]:this.rgb[1]=e,null===s?this.rgb[2]:this.rgb[2]=s);null!==o[0]&&(this.hsv[0]=o[0]),0!==o[2]&&(this.hsv[1]=o[1]),this.hsv[2]=o[2],this.exportColor(i)}fromString(t,e){var s=t.match(/^\W*([0-9A-F]{3}([0-9A-F]{3})?)\W*$/i);return!!s&&(6===s[1].length?this.fromRGB(parseInt(s[1].substring(0,2),16)/255,parseInt(s[1].substring(2,2),16)/255,parseInt(s[1].substring(4,2),16)/255,e):this.fromRGB(parseInt(s[1].charAt(0)+s[1].charAt(0),16)/255,parseInt(s[1].charAt(1)+s[1].charAt(1),16)/255,parseInt(s[1].charAt(2)+s[1].charAt(2),16)/255,e),!0)}toString(){return(256|Math.round(255*this.rgb[0])).toString(16).substring(1)+(256|Math.round(255*this.rgb[1])).toString(16).substring(1)+(256|Math.round(255*this.rgb[2])).toString(16).substring(1)}RGB_HSV(t,e,s){var i=Math.min(Math.min(t,e),s),o=Math.max(Math.max(t,e),s),n=o-i;if(0===n)return[null,0,o];var r=t===i?3+(s-e)/n:e===i?5+(t-s)/n:1+(e-t)/n;return[6===r?0:r,n/o,o]}HSV_RGB(t,e,s){if(null===t)return[s,s,s];var i=Math.floor(t),o=s*(1-e),n=s*(1-e*(i%2?t-i:1-(t-i)));switch(i){case 6:case 0:default:return[s,n,o];case 1:return[n,s,o];case 2:return[o,s,n];case 3:return[o,n,s];case 4:return[n,o,s];case 5:return[s,o,n]}}removePicker(){var t=jscolor.picker.owner.valueElement.ownerDocument;delete jscolor.picker.owner,t.getElementsByTagName("body")[0].removeChild(jscolor.picker.boxB)}drawPicker(t,e){if(!jscolor.picker){jscolor.picker={box:document.createElement("div"),boxB:document.createElement("div"),pad:document.createElement("div"),padB:document.createElement("div"),padM:document.createElement("div"),sld:document.createElement("div"),sldB:document.createElement("div"),sldM:document.createElement("div"),btn:document.createElement("div"),btnS:document.createElement("span"),btnT:document.createTextNode(this.pickerCloseText)};for(var s=0;s<jscolor.images.sld[1];s+=4){var i=document.createElement("div");i.style.height="4px",i.style.fontSize="1px",i.style.lineHeight="0",jscolor.picker.sld.appendChild(i)}jscolor.picker.sldB.appendChild(jscolor.picker.sld),jscolor.picker.box.appendChild(jscolor.picker.sldB),jscolor.picker.box.appendChild(jscolor.picker.sldM),jscolor.picker.padB.appendChild(jscolor.picker.pad),jscolor.picker.box.appendChild(jscolor.picker.padB),jscolor.picker.box.appendChild(jscolor.picker.padM),jscolor.picker.btnS.appendChild(jscolor.picker.btnT),jscolor.picker.btn.appendChild(jscolor.picker.btnS),jscolor.picker.box.appendChild(jscolor.picker.btn),jscolor.picker.boxB.appendChild(jscolor.picker.box)}var o=jscolor.picker;o.box.onmouseup=o.box.onmouseout=()=>{this.target.focus()},o.box.onmousedown=t=>(this.abortBlur=!0,t.preventDefault(),!1),o.box.onmousemove=t=>{(this.holdPad||this.holdSld)&&(this.holdPad&&this.setPad(t),this.holdSld&&this.setSld(t),document.getSelection()?document.getSelection().empty():window.getSelection&&window.getSelection().removeAllRanges(),this.dispatchImmediateChange())},o.padM.onmouseup=o.padM.onmouseout=()=>{this.holdPad&&(this.holdPad=!1,jscolor.fireEvent(this.valueElement,"change"))},o.padM.onmousedown=t=>{this.holdPad=!0,this.setPad(t),this.dispatchImmediateChange()},o.sldM.onmouseup=o.sldM.onmouseout=function(){this.holdSld&&(this.holdSld=!1,jscolor.fireEvent(this.valueElement,"change"))},o.sldM.onmousedown=t=>{this.holdSld=!0,this.setSld(t),this.dispatchImmediateChange()};var n=this.getPickerDims(this);o.box.style.width=n[0]+"px",o.box.style.height=n[1]+"px",o.boxB.style.position="absolute",o.boxB.style.clear="both",o.boxB.style.left=t+"px",o.boxB.style.top=e+"px",o.boxB.style.zIndex=this.pickerZIndex,o.boxB.style.border=this.pickerBorder+"px solid",o.boxB.style.borderColor=this.pickerBorderColor,o.boxB.style.background=this.pickerFaceColor,o.pad.style.width=jscolor.images.pad[0]+"px",o.pad.style.height=jscolor.images.pad[1]+"px",o.padB.style.position="absolute",o.padB.style.left=this.pickerFace+"px",o.padB.style.top=this.pickerFace+"px",o.padB.style.border=this.pickerInset+"px solid",o.padB.style.borderColor=this.pickerInsetColor,o.padM.style.position="absolute",o.padM.style.left="0",o.padM.style.top="0",o.padM.style.width=this.pickerFace+2*this.pickerInset+jscolor.images.pad[0]+jscolor.images.arrow[0]+"px",o.padM.style.height=o.box.style.height,o.padM.style.cursor="crosshair",o.sld.style.overflow="hidden",o.sld.style.width=jscolor.images.sld[0]+"px",o.sld.style.height=jscolor.images.sld[1]+"px",o.sldB.style.display=this.slider?"block":"none",o.sldB.style.position="absolute",o.sldB.style.right=this.pickerFace+"px",o.sldB.style.top=this.pickerFace+"px",o.sldB.style.border=this.pickerInset+"px solid",o.sldB.style.borderColor=this.pickerInsetColor,o.sldM.style.display=this.slider?"block":"none",o.sldM.style.position="absolute",o.sldM.style.right="0",o.sldM.style.top="0",o.sldM.style.width=jscolor.images.sld[0]+jscolor.images.arrow[0]+this.pickerFace+2*this.pickerInset+"px",o.sldM.style.height=o.box.style.height;try{o.sldM.style.cursor="pointer"}catch(t){o.sldM.style.cursor="hand"}var r,l,a,c=this;o.btn.style.display=this.pickerClosable?"block":"none",o.btn.style.position="absolute",o.btn.style.left=this.pickerFace+"px",o.btn.style.bottom=this.pickerFace+"px",o.btn.style.padding="0 15px",o.btn.style.height="18px",o.btn.style.border=this.pickerInset+"px solid",r=c.pickerInsetColor.split(/\s+/),l=r.length<2?r[0]:r[1]+" "+r[0]+" "+r[0]+" "+r[1],o.btn.style.borderColor=l,o.btn.style.color=this.pickerButtonColor,o.btn.style.font="12px sans-serif",o.btn.style.textAlign="center";try{o.btn.style.cursor="pointer"}catch(t){o.btn.style.cursor="hand"}switch(o.btn.onmousedown=function(){this.hidePicker()},o.btnS.style.lineHeight=o.btn.style.height,this.modeID){case 0:a="hs.png";break;case 1:a="hv.png"}o.padM.style.backgroundImage="url('"+jscolor.getDir()+"cross.gif')",o.padM.style.backgroundRepeat="no-repeat",o.sldM.style.backgroundImage="url('"+jscolor.getDir()+"arrow.gif')",o.sldM.style.backgroundRepeat="no-repeat",o.pad.style.backgroundImage="url('"+jscolor.getDir()+a+"')",o.pad.style.backgroundRepeat="no-repeat",o.pad.style.backgroundPosition="0 0",this.redrawPad(),this.redrawSld(),jscolor.picker.owner=this,jscolor.picker.owner.valueElement.ownerDocument.getElementsByTagName("body")[0].appendChild(o.boxB)}getPickerDims(t){return[2*t.pickerInset+2*t.pickerFace+jscolor.images.pad[0]+(t.slider?2*t.pickerInset+2*jscolor.images.arrow[0]+jscolor.images.sld[0]:0),t.pickerClosable?4*t.pickerInset+3*t.pickerFace+jscolor.images.pad[1]+t.pickerButtonHeight:2*t.pickerInset+2*t.pickerFace+jscolor.images.pad[1]]}redrawPad(){var t;switch(this.modeID){case 0:t=1;break;case 1:t=2}var e=Math.round(this.hsv[0]/6*(jscolor.images.pad[0]-1)),s=Math.round((1-this.hsv[t])*(jscolor.images.pad[1]-1));jscolor.picker.padM.style.backgroundPosition=this.pickerFace+this.pickerInset+e-Math.floor(jscolor.images.cross[0]/2)+"px "+(this.pickerFace+this.pickerInset+s-Math.floor(jscolor.images.cross[1]/2))+"px";var i,o,n,r=jscolor.picker.sld.childNodes;switch(this.modeID){case 0:i=this.HSV_RGB(this.hsv[0],this.hsv[1],1);for(var l=0;l<r.length;l+=1)r[l].style.backgroundColor="rgb("+i[0]*(1-l/r.length)*100+"%,"+i[1]*(1-l/r.length)*100+"%,"+i[2]*(1-l/r.length)*100+"%)";break;case 1:i=[this.hsv[2],0,0],o=[this.hsv[2],0,0],n=[this.hsv[2],0,0];var a=(l=Math.floor(this.hsv[0]))%2?this.hsv[0]-l:1-(this.hsv[0]-l);switch(l){case 6:case 0:i=[0,1,2];break;case 1:i=[1,0,2];break;case 2:i=[2,0,1];break;case 3:i=[2,1,0];break;case 4:i=[1,2,0];break;case 5:i=[0,2,1]}for(l=0;l<r.length;l+=1)o=1-1/(r.length-1)*l,n[1]=n[0]*(1-o*a),n[2]=n[0]*(1-o),r[l].style.backgroundColor="rgb("+100*n[i[0]]+"%,"+100*n[i[1]]+"%,"+100*n[i[2]]+"%)"}}redrawSld(){var t;switch(this.modeID){case 0:t=2;break;case 1:t=1}var e=Math.round((1-this.hsv[t])*(jscolor.images.sld[1]-1));jscolor.picker.sldM.style.backgroundPosition="0 "+(this.pickerFace+this.pickerInset+e-Math.floor(jscolor.images.arrow[1]/2))+"px"}isPickerOwner(){return jscolor.picker&&jscolor.picker.owner===this}blurTarget(){this.valueElement===this.target&&this.importColor(),this.pickerOnfocus&&this.hidePicker()}blurValue(){this.valueElement!==this.target&&this.importColor()}setPad(t){var e=jscolor.getRelMousePos(t),s=e.x-this.pickerFace-this.pickerInset,i=e.y-this.pickerFace-this.pickerInset;switch(this.modeID){case 0:this.fromHSV(s*(6/(jscolor.images.pad[0]-1)),1-i/(jscolor.images.pad[1]-1),null,this.leaveSld);break;case 1:this.fromHSV(s*(6/(jscolor.images.pad[0]-1)),null,1-i/(jscolor.images.pad[1]-1),this.leaveSld)}}setSld(t){var e=jscolor.getRelMousePos(t).y-this.pickerFace-this.pickerInset;switch(this.modeID){case 0:this.fromHSV(null,null,1-e/(jscolor.images.sld[1]-1),this.leavePad);break;case 1:this.fromHSV(null,1-e/(jscolor.images.sld[1]-1),null,this.leavePad)}}dispatchImmediateChange(){this.onImmediateChange&&("string"==typeof this.onImmediateChange?eval(this.onImmediateChange):this.onImmediateChange(this))}}},797:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Menubar=void 0;const i=s(776);e.Menubar=class{constructor(t,e){this.options=e||{},this.menu=[],this.panels=[],this.root=document.createElement("div"),this.root.id=t,this.root.className="litemenubar",this.content=document.createElement("ul"),this.root.appendChild(this.content),this.is_open=!1,this.auto_open=(null==e?void 0:e.auto_open)||!1,this.sort_entries=(null==e?void 0:e.sort_entries)||!1,this.closing_time=500}clear(){this.content.innerHTML="",this.menu=[],this.panels=[]}attachToPanel(t){t.content.insertBefore(this.root,t.content.firstChild)}add(t,e){this.data=e||{},"function"==typeof e&&(e={callback:e});const s=this.menu.length,i=t.split("/");let o,n=0,r=0,l=this.menu;for(;l;){if(n>5)throw"Error: Menubar too deep";if(l.length!=r){if(l[r]&&i[n]==l[r].name){if(n<i.length-1){o=l[r],null!=l[r].children&&(l=l[r].children),r=0,n++;continue}console.warn("Warning: Adding menu that already exists: "+t);break}r++}else{const t={name:"",parent:o,children:[],data:null,disable:function(){this.data&&(this.data.disabled=!0)},enable:function(){this.data&&delete this.data.disabled}};if(o=t,n==i.length-1&&(t.data=e),t.name=i[n],l.push(t),n++,n==i.length)break;t.children=[],l=t.children,r=0}}s!=this.menu.length&&this.updateMenu()}remove(t){const e=this.findMenu(t);if(!e)return;if(Array.isArray(e))return console.warn("Can't remove an entire list");if(!e.parent||!e.parent.children)return console.warn("menu without parent?");const s=e.parent.children.indexOf(e);if(-1!=s&&(e.parent.children.splice(s,1),this.is_open)){this.hidePanels();const t=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0,clientX:0,clientY:0});this.showMenu(e.parent.element.data,t,e.parent.element)}}separator(t,e){const s=this.findMenu(t);if(s)return Array.isArray(s)?console.warn("Can't separate an entire list"):void(s.children&&s.children.push({name:"",children:void 0,data:null,separator:!0,order:e||10}))}findMenu(t){const e=t.split("/");let s=0,i=0,o=this.menu;for(;i<=5;){if(s==e.length)return o;if(o.length<=i)return;if("*"==e[s])return o[i].children;if(e[s]!=o[i].name)i++;else{if(s==e.length-1)return o[i];o[i].children&&(o=o[i].children),i=0,s++}}}updateMenu(){const t=this;this.content.innerHTML="";const e=function(e,s){const i=e,o=i.data;o.data&&o.data.callback&&"function"==typeof o.data.callback&&o.data.callback(o.data),t.is_open?(t.is_open=!1,t.hidePanels()):(t.is_open=!0,t.showMenu(o,s,i))},s=function(e,s){if(t.hidePanels(),t.is_open||t.auto_open){const i=e;t.showMenu(i.data,s,i)}};for(const t in this.menu){const i=document.createElement("li");i.innerHTML="<span class='icon'></span><span class='name'>"+this.menu[t].name+"</span>",this.content.appendChild(i),i.data=this.menu[t],this.menu[t].element=i,i.addEventListener("click",e.bind(void 0,i)),i.addEventListener("mouseover",s.bind(void 0,i))}}hidePanels(){if(this.panels.length){this.is_open=!1;for(const t in this.panels)i.LiteGUI.remove(this.panels[t]);this.panels=[]}}showMenu(t,e,s,i=!1){if(this.is_open=!0,i||this.hidePanels(),!t.children||!t.children.length)return;const o=this;o.closing_by_leave&&clearInterval(o.closing_by_leave);const n=document.createElement("div");n.className="litemenubar-panel";const r=[];for(const e in t.children)r.push(t.children[e]);this.sort_entries&&r.sort(((t,e)=>{let s=10,i=10;const o=t,n=e;return o&&o.data&&null!=o.data.order&&(s=o.data.order),o&&o.separator&&null!=o.order&&(s=o.order),n&&n.data&&null!=n.data.order&&(i=n.data.order),n&&n.separator&&null!=n.order&&(i=n.order),s-i}));const l=function(e,n){var r;const l=e,a=l.data;if(a.data){if(a.data.disabled)return;a.data.instance&&a.data.property&&("checkbox"==a.data.type?(a.data.instance[a.data.property]=!a.data.instance[a.data.property],a.data.instance[a.data.property]?l.classList.add("checked"):l.classList.remove("checked")):a.data.hasOwnProperty("value")&&(a.data.instance[a.data.property]=a.data.value)),null!=a.data.checkbox&&(a.data.checkbox=!a.data.checkbox,a.data.checkbox?l.classList.add("checked"):l.classList.remove("checked")),a.data.callback&&"function"==typeof a.data.callback&&a.data.callback(a.data)}a.children&&a.children.length?o.showMenu(a,n,l,!0):(null===(r=a.data)||void 0===r?void 0:r.keep_open)?(o.is_open=!1,o.hidePanels(),o.is_open=!0,o.showMenu(t,n,s,i)):(o.is_open=!1,o.hidePanels())};for(const t in r){const e=document.createElement("p"),s=r[t];e.className="litemenu-entry "+(e.children?" submenu":"");const i=s.children&&s.children.length;if(i&&e.classList.add("has_submenu"),s&&s.name?e.innerHTML="<span class='icon'></span><span class='name'>"+s.name+(i?"<span class='more'>+</span>":"")+"</span>":e.classList.add("separator"),e.data=s,e.data.data){const t=e.data.data;("checkbox"==t.type&&t.instance&&t.property&&1==t.instance[t.property]||1==t.checkbox||t.instance&&t.property&&t.hasOwnProperty("value")&&t.instance[t.property]==t.value||"function"==typeof t.isChecked&&t.isChecked.call(t.instance,t))&&(e.className+=" checked"),t.disabled&&(e.className+=" disabled")}e.addEventListener("click",l.bind(void 0,e)),e.addEventListener("mouseenter",(t=>{})),n.appendChild(e)}n.addEventListener("mouseleave",(t=>{o.closing_by_leave&&clearInterval(o.closing_by_leave),o.closing_by_leave=setTimeout((()=>{o.is_open=!1,o.hidePanels()}))})),n.addEventListener("mouseenter",(t=>{o.closing_by_leave&&clearInterval(o.closing_by_leave),o.closing_by_leave=null}));const a=s.getBoundingClientRect();n.style.left=a.left+(i?200:0)+"px",n.style.top=a.top+a.height+(i?-20:10)+"px",this.panels.push(n),document.body.appendChild(n)}}},673:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Panel=void 0;const i=s(776);class o{constructor(t,e){!e&&t&&t.constructor!==String&&(e=t,t=""),this.options=e=e||{};const s=e;this.content=s.content||"";const n=this.root=document.createElement("div");t&&(n.id=t),n.className="litepanel "+(s.className||""),n.data=this;let r="";s.title&&(r+="<div class='panel-header'>"+s.title+"</div>"),r+="<div class='content'>"+this.content+"</div>",r+="<div class='panel-footer'></div>",n.innerHTML=r,s.title&&(this.header=this.root.querySelector(".panel-header")),this.content=this.root.querySelector(".content"),this.footer=this.root.querySelector(".panel-footer"),s.width&&(this.root.style.width=i.LiteGUI.sizeToCSS(s.width)),s.height&&(this.root.style.height=i.LiteGUI.sizeToCSS(s.height)),s.position&&(this.root.style.position="absolute",this.root.style.left=i.LiteGUI.sizeToCSS(s.position[0]),this.root.style.top=i.LiteGUI.sizeToCSS(s.position[1])),1==s.scroll&&(this.content.style.overflow="auto"),o.title_height="20px"}add(t){this.content.appendChild(t.root)}clear(){for(;this.content.firstChild;)this.content.removeChild(this.content.firstChild)}}e.Panel=o},900:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Table=void 0;const i=s(776);e.Table=class{constructor(t){t=t||{},this.root=document.createElement("table"),this.root.classList.add("litetable"),this.columns=[],this.column_fields=[],this.rows=[],this.data=[],this._must_update_header=!0,t.colums&&this.setColumns(t.colums),t.scrollable&&(this.root.style.overflow="auto"),t.height&&(this.root.style.height=i.LiteGUI.sizeToCSS(t.height)),t.columns&&this.setColumns(t.columns),t.rows&&t.data&&this.setRows(t.data)}setRows(t,e=!1){this.data=t,this.updateContent(e)}addRow(t,e){const s=document.createElement("tr");for(let e=0;e<this.column_fields.length;++e){const i=document.createElement("td");let o=null;o=t.constructor===Array?t[e]:t[this.column_fields[e]],void 0===o&&(o=""),i.innerHTML=o,this.value=this.column_fields[e];const n=this.columns[e];if(void 0===n)break;n.className&&(i.className=n.className),n.width&&(i.style.width=n.width),s.appendChild(i)}return this.root.appendChild(s),this.rows.push(s),e||this.data.push(t),s}updateRow(t,e){this.data[t]=e;const s=this.rows[t];if(!s)return;const i=s.querySelectorAll("td");for(let t=0;t<i.length;++t){const s=this.columns[t];let o=null;o=e.constructor===Array?e[t]:e[s.field],void 0===o&&(o=""),i[t].innerHTML=o}return s}updateCell(t,e,s){const i=this.rows[t];if(!i)return;const o=i.childNodes[e];return o?(o.innerHTML=s,o):void 0}setColumns(t){this.columns.length=0,this.column_fields.length=0;const e=Math.floor(100/t.length).toFixed(1)+"%",s=[];for(let o=0;o<t.length;++o){let n=t[o];if(null==n)continue;n.constructor!==String&&n.constructor!==Number||(n={name:String(n)});const r=n,l={name:r.name||"",width:i.LiteGUI.sizeToCSS(r.width||e),field:(r.field||r.name||"").toLowerCase(),className:r.className};o==t.length-1?l.width=" calc( 100% - ( "+s.join(" + ")+" ) )":s.push(l.width),this.columns.push(l),this.column_fields.push(l.field)}this._must_update_header=!0,this.updateContent()}updateContent(t=!1){if(this.root.innerHTML="",this._must_update_header){this.header=document.createElement("tr");for(let t=0;t<this.columns.length;++t){const e=this.columns[t],s=document.createElement("th");s.innerHTML=e.name,e.width&&(s.style.width=e.width),e.th=s,this.header.appendChild(s)}this._must_update_header=!1}if(this.root.appendChild(this.header),this.data)if(this.data.length!=this.rows.length&&(t=!1),t)for(let t=0;t<this.rows.length;++t){const e=this.data[t],s=this.updateRow(t,e);this.root.appendChild(s)}else{this.rows.length=0;for(let t=0;t<this.data.length;++t){const e=this.data[t];this.addRow(e,!0)}}}}},649:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Tabs=void 0;const i=s(776);class o{constructor(t,e){if(e||t&&t.constructor===String){const s=t;(t=e||{}).id=s,console.warn("LiteGUI.Tabs legacy parameter, use options as first parameter instead of id.")}this.options=t||{};const s=t,i=this.mode=s.mode||"horizontal",n=document.createElement("div");s.id&&(n.id=s.id),n.data=this,n.className="litetabs "+i,this.root=n,this.root.tabs=this,this.current_tab=-1,this.previous_tab=-1,"horizontal"==i?s.size&&("full"==s.size?this.root.style.height="100%":this.root.style.height=s.size.toString()):"vertical"==i&&s.size&&("full"==s.size?this.root.style.width="100%":this.root.style.width=s.size.toString()),s.width&&(this.root.style.width=s.width.constructor===Number?s.width.toFixed(0)+"px":s.width.toString()),s.height&&(this.root.style.height=s.height.constructor===Number?s.height.toFixed(0)+"px":s.height.toString());const r=document.createElement("ul");r.className="wtabcontainer","vertical"==i?r.style.width=o.tabs_width+"px":r.style.height=o.tabs_height+"px",r.addEventListener("wheel",this.onMouseWheel),this.list=r,this.root.appendChild(this.list),this.tabs_root=r,this.tabs=[],this.tabs_by_index=[],this.selected=null,this.onchange=s.callback,s.parent&&this.appendTo(s.parent)}onMouseWheel(t){t.deltaY&&(this.list.scrollLeft+=t.deltaY)}show(){this.root.style.display="block"}hide(){this.root.style.display="none"}getCurrentTab(){return this.tabs[this.current_tab].tab}getCurrentTabId(){return this.tabs[this.current_tab].id}getPreviousTab(){return this.tabs[this.previous_tab].tab}appendTo(t,e){e?t.prepend(this.root):t.appendChild(this.root)}getTab(t){for(let e=0;e<this.tabs.length;e++)if(this.tabs[e].id==t)return this.tabs[e];return null}getTabByIndex(t){return this.tabs_by_index[t]}getNumOfTabs(){let t=0;for(const e in this.tabs)t++;return t}getTabContent(t){for(let e=0;e<this.tabs.length;e++)if(this.tabs[e].id==t)return this.tabs[e].content;return null}getTabIndexInTab(t){for(let e=0;e<this.tabs.length;e++)if(this.tabs[e].id==t)return e;return-1}getTabIndex(t){let e=null;for(let s=0;s<this.tabs.length;s++)this.tabs[s].id==t&&(e=this.tabs[s]);if(!e)return-1;for(let t=0;t<this.list.childNodes.length;t++)if(this.list.childNodes[t]==e.tab)return t;return-1}addTab(t,e,s=!1){var r;"function"==typeof e&&(e={callback:e}),this.options=e||{};const l=this,a=e;null==t&&(t="rand_"+(1e6*Math.random()|0));const c=document.createElement("li"),d=t.replace(/ /gi,"_");if(c.className="wtab wtab-"+d+" ",c.dataset.id=t,c.innerHTML="<span class='tabtitle'>"+(a.title||t)+"</span>",a.button&&(c.className+="button "),a.tab_className&&(c.className+=a.tab_className),a.bigicon&&(c.innerHTML="<img class='tabbigicon' src='"+a.bigicon+"'/>"+c.innerHTML),a.closable&&(c.innerHTML+="<span class='tabclose'>"+i.special_codes.close+"</span>",null===(r=c.querySelector("span.tabclose"))||void 0===r||r.addEventListener("click",(e=>{l.removeTab(t),e.preventDefault(),e.stopPropagation()}),!0)),void 0!==a.index){const t=this.list.childNodes[a.index];t?this.list.insertBefore(c,t):this.list.appendChild(c)}else this.plus_tab?this.list.insertBefore(c,this.plus_tab.tab):this.list.appendChild(c);if(a.tab_width&&(c.style.width=a.tab_width.constructor===Number?a.tab_width.toFixed(0)+"px":a.tab_width.toString(),c.style.minWidth="0"),this.options.autoswitch){c.classList.add("autoswitch");const t=t=>{const e=t.target;l._timeout_mouseover&&clearTimeout(l._timeout_mouseover),l._timeout_mouseover=setTimeout((()=>{i.LiteGUI.trigger(e,"click"),l._timeout_mouseover=null}),500)};c.addEventListener("dragenter",t),c.addEventListener("dragleave",(t=>{l._timeout_mouseover&&(clearTimeout(l._timeout_mouseover),l._timeout_mouseover=null)}))}const h=document.createElement("div");if(a.id&&(h.id=a.id),h.className="wtabcontent wtabcontent-"+d+" "+(a.className||""),h.dataset.id=t,h.style.display="none","horizontal"==this.mode?a.size&&(h.style.overflow="auto","full"==a.size?(h.style.width="100%",h.style.height="calc( 100% - "+o.tabs_height+"px )",h.style.height="-moz-calc( 100% - "+o.tabs_height+"px )",h.style.height="-webkit-calc( 100% - "+o.tabs_height+"px )"):h.style.height=a.size.toString()):"vertical"==this.mode&&a.size&&(h.style.overflow="auto","full"==a.size?(h.style.height="100%",h.style.width="calc( 100% - "+o.tabs_width+"px )",h.style.width="-moz-calc( 100% - "+o.tabs_width+"px )",h.style.width="-webkit-calc( 100% - "+o.tabs_width+"px )"):h.style.width=a.size.toString()),void 0!==a.width&&(h.style.width="string"==typeof a.width?a.width:a.width+"px"),void 0!==a.height&&(h.style.height="string"==typeof a.height?a.height:a.height+"px"),a.content&&("string"==typeof a.content?h.innerHTML=a.content:h.appendChild(a.content)),this.root.appendChild(h),a.button){const t=t=>{if(!t.target)return;const e=t.target.dataset.id;a.callback&&a.callback(e,t)};c.addEventListener("click",t.bind(c))}else c.addEventListener("click",this.onTabClicked.call);c.options=e,c.tabs=this;const u=c.querySelector("span.tabtitle"),p=new n(t,c,h,u);a.onclose&&(p.onClose=a.onclose);const g=this.tabs.length;return this.tabs[g]=p,this.recomputeTabsByIndex(),c.addEventListener("contextmenu",(t=>(2!=t.button||(t.preventDefault(),a.callback_context&&a.callback_context.call(p)),!1))),1!=a.selected&&null!=this.selected||this.selectTab(t,a.skip_callbacks),p}addPlusTab(t){this.plus_tab&&console.warn("There is already a plus tab created in this tab widget"),this.plus_tab=this.addTab("plus_tab",{title:"+",tab_width:20,button:!0,callback:t,skip_callbacks:!0})}addButtonTab(t,e,s){return this.addTab(t,{title:e,tab_width:20,button:!0,callback:s,skip_callbacks:!0})}onTabClicked(t,e){if(e.selected)return;if(!e.parentNode)return;const s=this.options;if(!this)throw"tabs not found";if(s.callback_canopen&&0==s.callback_canopen())return;const o=e.dataset.id;-1!=this.current_tab&&this.tabs[this.current_tab].id!=o&&this.tabs[this.current_tab].content&&e.options.callback_leave&&e.options.callback_leave(this.tabs[this.current_tab].id,this.tabs[this.current_tab].tab,this.tabs[this.current_tab].content);let n=null;for(const t in this.tabs){const e=this.tabs[t];t==o?(e.selected=!0,e.content.style.display="",n=e.content):(e.selected=!1,e.content.style.display="none")}const r=this.list.querySelectorAll("li.wtab");for(let t=0;t<r.length;++t)r[t].selected=!1;e.selected=!0,this.previous_tab=this.current_tab,this.current_tab=this.getTabIndexInTab(o),t&&(s.callback&&s.callback(o,n,t),i.LiteGUI.trigger(this,"wchange",[o,n]),this.onchange&&this.onchange(o,n)),this.selected=o}selectTab(t,e=!1){if(!t)return;const s=this.list.querySelectorAll("li.wtab");for(let e=0;e<s.length;e++)if(t==s[e].dataset.id){this.onTabClicked.call;break}}setTabVisibility(t,e){const s=this.getTab(t);s&&(s.tab.style.display=e?"none":"",s.content.style.display=e?"none":"")}recomputeTabsByIndex(){this.tabs_by_index=[];for(const t in this.tabs){const e=this.tabs[t];let s=0,i=e.tab;for(;null!=i;)s++,i=i.previousSibling;this.tabs_by_index[s]=e}}removeTab(t){const e=this.getTab(t);if(!e)return void console.warn("tab not found: "+t);e.onClose&&e.onClose(e),e.tab.parentNode&&e.tab.parentNode.removeChild(e.tab),e.content.parentNode&&e.content.parentNode.removeChild(e.content);const s=this.getTabIndexInTab(t);this.tabs.splice(s,1),this.recomputeTabsByIndex()}removeAllTabs(t=!1){const e=[];for(const t in this.tabs)e.push(this.tabs[t]);for(const s in e){const i=e[s];if(i==this.plus_tab&&t)continue;i.tab.parentNode&&i.tab.parentNode.removeChild(i.tab),i.content.parentNode&&i.content.parentNode.removeChild(i.content);const o=this.getTabIndexInTab(i.id);this.tabs.splice(o,1)}this.recomputeTabsByIndex()}clear(){this.removeAllTabs()}hideTab(t){this.setTabVisibility(t,!1)}showTab(t){this.setTabVisibility(t,!0)}transferTab(t,e,s=0){const i=this.getTab(t);if(!i)return;e.tabs[e.getTabIndexInTab(t)]=i,void 0!==s?e.list.insertBefore(i.tab,e.list.childNodes[s]):e.list.appendChild(i.tab),e.root.appendChild(i.content);let o=null;for(const t in this.tabs)if(o=t,o)break;o&&this.selectTab(o),i.tab.selected=!1,e.selectTab(t)}detachTab(t,e,s){const o=this.getTabIndex(t);if(!this.tabs[o])return;const n=window.open("","","width=800, height=600, location=no, status=no, menubar=no, titlebar=no, fullscreen=yes");if(!n)return;n.document.write("<head><title>"+t+"</title>");const r=document.querySelectorAll("link[rel='stylesheet'],style");for(let t=0;t<r.length;t++)n.document.write(r[t].outerHTML);n.document.write("</head><body></body>"),n.document.close();const l=this,a=new i.LiteGUI.Tabs(void 0,this.options);return n.tabs=a,n.onbeforeunload=function(){a.transferTab(t,l,o),s&&s()},a.list.style.height="20px",n.document.body.appendChild(a.root),l.transferTab(t,a,o),a.tabs[a.getTabIndexInTab(t)].tab.selected=!0,this.recomputeTabsByIndex(),e&&e(),n}destroy(t){this.removeTab(t)}}e.Tabs=o,o.tabs_width=64,o.tabs_height=26;class n{constructor(t,e,s,i){this.id=t,this.tab=e,this.content=s,this.title=i}add(t){this.content.appendChild(t.root?t.root:t)}setTitle(t){this.title.innerHTML=t}click(){i.LiteGUI.trigger(this.tab,"click")}}},526:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Tree=void 0;const i=s(776);class o{constructor(t,e,s){if(this._skip_scroll=!1,s||t&&t.constructor===String){const i=t;t=e,(e=s||{}).id=i,console.warn("LiteGUI.Tree legacy parameter, use data as first parameter instead of id.")}e=e||{};const i=document.createElement("div");this.root=i,e.id&&(i.id=e.id),i.className="litetree",this.tree=t;const o=this;e=e||{allow_rename:!1,allow_drag:!0,allow_multiselection:!1},this.options=e,this.indent_offset=e.indent_offset||0,e.height&&(this.root.style.height="string"==typeof e.height?e.height:Math.round(e.height)+"px"),this.collapsed_depth=3,null!=e.collapsed_depth&&(this.collapsed_depth=e.collapsed_depth),i.addEventListener("click",(t=>{t.target==o.root&&o.onBackgroundClicked&&o.onBackgroundClicked(t,o)})),i.addEventListener("contextmenu",(t=>(2!=t.button||(o.onContextMenu&&o.onContextMenu(t),t.preventDefault()),!1)));const n=this.createAndInsert(t,e,null,void 0);if(!n)throw"Error in LiteGUI.Tree, createAndInsert returned null";n.className+=" root_item",this.root_item=n}updateTree(t){this.root.innerHTML="";const e=this.createAndInsert(t,this.options,null,void 0);e?(e.className+=" root_item",this.root_item=e):this.root_item=void 0}insertItem(t,e,s,i){if(!e){const t=this.root.childNodes[0];t&&(e=t.dataset.item_id)}const o=this.createAndInsert(t,i,e,s);return e&&this._updateListBox(this._findElement(e)),o}createAndInsert(t,e,s,i){let o=-1;s?o=this._findElementIndex(s):void 0===s&&(o=0);let n=null,r=0;-1!=o&&(n=this.root.childNodes[o],r=parseInt(n.dataset.level)+1);const l=this.createTreeItem(t,e,r.toString());if(!l)return;l.parent_id=s;if(this.getItem(l.dataset.item_id)&&console.warn("There another item with the same ID in this tree"),-1==o?this.root.appendChild(l):this._insertInside(l,o,i,void 0),n&&!this._isNodeChildrenVisible(s)&&l.classList.add("hidden"),t.children)for(let s=0;s<t.children.length;++s)this.createAndInsert(t.children[s],e,t.id,void 0);return this._updateListBox(l,e,r),e&&e.selected&&this.markAsSelected(l,!0),l}_insertInside(t,e,s,i){const n=this.root.childNodes[e];if(!n)throw"No parent node found, index: "+e+", nodes: "+this.root.childNodes.length;const r=parseInt(n.dataset.level),l=void 0!==i?i:r+1,a=t.querySelector(".indentblock");a&&(a.style.paddingLeft=(l+this.indent_offset)*o.INDENT+"px"),t.dataset.level=l;for(let i=e+1;i<this.root.childNodes.length;++i){const e=this.root.childNodes[i];if(!e.classList||!e.classList.contains("ltreeitem"))continue;const o=parseInt(e.dataset.level);if(o==l&&s)s--;else if(o<l||0===s&&o===l)return void this.root.insertBefore(t,e)}this.root.appendChild(t)}_isNodeChildrenVisible(t){var e;const s=this.getItem(t);if(!s)return!1;if(s.classList.contains("hidden"))return!1;const i=s.querySelector(".listbox");return!i||"closed"!=(null===(e=i.liteBox)||void 0===e?void 0:e.getValue())}_findElement(t){if(!t||t.constructor!==String)throw"findElement param must be string with item id";for(let e=0;e<this.root.childNodes.length;++e){const s=this.root.childNodes[e];if(s.classList&&s.classList.contains("ltreeitem")&&s.classList.contains("ltreeitem-"+t))return s}return null}_findElementIndex(t){for(let e=0;e<this.root.childNodes.length;++e){const s=this.root.childNodes[e];if(s.classList&&s.classList.contains("ltreeitem"))if("string"==typeof t){if(s.dataset.item_id===t)return e}else if(s===t)return e}return-1}_findElementLastChildIndex(t){if(-1==t)return-1;const e=parseInt(this.root.childNodes[t].dataset.level);for(let s=t+1;s<this.root.childNodes.length;++s){const t=this.root.childNodes[s];if(!t.classList||!t.classList.contains("ltreeitem"))continue;if(parseInt(t.dataset.level)==e)return s}return-1}_findChildElements(t,e){const s=this._findElementIndex(t);if(-1==s)return;const i=this.root.childNodes[s],o=parseInt(i.dataset.level),n=[];for(let t=s+1;t<this.root.childNodes.length;++t){const s=this.root.childNodes[t];if(!s.classList||!s.classList.contains("ltreeitem"))continue;const i=parseInt(s.dataset.level);if(!(e&&i>o+1)){if(i<=o)return n;n.push(s)}}return n}createTreeItem(t,e,s){if(null==t)return void console.error("Tree item cannot be null");e=e||this.options;const o=document.createElement("li");o.className="ltreeitem";const n=this;if(t.id){const e=t.id.replace(/\s/g,"_");o.className+=" ltreeitem-"+e,o.dataset.item_id=t.id}if(t.dataset)for(const e in t.dataset)o.dataset[e]=t.dataset[e];t.DOM=o,o.data=t,void 0!==s&&(o.dataset.level=s,o.classList.add("ltree-level-"+s));const r=document.createElement("div");r.className="ltreeitemtitle",t.className&&(r.className+=" "+t.className),r.innerHTML="<span class='precontent'></span><span class='indentblock'></span><span class='collapsebox'></span><span class='incontent'></span><span class='postcontent'></span>";const l=t.content||t.id||"";if(r.querySelector(".incontent").innerHTML=l,t.precontent&&(r.querySelector(".precontent").innerHTML=t.precontent),t.postcontent&&(r.querySelector(".postcontent").innerHTML=t.postcontent),t.dataset)for(const e in t.dataset)o.dataset[e]=t.dataset[e];o.appendChild(r),o.title_element=r,!1===t.visible&&(o.style.display="none");const a=o;a.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();const s=a;if(!s.title_element._editing){if(e.ctrlKey&&n.options.allow_multiselection){if(n.isNodeSelected(s))return s.classList.remove("selected"),i.LiteGUI.trigger(n,"item_remove_from_selection",{item:s,data:s.data}),void i.LiteGUI.trigger(n.root,"item_remove_from_selection",{item:s,data:s.data});n.markAsSelected(s,!0),i.LiteGUI.trigger(n,"item_add_to_selection",{item:s,data:s.data}),i.LiteGUI.trigger(n.root,"item_add_to_selection",{item:s,data:s.data});let e=!1;t.callback&&(e=t.callback.call(n,s)),!e&&n.onItemAddToSelection&&n.onItemAddToSelection(s.data,s)}if(e.shiftKey&&n.options.allow_multiselection){const t=n.getSelectedItem();if(!t)return;if(t===s)return;const e=Array.prototype.slice.call(t.parentNode.children),o=e.indexOf(t),r=e.indexOf(s),l=r>o?e.slice(o,r):e.slice(r,o);for(let t=0;t<l.length;++t){const e=l[t];n.markAsSelected(e,!0),i.LiteGUI.trigger(n,"item_add_to_selection",{item:e,data:e.data}),i.LiteGUI.trigger(n.root,"item_add_to_selection",{item:e,data:e.data})}}else{n.markAsSelected(s),n._skip_scroll=!0,i.LiteGUI.trigger(n,"item_selected",{item:s,data:s.data}),i.LiteGUI.trigger(n.root,"item_selected",{item:s,data:s.data});let e=!1;t.callback&&(e=t.callback.call(n,s)),!e&&n.onItemSelected&&n.onItemSelected(s.data,s),n._skip_scroll=!1}}}.bind(a)),a.addEventListener("dblclick",function(t){const e=a,s=e.title_element.querySelector(".incontent");if(i.LiteGUI.trigger(n,"item_dblclicked",e),i.LiteGUI.trigger(n.root,"item_dblclicked",e),!s._editing&&n.options.allow_rename){s._editing=!0,s._old_name=s.innerHTML;const o=s;s.innerHTML="<input type='text' value='"+s.innerHTML+"' />";const r=s.querySelector("input");null==r||r.addEventListener("blur",(t=>{const s=t.target.value;setTimeout((()=>{o.innerHTML=s}),1),delete o._editing,i.LiteGUI.trigger(n.root,"item_renamed",{old_name:o._old_name,new_name:s,item:e,data:e.data}),delete o._old_name})),null==r||r.addEventListener("keydown",(t=>{13==t.keyCode&&r.blur()})),null==r||r.focus(),t.preventDefault()}t.preventDefault(),t.stopPropagation()}.bind(a));a.addEventListener("contextmenu",(function(t){const e=a;if(t.preventDefault(),t.stopPropagation(),2==t.button)return!!n.onItemContextMenu&&n.onItemContextMenu(t,{item:e,data:e.data})}));const c=r;this.options.allow_drag&&(c.draggable=!0,c.addEventListener("dragstart",(e=>{if(e.dataTransfer.setData("item_id",this.parentNode.dataset.item_id),!t.onDragData)return;const s=t.onDragData();if(s)for(const t in s)e.dataTransfer.setData(t,s[t])})));let d=0;return c.addEventListener("dragenter",(e=>{if(e.preventDefault(),t.skipdrag)return!1;0==d&&r.classList.add("dragover"),d++})),c.addEventListener("dragleave",(t=>{t.preventDefault(),d--,0==d&&r.classList.remove("dragover")})),c.addEventListener("dragover",(function(t){t.preventDefault()})),c.addEventListener("drop",(e=>{var s;const o=e.target;if(r.classList.remove("dragover"),e.preventDefault(),t.skipdrag)return!1;const l=null===(s=e.dataTransfer)||void 0===s?void 0:s.getData("item_id");if(!l)return i.LiteGUI.trigger(n.root,"drop_on_item",{item:o,event:e}),void(n.onDropItem&&n.onDropItem(e,o.parentNode.data));const a=o.parentNode.dataset.item_id;(!n.onMoveItem||n.onMoveItem&&0!=n.onMoveItem(n.getItem(l),n.getItem(a)))&&n.moveItem(l,a)&&i.LiteGUI.trigger(n.root,"item_moved",{item:n.getItem(l),parent_item:n.getItem(a)}),n.onDropItem&&n.onDropItem(e,o.parentNode.data)})),o}filterByName(t){for(let e=0;e<this.root.childNodes.length;++e){const s=this.root.childNodes[e];if(!s.classList||!s.classList.contains("ltreeitem"))continue;const i=s.querySelector(".incontent");if(!i)continue;const n=i.innerHTML.toLowerCase();if(t&&-1==n.indexOf(t.toLowerCase()))s.classList.add("filtered");else{s.data&&!1!==s.data.visible&&s.classList.remove("filtered");const e=s.querySelector(".indentblock");e&&(e.style.paddingLeft=t?0:(parseInt(s.dataset.level)+this.indent_offset)*o.INDENT+"px")}}}filterByRule(t,e){if(!t)throw"filterByRule requires a callback";for(let s=0;s<this.root.childNodes.length;++s){const o=this.root.childNodes[s];if(!o.classList||!o.classList.contains("ltreeitem"))continue;const n=o.querySelector(".incontent");if(n)if(t(o.data,n,e)){o.data&&!1!==o.data.visible&&o.classList.remove("filtered");const t=o.querySelector(".indentblock");t&&(t.style.paddingLeft=e?0:(parseInt(o.dataset.level)+this.indent_offset)*i.LiteGUI.Tree.INDENT+"px")}else o.classList.add("filtered")}}getItem(t){if(!t)return null;if(t.classList)return t;for(let e=0;e<this.root.childNodes.length;++e){const s=this.root.childNodes[e];if(s.classList&&s.classList.contains("ltreeitem")&&s.dataset.item_id===t)return s}return null}expandItem(t,e){const s=this.getItem(t);if(!s)return;if(!s.listbox)return;if(s.listbox.setValue(!0),!e)return;const i=this.getParent(s);i&&this.expandItem(i,e)}collapseItem(t){const e=this.getItem(t);e&&e.listbox&&e.listbox.setValue(!1)}isInsideArea(t){const e=t.constructor===String?this.getItem(t):t;if(!e)return!1;const s=this.root.getClientRects();if(!s.length)return!1;const i=s[0].height,o=e.offsetTop;return this.root.scrollTop<o&&o<this.root.scrollTop+i}scrollToItem(t){const e=t.constructor===String?this.getItem(t):t;if(!e)return;const s=this.root.parentNode;if(!s)return;const i=s.getBoundingClientRect(),n=i.h;if(!i)return;const r=(parseInt(e.dataset.level)+this.indent_offset)*o.INDENT+50;s.scrollTop=e.offsetTop-.5*n|0,.75*i.width<r?s.scrollLeft=r:s.scrollLeft=0}setSelectedItem(t,e,s){if(!t)return void this.unmarkAllAsSelected();const o=this.getItem(t);return o?o.classList.contains("selected")?void 0:(this.markAsSelected(o),e&&!this._skip_scroll&&this.scrollToItem(o),this.expandItem(o,!0),s&&i.LiteGUI.trigger(o,"click"),o):null}addItemToSelection(t){if(!t)return;const e=this.getItem(t);return e?(this.markAsSelected(e,!0),e):null}removeItemFromSelection(t){if(!t)return;const e=this.getItem(t);if(!e)return null;e.classList.remove("selected")}getSelectedItem(){return this.root.querySelector(".ltreeitem.selected")}getSelectedItems(){return this.root.querySelectorAll(".ltreeitem.selected")}isItemSelected(t){const e=this.getItem(t);return!!e&&this.isNodeSelected(e)}getChildren(t,e=!1){return t&&t.constructor!==String&&t.dataset&&(t=t.dataset.item_id),this._findChildElements(t,e)}getParent(t){const e=this.getItem(t);return e?this.getItem(e.parent_id):null}getAncestors(t,e){e=e||[];const s=this.getItem(t);return s?(e.push(s),this.getAncestors(s.parent_id,e)):e}isAncestor(t,e){const s=this.getItem(t);if(!s)return!1;const i=this.getItem(e),o=this.getItem(s.parent_id);return!!o&&(o==i||this.isAncestor(o,e))}moveItem(t,e){if(t===e)return!1;const s=this.getItem(t),i=this.getItem(e);if(this.isAncestor(i,s))return!1;let o=this._findElementIndex(i);const n=parseInt(i.dataset.level),r=this.getParent(s);if(!r)return console.error("node parent not found by id, maybe id has changed"),!1;const l=n-parseInt(r.dataset.level);if(!i||!s)return!1;if(i==r)return!1;s.parent_id=e;const a=this.getChildren(s);if(a){a.unshift(s);for(let t=0;t<a.length;t++)a[t].parentNode.removeChild(a[t]);for(let t=0;t<a.length;t++){const e=a[t],s=parseInt(e.dataset.level)+l;e.dataset.level=s}o=this._findElementIndex(i);let t=this._findElementLastChildIndex(o);-1==t&&(t=0);for(let e=0;e<a.length;e++){const s=a[e];this._insertInside(s,o,t+e-1,parseInt(s.dataset.level))}}return this._updateListBox(i),r&&this._updateListBox(r),!0}removeItem(t,e){let s=t;if("string"==typeof t&&(s=this.getItem(t)),!s)return!1;const i=this.getParent(s);let o=null;if(e&&(o=this.getChildren(s)),this.root.removeChild(s),o)for(let t=0;t<o.length;t++)this.root.removeChild(o[t]);return i&&this._updateListBox(i),!0}updateItem(t,e){const s=this.getItem(t);if(!s)return!1;if(s.data=e,e.id&&(s.id=e.id),e.content){s.title_element.querySelector(".incontent").innerHTML=e.content}return!0}updateItemId(t,e){const s=this.getItem(t);if(!s)return!1;const i=this.getChildren(t,!0);s.id=e;for(let t=0;t<i.length;++t){i[t].parent_id=e}return!0}clear(t){if(!t)return void(this.root.innerHTML="");const e=this.root.querySelectorAll(".ltreeitem");for(let t=1;t<e.length;t++){const s=e[t];this.root.removeChild(s)}}getNodeByIndex(t){return this.root.querySelectorAll(".ltreeitem")[t]}unmarkAllAsSelected(){this.root.classList.remove("selected");const t=this.root.querySelectorAll(".ltreeitem.selected");if(t)for(let e=0;e<t.length;e++)t[e].classList.remove("selected");const e=this.root.querySelectorAll(".ltreeitem.semiselected");for(let t=0;t<e.length;t++)e[t].classList.remove("semiselected")}isNodeSelected(t){return!!t.classList.contains("selected")}markAsSelected(t,e=!1){if(t.classList.contains("selected"))return;e||this.unmarkAllAsSelected(),t.classList.add("selected");let s=this.getParent(t);const i=[];for(;s&&-1==i.indexOf(s);)s.classList.add("semiselected"),i.push(s),s=this.getParent(s)}_updateListBox(t,e,s=0){if(!t)return;const o=this;if(!t.listbox){const e=t.title_element.querySelector(".collapsebox"),s=new i.LiteGUI.LiteBox(!0,(e=>{o.onClickBox(e,t),i.LiteGUI.trigger(o.root,"item_collapse_change",{item:t,data:s.getValue()})})),n=s.root;n.stopPropagation=!0,n.setEmpty(!0),e.appendChild(n),t.listbox=n}(e&&e.collapsed||s>=this.collapsed_depth)&&t.listbox.collapse();const n=this.getChildren(t.dataset.item_id);n&&(n.length?t.listbox.setEmpty(!1):t.listbox.setEmpty(!0))}onClickBox(t,e){const s=this.getChildren(e);if(s)for(let t=0;t<s.length;++t){const e=s[t],i=this.getParent(e);let o=!0;i&&(o=this._isNodeChildrenVisible(i)),o?e.classList.remove("hidden"):e.classList.add("hidden")}}}e.Tree=o,o.INDENT=20},360:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ComplexList=e.LineEditor=e.Slider=e.List=e.LiteBox=e.Checkbox=e.ContextMenu=e.SearchBox=e.Button=void 0;const i=s(776);e.Button=class{constructor(t,e){"function"==typeof(e=e||{})&&(e={callback:e});const s=document.createElement("div");s.className="litegui button",this.root=s;const i=document.createElement("button");i.className="litebutton",this.content=i,s.appendChild(i),i.innerHTML=t,i.addEventListener("click",(t=>{this.click()})),e.callback&&(this.callback=e.callback)}click(){this.callback&&this.callback.call(this)}};e.SearchBox=class{constructor(t,e){this.options=e||{},this.value=t||"";const s=document.createElement("div");s.className="litegui searchbox";const i=null!=(null==e?void 0:e.placeholder)?e.placeholder:"Search";s.innerHTML="<input value='"+t+"' placeholder='"+i+"'/>",this.input=s.querySelector("input"),this.root=s,this.input.onchange=function(t){console.warn("Valor de e: "+t)}}setValue(t){this.input.value=t,this.input.onchange&&this.input.onchange(new Event("change"))}getValue(){return this.input.value}};e.ContextMenu=class{constructor(t,e){e=e||{},this.options=e,e.parentMenu&&(e.parentMenu.constructor!==this.constructor?(console.error("parentMenu must be of class ContextMenu, ignoring it"),e.parentMenu=void 0):(this.parentMenu=e.parentMenu,this.parentMenu.lock=!0,this.parentMenu.current_submenu=this)),e.event&&"MouseEvent"!==e.event.constructor.name&&"PointerEvent"!==e.event.constructor.name&&"CustomEvent"!==e.event.constructor.name&&(console.error("Event passed to ContextMenu is not of type MouseEvent or CustomEvent. Ignoring it."),e.event=void 0);const s=document.createElement("div");if(s.className="litecontextmenu litemenubar-panel",s.style.minWidth="100",s.style.minHeight="100",s.style.pointerEvents="none",setTimeout((()=>{s.style.pointerEvents="auto"}),100),s.addEventListener("mouseup",(t=>(t.preventDefault(),!0)),!0),s.addEventListener("contextmenu",(t=>(2!=t.button||t.preventDefault(),!1)),!0),s.addEventListener("mousedown",(t=>2==t.button&&(this.close.bind(this,t),t.preventDefault(),!0)),!0),this.root=s,e.title){const t=document.createElement("div");t.className="litemenu-title",t.innerHTML=e.title,s.appendChild(t)}for(const s in t){let i=t.constructor==Array?t[s]:s;null!=i&&i.constructor!==String&&(i=void 0===i.content?String(i):i.content);const o=t[s];this.addItem(i,o,e)}s.addEventListener("mouseleave",(t=>{!this.lock&&this.root&&(this.root.closingTimer&&clearTimeout(this.root.closingTimer),this.root.closingTimer=setTimeout(this.close.bind(this,t),500))})),s.addEventListener("mouseenter",(t=>{s.closingTimer&&clearTimeout(s.closingTimer)})),s.addEventListener("wheel",(function(t){const e=parseInt(s.style.top);return s.style.top=(e+.1*t.deltaY).toFixed()+"px",t.preventDefault(),!0}),!0);let i=document;e.event&&(i=e.event.target.ownerDocument),i||(i=document),i.body.appendChild(s);let o=e.left||0,n=e.top||0;if(e.event)if("MouseEvent"!==e.event.constructor.name&&"PointerEvent"!==e.event.constructor.name&&"CustomEvent"!==e.event.constructor.name)console.warn("Event passed to ContextMenu is not of type MouseEvent"),e.event=void 0;else{if(o=e.event.pageX-10,n=e.event.pageY-10,e.title&&(n-=20),e.parentMenu){const t=e.parentMenu.root.getBoundingClientRect();o=t.left+t.width}const t=document.body.getBoundingClientRect(),i=s.getBoundingClientRect();o>t.width-i.width-10&&(o=t.width-i.width-10),n>t.height-i.height-10&&(n=t.height-i.height-10)}s.style.left=o+"px",s.style.top=n+"px"}close(t,e){this.root.parentNode&&this.root.parentNode.removeChild(this.root),this.parentMenu&&!e&&(this.parentMenu.lock=!1,this.parentMenu.current_submenu=void 0,void 0===t?this.parentMenu.close():t&&!i.LiteGUI.isCursorOverElement(t,this.parentMenu.root)&&i.LiteGUI.trigger(this.parentMenu.root,"mouseleave",t)),this.current_submenu&&this.current_submenu.close(t,!0),this.root.closingTimer&&clearTimeout(this.root.closingTimer)}getTopMenu(){return this.options.parentMenu?this.options.parentMenu.getTopMenu():this}getFirstEvent(){return this.options.parentMenu?this.options.parentMenu.getFirstEvent():this.options.event}addItem(t,e,s){const o=this;this.options=s||{};const n=document.createElement("div");n.className="litemenu-entry submenu";let r=!1;null===e?n.classList.add("separator"):(n.innerHTML=e&&e.title?e.title:t,n.value=e,e&&(e.disabled&&(r=!0,n.classList.add("disabled")),(e.submenu||e.has_submenu)&&n.classList.add("has_submenu")),"function"==typeof e?(n.dataset.value=t,n.onclick=e):n.dataset.value=e),this.root.appendChild(n);const l=function(t){const e=t.target,n=e.value;let r=!0;if(o.current_submenu&&o.current_submenu.close(t),null==s?void 0:s.callback){!0===s.callback.call(o,n,s,t)&&(r=!1)}if(n){if(n.callback&&!(null==s?void 0:s.ignore_item_callbacks)&&!0!==n.disabled){!0===n.callback.call(e,n,s,t,o)&&(r=!1)}if(n.submenu){if(!n.submenu.options)throw"ContextMenu submenu needs options";new i.LiteGUI.ContextMenu(n.submenu.options,{callback:n.submenu.callback,event:t,parentMenu:o,ignore_item_callbacks:n.submenu.ignore_item_callbacks,title:n.submenu.title,autoopen:null==s?void 0:s.autoopen});r=!1}}r&&!o.lock&&o.close(t,!0)},a=function(t){const e=t.target,s=e.value;s&&s.has_submenu&&l.call(e,t)};return r||n.addEventListener("click",l.bind(n)),(null==s?void 0:s.autoopen)&&n.addEventListener("mouseenter",a.bind(n)),n}};e.Checkbox=class{constructor(t,e){this.value=t;const s=this.root=document.createElement("span");s.className="litecheckbox inputfield",s.dataset.value=t.toString();const i=this.element=document.createElement("span");i.className="fixed flag checkbox "+(t?"on":"off"),s.appendChild(i),s.addEventListener("click",this.onClick.bind(this)),this.onChange=e}setValue(t){if(this.value===t||!this.root||!this.element)return;if(this.root.dataset.value==t.toString())return;this.root.dataset.value=t.toString(),t?(this.element.classList.remove("off"),this.element.classList.add("on")):(this.element.classList.remove("on"),this.element.classList.add("off"));this.value;this.value=t,this.onChange()}getValue(){return"true"==this.root.dataset.value}onClick(){this.setValue("true"!=this.root.dataset.value)}};e.LiteBox=class{constructor(t,e){this.stopPropagation=!1;const s=document.createElement("span");this.root=s,s.liteBox=this,s.className="listbox "+(t?"listopen":"listclosed"),s.innerHTML=t?"&#9660;":"&#9658;",s.dataset.value=t?"open":"closed",s.onclick=this.onMouseClic.bind(this),s.onchange=e,s.setEmpty=function(t){t?this.classList.add("empty"):this.classList.remove("empty")},s.expand=function(){this.setValue(!0)},s.collapse=function(){this.setValue(!1)}}onMouseClic(t){var e;t.target;this.setValue("open"!=(null===(e=this.root)||void 0===e?void 0:e.dataset.value)),t.stopPropagation&&t.stopPropagation()}setValue(t){try{"click"==t.type&&(t="open"!=this.root.dataset.value)}catch(t){}this.root&&this.root.dataset.value!=(t?"open":"closed")&&(t?(this.root.dataset.value="open",this.root.innerHTML="&#9660;",this.root.classList.add("listopen"),this.root.classList.remove("listclosed")):(this.root.dataset.value="closed",this.root.innerHTML="&#9658;",this.root.classList.remove("listopen"),this.root.classList.add("listclosed")),this.root.onchange&&this.root.onchange(new Event("change")))}getValue(){var t;return null===(t=this.root)||void 0===t?void 0:t.dataset.value}setEmpty(t){t&&(this.root=void 0)}};e.List=class{constructor(t,e,s){var o;s=s||{};const n=this.root=document.createElement("ul");n.id=t,n.className="litelist";const r=this;this.callback=s.callback;const l=function(t){const e=t.target,s=n.querySelectorAll(".list-item.selected");for(let t=0;t<s.length;++t)s[t].classList.remove("selected");e.classList.add("selected"),i.LiteGUI.trigger(r.root,"wchanged",e),r.callback&&r.callback(e.data)};for(const t in e){const s=document.createElement("li");s.className="list-item",s.data=e[t],s.dataset.value=e[t];let i="";"string"==typeof e[t]?i=e[t]+"<span class='arrow'></span>":(i=(e[t].name||e[t].title||"")+"<span class='arrow'></span>",e[t].id&&(s.id=e[t].id)),s.innerHTML=i,s.addEventListener("click",l.bind(s)),n.appendChild(s)}s.parent&&(s.parent.root?null===(o=s.parent.root)||void 0===o||o.appendChild(n):console.log("trying to add a widget with out a parent with root"))}getSelectedItem(){return this.root.querySelector(".list-item.selected")}setSelectedItem(t){const e=this.root.querySelectorAll(".list-item");for(let s=0;s<e.length;s++){const o=e[s];if(o.data.id==t){i.LiteGUI.trigger(o,"click");break}}}};e.Slider=class{constructor(t,e){this.mouseMoveBind=this.onMouseMove.bind(this),this.mouseUpBind=this.onMouseUp.bind(this),this.options=e||{};const s=this.root=document.createElement("div");this.value=t,s.className="liteslider",this.doc_binded=s.ownerDocument,this.root.addEventListener("mousedown",this.onMouseDown.bind(this)),this.setValue(t)}setFromX(t){const e=this.root.getBoundingClientRect();if(!e)return;const s=t/e.width,i=this.options.min||0,o=(this.options.max||1)-i;this.setValue(o*s+i)}onMouseDown(t){const e=t;let s,i;e.offsetX?(s=e.offsetX,i=e.offsetY):e.layerX&&(s=e.layerX,i=e.layerY),this.setFromX(s),this.doc_binded&&(this.root.addEventListener("mousemove",this.mouseMoveBind,!1),this.root.addEventListener("mouseup",this.mouseUpBind,!1),t.preventDefault(),t.stopPropagation())}onMouseMove(t){const e=this.root.getBoundingClientRect();if(!e)return;const s=(void 0===t.x?t.pageX:t.x)-e.left;return this.setFromX(s),"function"==typeof t.preventDefault&&t.preventDefault(),!1}onMouseUp(t){return!!this.doc_binded&&(this.root.removeEventListener("mousemove",this.mouseMoveBind,!1),this.root.removeEventListener("mouseup",this.mouseUpBind,!1),"function"==typeof t.preventDefault&&t.preventDefault(),!1)}setValue(t,e=!1){const s=this.options.min||0,o=this.options.max||1;t<s?t=s:t>o&&(t=o);const n=(t-s)/(o-s),r=(100*n).toFixed(1)+"%",l=(100*n+2).toFixed(1)+"%";this.root.style.background="linear-gradient(to right, #999 "+r+", #FC0 "+l+", #333 "+l+")",t!=this.value&&(this.value=t,e||(i.LiteGUI.trigger(this.root,"change",t),this.onChange&&this.onChange(t)))}};e.LineEditor=class{constructor(t,e){var s;this.mouseMoveBind=this.onmousemove.bind(this),this.mouseUpBind=this.onmouseup.bind(this),this.options=e||{};const i=this.root=document.createElement("div");i.className="curve "+(this.options.extraclass?this.options.extraclass:""),i.style.minHeight="50px",i.style.width=(null===(s=this.options.width)||void 0===s?void 0:s.toString())||"100%",i.bgcolor=this.options.bgcolor||"#222",i.pointscolor=this.options.pointscolor||"#5AF",i.linecolor=this.options.linecolor||"#444",i.valuesArray=t,i.xrange=this.options.xrange||[0,1],i.yrange=this.options.xrange||[0,1],i.defaulty=null!=this.options.defaulty?this.options.defaulty:.5,i.no_trespassing=this.options.no_trespassing||!1,i.show_samples=this.options.show_samples||0,i.options=e,i.style.minWidth="50px",i.style.minHeight="20px";const o=this.canvas=document.createElement("canvas");o.width=this.options.width||200,o.height=this.options.height||50,i.appendChild(o),i.canvas=o,i.addEventListener("mousedown",this.onmousedown.bind(this)),this.selected=-1,this.last_mouse=[0,0],this.redraw()}getValueAt(t){if(t<this.root.xrange[0]||t>this.root.xrange[1])return this.root.defaulty;let e,s=[this.root.xrange[0],this.root.defaulty],i=0;for(let o=0;o<this.root.valuesArray.length;o++){if(e=this.root.valuesArray[o],t==e[0])return e[1];if(t<e[0])return i=(t-s[0])/(e[0]-s[0]),s[1]*(1-i)+e[1]*i;s=e}return e=[this.root.xrange[1],this.root.defaulty],i=(t-s[0])/(e[0]-s[0]),s[1]*(1-i)+e[1]*i}resample(t){const e=[],s=(this.root.xrange[1]-this.root.xrange[0])/t;for(let t=this.root.xrange[0];t<=this.root.xrange[1];t+=s)e.push(this.getValueAt(t));return e}addValue(t){for(let e=0;e<this.root.valuesArray.length;e++){if(!(this.root.valuesArray[e][0]<t[0]))return this.root.valuesArray.splice(e,0,t),void this.redraw()}this.root.valuesArray.push(t),this.redraw()}convert(t){return[this.canvas.width*((this.root.xrange[1]-this.root.xrange[0])*t[0]+this.root.xrange[0]),this.canvas.height*((this.root.yrange[1]-this.root.yrange[0])*t[1]+this.root.yrange[0])]}unconvert(t){return[(t[0]/this.canvas.width-this.root.xrange[0])/(this.root.xrange[1]-this.root.xrange[0]),(t[1]/this.canvas.height-this.root.yrange[0])/(this.root.yrange[1]-this.root.yrange[0])]}redraw(){if(!this.canvas||!this.canvas.parentNode)return;const t=this.canvas.getBoundingClientRect();t&&this.canvas.width!=t.width&&t.width&&t.width<1e3&&(this.canvas.width=t.width),t&&this.canvas.height!=t.height&&t.height&&t.height<1e3&&(this.canvas.height=t.height);const e=this.canvas.getContext("2d");if(!e)return;e.setTransform(1,0,0,1,0,0),e.translate(0,this.canvas.height),e.scale(1,-1),e.fillStyle=this.root.bgcolor,e.fillRect(0,0,this.canvas.width,this.canvas.height),e.strokeStyle=this.root.linecolor,e.beginPath();let s=this.convert([this.root.xrange[0],this.root.defaulty]);e.moveTo(s[0],s[1]);for(const t in this.root.valuesArray){const i=this.root.valuesArray[parseInt(t)];s=this.convert(i),e.lineTo(s[0],s[1])}s=this.convert([this.root.xrange[1],this.root.defaulty]),e.lineTo(s[0],s[1]),e.stroke();for(let t=0;t<this.root.valuesArray.length;t+=1){const i=this.root.valuesArray[t];s=this.convert(i),this.selected==t?e.fillStyle="white":e.fillStyle=this.root.pointscolor,e.beginPath(),e.arc(s[0],s[1],this.selected==t?4:2,0,2*Math.PI),e.fill()}if(this.root.show_samples){const t=this.resample(this.root.show_samples);e.fillStyle="#888";for(let i=0;i<t.length;i+=1){const o=[i*((this.root.xrange[1]-this.root.xrange[0])/this.root.show_samples)+this.root.xrange[0],t[i]];s=this.convert(o),e.beginPath(),e.arc(s[0],s[1],2,0,2*Math.PI),e.fill()}}}onmousedown(t){document.addEventListener("mousemove",this.mouseMoveBind),document.addEventListener("mouseup",this.mouseUpBind);const e=this.canvas.getBoundingClientRect(),s=t.clientX-e.left,i=t.clientY-e.top;if(this.selected=this.computeSelected(s,this.canvas.height-i),-1==this.selected){const t=this.unconvert([s,this.canvas.height-i]);this.root.valuesArray.push(t),this.sortValues(),this.selected=this.root.valuesArray.indexOf(t)}this.last_mouse=[s,i],this.redraw(),t.preventDefault(),t.stopPropagation()}onmousemove(t){console.log("onmousemove");const e=this.canvas.getBoundingClientRect();let s=t.clientX-e.left,i=t.clientY-e.top;if(s<0?s=0:s>this.canvas.width&&(s=this.canvas.width),i<0?i=0:i>this.canvas.height&&(i=this.canvas.height),-1!=this.selected&&this.distance([t.clientX-e.left,t.clientY-e.top],[s,i])>.5*this.canvas.height)return this.root.valuesArray.splice(this.selected,1),void this.onmouseup(t);const o=this.last_mouse[0]-s,n=this.last_mouse[1]-i,r=this.unconvert([-o,n]);if(-1!=this.selected){let t=this.root.xrange[0],e=this.root.xrange[1];this.root.no_trespassing&&(this.selected>0&&(t=this.root.valuesArray[this.selected-1][0]),this.selected<this.root.valuesArray.length-1&&(e=this.root.valuesArray[this.selected+1][0]));const s=this.root.valuesArray[this.selected];s[0]+=r[0],s[1]+=r[1],s[0]<t?s[0]=t:s[0]>e&&(s[0]=e),s[1]<this.root.yrange[0]?s[1]=this.root.yrange[0]:s[1]>this.root.yrange[1]&&(s[1]=this.root.yrange[1])}this.sortValues(),this.redraw(),this.last_mouse[0]=s,this.last_mouse[1]=i,this.onchange(),t.preventDefault(),t.stopPropagation()}onmouseup(t){this.selected=-1,this.redraw(),document.removeEventListener("mousemove",this.mouseMoveBind),document.removeEventListener("mouseup",this.mouseUpBind),this.onchange(),t.preventDefault(),t.stopPropagation()}onresize(t){this.redraw()}onchange(){this.options.callback?this.options.callback.call(this.root,this.root.value):i.LiteGUI.trigger(this.root,"change")}distance(t,e){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))}computeSelected(t,e){let s=1e5;let i=-1;for(let o=0;o<this.root.valuesArray.length;o++){const n=this.root.valuesArray[o],r=this.convert(n),l=this.distance([t,e],r);l<s&&l<8&&(s=l,i=o)}return i}sortValues(){let t=null;-1!=this.selected&&(t=this.root.valuesArray[this.selected]),this.root.valuesArray.sort(((t,e)=>t[0]-e[0])),t&&(this.selected=this.root.valuesArray.indexOf(t))}};e.ComplexList=class{constructor(t){this.options=t||{},this.root=document.createElement("div"),this.root.className="litecomplexlist",this.item_code=this.options.item_code||"<div class='listitem'><span class='tick'><span>"+i.special_codes.tick+"</span></span><span class='title'></span><button class='trash'>"+i.special_codes.close+"</button></div>",this.options.height&&(this.root.style.height=i.LiteGUI.sizeToCSS(this.options.height)),this.selected=null,this.onItemSelected=null,this.onItemToggled=null,this.onItemSelected=t.onItemSelected,this.onItemToggled=t.onItemToggled,this.onItemRemoved=t.onItemRemoved}addTitle(t){const e=i.LiteGUI.createElement("div",".listtitle",t);return this.root.appendChild(e),e}addHTML(t,e){const s=i.LiteGUI.createElement("div",".listtext",t);return e&&s.addEventListener("mousedown",e),this.root.appendChild(s),s}clear(){this.root.innerHTML=""}addItem(t,e,s,o){const n=e||t.content||t.name,r=i.LiteGUI.createListItem(this.item_code,{".title":n});r.item=t,s&&r.classList.add("enabled"),o||(r.querySelector(".trash").style.display="none");const l=this;return r.addEventListener("mousedown",(e=>{e.preventDefault(),r.setSelected(!0),l.onItemSelected&&l.onItemSelected(t,r)})),r.querySelector(".tick").addEventListener("mousedown",(e=>{e.preventDefault(),r.classList.toggle("enabled"),l.onItemToggled&&l.onItemToggled(t,r,r.classList.contains("enabled"))})),r.querySelector(".trash").addEventListener("mousedown",(e=>{e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),r.remove(),l.onItemRemoved&&l.onItemRemoved(t,r)})),r.setContent=function(t,e){e?r.querySelector(".title").innerHTML=t:r.querySelector(".title").innerText=t},r.toggleEnabled=function(){r.classList.toggle("enabled")},r.setSelected=function(t){i.LiteGUI.removeClass(l.root,"selected"),t?this.classList.add("selected"):this.classList.remove("selected"),l.selected=r.item},r.show=function(){this.style.display=""},r.hide=function(){this.style.display="none"},this.root.appendChild(r),r}}}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var s=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](s,s.exports,__webpack_require__),s.exports}var __webpack_exports__=__webpack_require__(776);LiteGUI=__webpack_exports__.LiteGUI})();
var LiteGUI;(()=>{"use strict";var __webpack_modules__={423:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Split=e.Area=void 0;const i=s(776);class n{constructor(t,e){if(t&&t.constructor===String||e){const s=t;(t=e||{}).id=s,console.warn("LiteGUI.Area legacy parameter, use options as first parameter instead of id.")}t=t||{};const s=document.createElement("div");s.className="litearea",t.id&&(s.id=t.id),t.className&&(s.className+=" "+t.className),this.root=s,this.root.litearea=this;let n=t.width||"100%",o=t.height||"100%";n<0&&(n="calc( 100% - "+Math.abs(n)+"px)"),o<0&&(o="calc( 100% - "+Math.abs(o)+"px)"),s.style.width=n,s.style.height=o,this.options=t;const r=this;this._computed_size=[this.root.offsetWidth,this.root.offsetHeight];const l=document.createElement("div");t.content_id&&(l.id=t.content_id),l.className="liteareacontent",l.style.width="100%",l.style.height="100%",this.root.appendChild(l),this.content=l,this.split_direction="none",this.sections=[],t.autoresize&&i.LiteGUI.bind(i.LiteGUI,"resized",(()=>{r.onResize()}))}getSection(t){return t=t||0,this.sections.length>t?this.sections[t]:null}onResize(t){const e=[this.root.offsetWidth,this.root.offsetHeight];t&&this._computed_size&&e[0]==this._computed_size[0]&&e[1]==this._computed_size[1]||this.sendResizeEvent(t)}sendResizeEvent(t){if(this.sections.length)for(const e in this.sections){this.sections[e].onResize(t)}else for(let t=0;t<this.root.childNodes.length;t++){const e=this.root.childNodes[t];e.litearea?e.litearea.onResize():i.LiteGUI.trigger(e,"resize")}i.LiteGUI.sizeToCSS(),this.onresize&&this.onresize()}get getWidth(){return this.root.offsetWidth}get getHeight(){return this.root.offsetHeight}get isVisible(){return"none"!=this.root.style.display}adjustHeight(){if(!this.root.parentNode)return void console.error("Cannot adjust height of LiteGUI.Area without parent");this.root.parentNode.offsetHeight;const t=this.root.getClientRects()[0].top;this.root.style.height="calc( 100% - "+t+"px )"}split(t,e,s){if(!t||t.constructor!==String)throw"First parameter must be a string: 'vertical' or 'horizontal'";if(e||(e=["50%",null]),"vertical"!=t&&"horizontal"!=t)throw"First parameter must be a string: 'vertical' or 'horizontal'";if(this.sections.length)throw"cannot split twice";const i=new n({content_id:this.content.id});i.root.style.display="inline-block";const o=new n;o.root.style.display="inline-block";let r,l="",a=null;if(s&&(l=" - "+(n.splitbar_size+2)+"px",a=document.createElement("div"),a.className="litesplitbar "+t,"vertical"==t?a.style.height=n.splitbar_size+"px":a.style.width=n.splitbar_size+"px",this.splitbar=a,a.addEventListener("mousedown",(function(t){const e=c.root.ownerDocument;e.addEventListener("mousemove",h),e.addEventListener("mouseup",u),d[0]=t.pageX,d[1]=t.pageY,t.stopPropagation(),t.preventDefault()}))),e=e||["50%",null],"vertical"==t)if(i.root.style.width="100%",o.root.style.width="100%",null==e[0]){let t=e[1];"number"==typeof t&&(t=e[1]+"px"),i.root.style.height="-moz-calc( 100% - "+t+l+" )",i.root.style.height="-webkit-calc( 100% - "+t+l+" )",i.root.style.height="calc( 100% - "+t+l+" )",o.root.style.height=t,o.size=t,r=i}else if(null==e[1]){let t=e[0];"number"==typeof t&&(t=e[0]+"px"),i.root.style.height=t,i.size=t,o.root.style.height="-moz-calc( 100% - "+t+l+" )",o.root.style.height="-webkit-calc( 100% - "+t+l+" )",o.root.style.height="calc( 100% - "+t+l+" )",r=o}else{let t=e[0];"number"==typeof t&&(t=e[0]+"px");let s=e[1];"number"==typeof s&&(s=e[1]+"px"),i.root.style.height=t,i.size=t,o.root.style.height=s,o.size=s}else if(i.root.style.height="100%",o.root.style.height="100%",null==e[0]){let t=e[1];"number"==typeof t&&(t=e[1]+"px"),i.root.style.width="-moz-calc( 100% - "+t+l+" )",i.root.style.width="-webkit-calc( 100% - "+t+l+" )",i.root.style.width="calc( 100% - "+t+l+" )",o.root.style.width=t,o.size=e[1],r=i}else if(null==e[1]){let t=e[0];"number"==typeof t&&(t=e[0]+"px"),i.root.style.width=t,i.size=t,o.root.style.width="-moz-calc( 100% - "+t+l+" )",o.root.style.width="-webkit-calc( 100% - "+t+l+" )",o.root.style.width="calc( 100% - "+t+l+" )",r=o}else{let t=e[0];"number"==typeof t&&(t=e[0]+"px");let s=e[1];"number"==typeof s&&(s=e[1]+"px"),i.root.style.width=t,i.size=t,o.root.style.width=s,o.size=s}i.root.removeChild(i.content),i.root.appendChild(this.content),i.content=this.content,this.root.appendChild(i.root),a&&this.root.appendChild(a),this.root.appendChild(o.root),this.sections=[i,o],this.dynamic_section=r,this.direction=t;const c=this,d=[0,0];function h(e){"horizontal"==t?d[0]!=e.pageX&&c.moveSplit(d[0]-e.pageX):"vertical"==t&&d[1]!=e.pageY&&c.moveSplit(e.pageY-d[1]),d[0]=e.pageX,d[1]=e.pageY,e.stopPropagation(),e.preventDefault(),c.options.immediateResize&&c.onResize()}function u(t){const e=c.root.ownerDocument;e.removeEventListener("mousemove",h),e.removeEventListener("mouseup",u),c.onResize()}}hide(){this.root.style.display="none"}show(){this.root.style.display="block"}showSection(t){let e=this.sections[t],s=0;if(!e||"none"==e.root.style.display){s="horizontal"==this.direction?e.root.style.width:e.root.style.height,-1!=s.indexOf("calc")&&(s="50%");for(const i in this.sections)e=this.sections[i],i==t?e.root.style.display="inline-block":"horizontal"==this.direction?e.root.style.width="calc( 100% - "+s+" - 5px)":e.root.style.height="calc( 100% - "+s+" - 5px)";this.splitbar&&(this.splitbar.style.display="inline-block"),this.sendResizeEvent()}}hideSection(t){for(const e in this.sections){const s=this.sections[e];e==t?s.root.style.display="none":"horizontal"==this.direction?s.root.style.width="100%":s.root.style.height="100%"}this.splitbar&&(this.splitbar.style.display="none"),this.sendResizeEvent()}moveSplit(t){if(!this.sections)return;const e=this.sections[0],s=this.sections[1],o=" - "+n.splitbar_size+"px",r=this.options.minSplitSize||10;if("horizontal"==this.direction)if(this.dynamic_section==e){let i=s.root.offsetWidth+t;i<r&&(i=r),e.root.style.width="-moz-calc( 100% - "+i+"px "+o+" )",e.root.style.width="-webkit-calc( 100% - "+i+"px "+o+" )",e.root.style.width="calc( 100% - "+i+"px "+o+" )",s.root.style.width=i+"px"}else{let i=e.root.offsetWidth-t;i<r&&(i=r),s.root.style.width="-moz-calc( 100% - "+i+"px "+o+" )",s.root.style.width="-webkit-calc( 100% - "+i+"px "+o+" )",s.root.style.width="calc( 100% - "+i+"px "+o+" )",e.root.style.width=i+"px"}else if("vertical"==this.direction)if(this.dynamic_section==e){let i=s.root.offsetHeight-t;i<r&&(i=r),e.root.style.height="-moz-calc( 100% - "+i+"px "+o+" )",e.root.style.height="-webkit-calc( 100% - "+i+"px "+o+" )",e.root.style.height="calc( 100% - "+i+"px "+o+" )",s.root.style.height=i+"px"}else{let i=e.root.offsetHeight+t;i<r&&(i=r),s.root.style.height="-moz-calc( 100% - "+i+"px "+o+" )",s.root.style.height="-webkit-calc( 100% - "+i+"px "+o+" )",s.root.style.height="calc( 100% - "+i+"px "+o+" )",e.root.style.height=i+"px"}i.LiteGUI.trigger(this.root,"split_moved");const l=this.root.querySelectorAll(".litearea");for(let t=0;t<l.length;++t)i.LiteGUI.trigger(l[t],"split_moved")}addEventListener(t,e,s,i){return this.root.addEventListener(t,e,s,i)}setAreaSize(t,e){const s=this.sections[1],i=" - "+n.splitbar_size+"px";s.root.style.width="-moz-calc( 100% - "+e+i+" )",s.root.style.width="-webkit-calc( 100% - "+e+i+" )",s.root.style.width="calc( 100% - "+e+i+" )"}merge(t){if(0==this.sections.length)throw"not splitted";const e=this.sections[t||0];this.root.appendChild(e.content),this.content=e.content,this.root.removeChild(this.sections[0].root),this.root.removeChild(this.sections[1].root),this.sections=[],this._computed_size=[],this.onResize()}add(t){let e=t;if("string"==typeof e){const t=document.createElement("div");t.innerHTML=e,e=t}this.content.appendChild(e.root||e)}query(t){return this.root.querySelector(t)}}e.Area=n,n.VERTICAL="vertical",n.HORIZONTAL="horizontal",n.splitbar_size=4;e.Split=class{constructor(t,e,s){if(e=e||{},t&&t.constructor===String){const i=t;t=e,(e=s||{}).id=i,console.warn("LiteGUI.Split legacy parameter, use sections as first parameter instead of id.")}const i=document.createElement("div");this.root=i,e.id&&(i.id=e.id),i.className="litesplit "+(e.vertical?"vsplit":"hsplit"),this.sections=[];for(const s in t){const n=document.createElement("div");n.className="split-section split"+s,"number"==typeof t[s]?e.vertical?n.style.height=t[s].toFixed(1)+"%":n.style.width=t[s].toFixed(1)+"%":"string"==typeof t[s]?e.vertical?n.style.height=t[s]:n.style.width=t[s]:(t[s].id&&(n.id=t[s].id),e.vertical?n.style.height="number"==typeof t[s].height?t[s].height.toFixed(1)+"%":t[s].height:n.style.width="number"==typeof t[s].width?t[s].width.toFixed(1)+"%":t[s].width),n.add=function(t){this.appendChild(t.root||t)},this.sections.push(n),i.appendChild(n)}e.parent&&(e.parent.root?e.parent.root.appendChild(i):e.parent.appendChild(i))}getSection(t){return this.sections[t]}}},688:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Console=void 0;e.Console=class{constructor(t){var e;this.options=t||{},this.root=document.createElement("div"),this.root.className="liteconsole",this.root.innerHTML="<div class='log'></div><div class='foot'><input type='text'/></div>",this.log_element=this.root.querySelector(".log"),this.input=this.root.querySelector("input"),null===(e=this.input)||void 0===e||e.addEventListener("keydown",this.processKeyDown.bind(this)),this._prompt=t.prompt||"]",this.history=[],this._history_offset=0}processKeyDown(t){if(!this._input_blocked&&this.input){if("enter"==t.key){const t=this.input.value.trim();this.addMessage(this._prompt+t,"me",!0),this.input.value="",this.history.push(t),this.history.length>10&&this.history.shift(),this.onProcessCommand(t),this._history_offset=0}else if("up arrow"==t.key||"down arrow"==t.key){this._history_offset+="up arrow"==t.key?-1:1,this._history_offset>0?this._history_offset=0:this._history_offset<-this.history.length&&(this._history_offset=-this.history.length);const e=this.history.length+this._history_offset;if(e<0)return;e>=this.history.length?this.input.value="":this.input.value=this.history[e]}else{if("tab"!=t.key)return;this.input.value=this.onAutocomplete(this.input.value)}t.preventDefault(),t.stopPropagation()}}addMessage(t,e,s=!0){const i=this.log_element;let n;if(t&&t.constructor===Array)for(let e=0;e<t.length;++e)o(t[e]);else t&&t.constructor===Object?o(JSON.stringify(t,null,"")):o(t);function o(t){n=document.createElement("pre"),s?n.innerText=t:n.innerHTML=t,n.className="msg",e&&(n.className+=" "+e),i.appendChild(n),i.children.length>1e3&&i.removeChild(i.children[0])}if(this.log_element.scrollTop=1e6,n)return n.update=function(t){this.innerHTML=t},n}log(){const t=Array.prototype.slice.call(arguments).join(",");return this.addMessage(t,"msglog")}warn(){const t=Array.prototype.slice.call(arguments).join(",");return this.addMessage(t,"msgwarn")}error(){const t=Array.prototype.slice.call(arguments).join(",");return this.addMessage(t,"msgerror")}clear(){this.log_element&&(this.log_element.innerHTML="")}onAutocomplete(t){return t}onProcessCommand(t){}}},776:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.dataURItoBlob=e.beautifyJSON=e.beautifyCode=e.verifyEscapeHtmlEntities=e.purgeElement=e.LiteGUI=e.Core=e.special_codes=e.escapeHtmlEntities=void 0;const i=s(423),n=s(684),o=s(797),r=s(673),l=s(649),a=s(360),c=s(688),d=s(526),h=s(683),u=s(773),p=s(900);var g;e.escapeHtmlEntities=void 0,function(t){t.close="&#10005;",t.navicon="&#9776;",t.refresh="&#8634;",t.gear="&#9881;",t.open_folder="&#128194;",t.download="&#11123;",t.tick="&#10003;",t.trash="&#128465;"}(g=e.special_codes||(e.special_codes={}));class m{constructor(){this.root=null,this.content=null,this.container=null,this.panels={},this.windows=[],this.undo_steps=[],this.modalbg_div=null,this.mainmenu=null,this.Area=i.Area,this.Split=i.Split,this.Menubar=o.Menubar,this.Dialog=n.Dialog,this.Panel=r.Panel,this.widget=a.widget,this.Tabs=l.Tabs,this.Tree=d.Tree,this.Console=c.Console,this.Inspector=h.Inspector,this.Dragger=u.Dragger,this.LineEditor=a.LineEditor,this.Slider=a.Slider,this.Table=p.Table,this.special_codes=g,f()}init(t){if(t=t||{},this.container=null,t.container&&(this.container=document.getElementById(t.container)),this.container||(this.container=document.body),t.wrapped){const t=document.createElement("div");t.style.position="relative",t.style.overflow="hidden",this.root=t,this.container.appendChild(t);const e=document.createElement("div");this.content=e,this.root.appendChild(e),this.root.classList.contains("fullscreen")&&window.addEventListener("resize",(t=>{this.maximizeWindow()}))}else this.root=this.content=this.container;t.width&&t.height&&this.setWindowSize(t.width,t.height),this.root.className="litegui-wrap fullscreen",this.content.className="litegui-maincontent";const e=this.modalbg_div=document.createElement("div");this.modalbg_div.className="litemodalbg",this.root.appendChild(this.modalbg_div),e.style.display="none",t.menubar&&this.createMenubar(),t.gui_callback&&t.gui_callback(),window.addEventListener("beforeunload",(t=>{for(let t=0;t<this.windows.length;++t)this.windows[t].close();this.windows=[]}))}trigger(t,e,s){const i=new CustomEvent(e,{detail:s});return t.dispatchEvent?t.dispatchEvent(i):t.__events&&t.__events.dispatchEvent(i),i}bind(t,e,s){if(!t)throw"Cannot bind to null";if(!e)throw"Event bind missing";if(!s)throw"Bind callback missing";if(t.constructor===String&&(t=document.querySelectorAll(t)),t.constructor===NodeList||t.constructor===Array)for(let e=0;e<t.length;++e)i(t[e]);else i(t);function i(t){if(t.addEventListener)t.addEventListener(e,s);else if(t.__events)t.__events.addEventListener(e,s);else{const i=document.createElement("span");i.widget=t,Object.defineProperty(t,"__events",{enumerable:!1,configurable:!1,writable:!1,value:i}),t.__events.addEventListener(e,s)}}}unbind(t,e,s){t.removeEventListener?t.removeEventListener(e,s):t.__events&&t.__events.removeEventListener&&t.__events.removeEventListener(e,s)}removeClass(t,e,s){s||(s=e,e="."+e);const i=(t||document).querySelectorAll(e);for(let t=0;t<i.length;++t)i[t].classList.remove(s)}add(t){var e;null===(e=this.content)||void 0===e||e.appendChild(t.root||t)}remove(t){if(t){if(t.constructor===String){const e=document.querySelectorAll(t);for(let t=0;t<e.length;++t){const s=e[t];s&&s.parentNode&&s.parentNode.removeChild(s)}}if(t.constructor===Array||t.constructor===NodeList)for(let e=0;e<t.length;++e)this.remove(t[e]);else t.root&&t.root.parentNode?t.root.parentNode.removeChild(t.root):t.parentNode&&t.parentNode.removeChild(t)}}getById(t){return document.getElementById(t)}createMenubar(){this.menubar=new e.LiteGUI.Menubar("mainmenubar"),this.add(this.menubar)}ContextMenu(t,e){return new a.ContextMenu(e,t)}setWindowSize(t,s){var i,n,o,r;const l=null===(i=this.root)||void 0===i?void 0:i.style;if(t&&s)l.width=t+"px",l.height=s+"px",l.boxShadow="0 0 4px black",null===(n=this.root)||void 0===n||n.classList.remove("fullscreen");else{if(null===(o=this.root)||void 0===o?void 0:o.classList.contains("fullscreen"))return;null===(r=this.root)||void 0===r||r.classList.add("fullscreen"),l.width="100%",l.height="100%",l.boxShadow="0 0 0"}e.LiteGUI.trigger(e.LiteGUI,"resized",void 0)}maximizeWindow(){this.setWindowSize(void 0,void 0)}setCursor(t){this.root.style.cursor=t}isCursorOverElement(t,e){const s=t.pageX,i=t.pageY,n=e.getBoundingClientRect();return!!n&&(i>n.top&&i<n.top+n.height&&s>n.left&&s<n.left+n.width)}getRect(t){return t.getBoundingClientRect()}toClipboard(t,e){t&&t.constructor!==String&&(t=JSON.stringify(t));let s=null,i=!1;if(!e)try{document.queryCommandSupported("copy");s=document.createElement("input"),s.type="text",s.style.opacity=(0).toString(),s.value=t,document.body.appendChild(s),s.select(),i=document.execCommand("copy"),console.log(i?"saved to clipboard":"problem saving to clipboard"),document.body.removeChild(s)}catch(t){s&&document.body.removeChild(s),console.warn("Oops, unable to copy using the true clipboard")}try{this._safe_cliboard=null,localStorage.setItem("litegui_clipboard",t)}catch(e){this._safe_cliboard=t,console.warn("cliboard quota excedeed")}}getLocalClipboard(){let t=localStorage.getItem("litegui_clipboard");return!t&&this._safe_cliboard&&(t=this._safe_cliboard),t?"{"==t[0]?JSON.parse(t):t:null}addCSS(t){if(t){if(t.constructor===String){const e=document.createElement("style");return e.type="text/css",e.innerHTML=t,void document.getElementsByTagName("head")[0].appendChild(e)}for(const e in t)document.body.style[parseInt(e)]=t[e]}}requireCSS(t,e){for("string"==typeof t&&(t=[t]);t.length;){const s=document.createElement("link");s.rel="stylesheet",s.type="text/css",s.href=t.shift(1),s.media="all";document.getElementsByTagName("head")[0].appendChild(s),0==t.length&&(s.onload=e)}}request(t){let s=t.dataType||"text";"json"==s||"xml"==s?s="text":"binary"==s&&(s="arraybuffer",t.mimeType="application/octet-stream");const i=new XMLHttpRequest;i.open(t.data?"POST":"GET",t.url,!0),s&&(i.responseType=s),t.mimeType&&i.overrideMimeType(t.mimeType),t.nocache&&i.setRequestHeader("Cache-Control","no-cache"),i.onload=function(s){let n=this.response;if(200!=this.status){const s="Error "+this.status;return t.error&&t.error(s),void e.LiteGUI.trigger(i,"fail",this.status)}if("json"==t.dataType)try{n=JSON.parse(n)}catch(e){if(!t.error)throw e;t.error(e)}else if("xml"==t.dataType)try{n=(new DOMParser).parseFromString(n,"text/xml")}catch(e){if(!t.error)throw e;t.error(e)}t.success&&t.success.call(this,n,this)},i.onerror=function(e){t.error&&t.error(e)};const n=new FormData;if(t.data)for(const e in t.data)n.append(e,t.data[e]);return i.send(n),i}requestText(t,e,s){return this.request({url:t,dataType:"text",success:e,error:s})}requestJSON(t,e,s){return this.request({url:t,dataType:"json",success:e,error:s})}requestBinary(t,e,s){return this.request({url:t,dataType:"binary",success:e,error:s})}requireScript(t,e,s,i,n){if(!t)throw"invalid URL";t.constructor===String&&(t=[t]);let o=t.length;const r=[],l=function(t,s){o--,r.push(t),o?i&&i(t.original_src,t.num):e&&e(r)};for(const e in t){const i=document.createElement("script");i.num=e,i.type="text/javascript",i.src=t[parseInt(e)]+(n?"?version="+n:""),i.original_src=t[parseInt(e)],i.async=!1,i.onload=l.bind(void 0,i),s&&(i.onerror=function(t){s(t,this.original_src,this.num)}),document.getElementsByTagName("head")[0].appendChild(i)}}requireScriptSerial(t,e,s){"string"==typeof t&&(t=[t]);const i=[];!function n(){const o=document.createElement("script");o.type="text/javascript",o.src=t.shift(1),o.onload=function(o){if(t.length)return s&&s(t[0],t.length),void n();i.push(this),e&&e(i)},document.getElementsByTagName("head")[0].appendChild(o)}()}newDiv(t,e){return this.createElement("div",t,e,void 0,void 0)}createElement(t,e,s,i,n){const o=document.createElement(t);if(e){const t=e.split(" ");for(let e=0;e<t.length;e++)"."==t[e][0]?o.classList.add(t[e].substr(1)):"#"==t[e][0]?o.id=t[e].substr(1):o.id=t[e]}if(o.root=o,s&&(o.innerHTML=s),o.add=function(t){this.appendChild(t.root||t)},i)if(i.constructor===String)o.setAttribute("style",i);else for(const t in i)o.style[t]=i[parseInt(t)];if(n)for(const t in n)o.addEventListener(t,n[t]);return o}createListItem(t,e,s){let i=document.createElement("span");if(i.innerHTML=t,i=i.childNodes[0],e)for(const t in e){const s=i.querySelector(t);s&&(s.innerText=e[t])}if(s)for(const t in s)i.style[t]=s[t];return i}createButton(t,e,s,i){const n=document.createElement("button");if(n.className="litegui litebutton button",t){const e=t.split(" ");for(let t=0;t<e.length;t++)"."==e[t][0]?n.classList.add(e[t].substr(1)):"#"==e[t][0]?n.id=e[t].substr(1):n.id=e[t]}if(n.root=n,void 0!==e&&(n.innerHTML=e),s&&n.addEventListener("click",s),i)if(i.constructor===String)n.setAttribute("style",i);else for(const t in i)n.style[t]=i[t];return n}getParents(t){const e=[];let s=t.parentElement;for(;null!==s;)t.nodeType===Node.ELEMENT_NODE&&(e.push(t),s=s.parentElement);return e}newWindow(t,e,s,i){i=i||{};const n=window.open("","","width="+e+", height="+s+", location=no, status=no, menubar=no, titlebar=no, fullscreen=yes");n.document.write("<html><head><title>"+t+"</title>");const o=document.querySelectorAll("link[rel='stylesheet'],style");for(let t=0;t<o.length;t++)n.document.write(o[t].outerHTML);if(i.scripts){const t=document.querySelectorAll("script");for(let e=0;e<t.length;e++)t[e].src&&n.document.write(t[e].outerHTML)}const r=i.content||"";return n.document.write("</head><body>"+r+"</body></html>"),n.document.close(),n}showModalBackground(t){this.modalbg_div&&(this.modalbg_div.style.display=t?"block":"none")}showMessage(t,s){(s=s||{}).title=s.title||"Attention",s.content=t,s.close="fade";const i=new e.LiteGUI.Dialog(s);return s.noclose||i.addButton("Close",{close:!0}),i.makeModal(),i}popup(t,s){(s=s||{}).min_height=140,"string"==typeof t&&(t="<p>"+t+"</p>"),s.content=t,s.close="fade";const i=new e.LiteGUI.Dialog(s);return s.noclose||i.addButton("Close",{close:!0}),i.show(),i}alert(t,s){return(s=s||{}).className="alert",s.title=s.title||"Alert",s.width=s.width||280,s.height=s.height||140,"string"==typeof t&&(t="<p>"+t+"</p>"),e.LiteGUI.remove(".litepanel.alert"),e.LiteGUI.showMessage(t,s)}confirm(t,e,s){(s=s||{}).className="alert",s.title=s.title||"Confirm",s.width=s.width||280,"string"==typeof t&&(t="<p>"+t+"</p>"),t+="<button class='litebutton' data-value='yes' style='width:45%; margin-left: 10px'>Yes</button><button class='litebutton' data-value='no' style='width:45%'>No</button>",s.noclose=!0;const i=this.showMessage(t,s);i.content.style.paddingBottom="10px";const n=i.content.querySelectorAll("button"),o=t=>{const s="yes"==t.target.dataset.value;i.close(),e&&e(s)};for(let t=0;t<n.length;t++){n[t].addEventListener("click",o)}return n[0].focus(),i}prompt(t,e,s){(s=s||{}).className="alert",s.title=s.title||"Prompt",s.width=s.width||280,"string"==typeof t&&(t="<p>"+t+"</p>");const i=s.value||"";let n="<input type='text' value='"+i+"'/>";s.textarea&&(n="<textarea class='textfield' style='width:95%'>"+i+"</textarea>"),t+="<p>"+n+"</p><button class='litebutton' data-value='accept' style='width:45%; margin-left: 10px; margin-bottom: 10px'>Accept</button><button class='litebutton' data-value='cancel' style='width:45%'>Cancel</button>",s.noclose=!0;const o=this.showMessage(t,s),r=function(t){const s=t.target;let i=a.value;s.dataset&&"cancel"==s.dataset.value&&(i=null),o.close(),e&&e(i)},l=o.content.querySelectorAll("button");for(let t=0;t<l.length;t++)l[t].addEventListener("click",r);const a=o.content.querySelector("input,textarea");return a.addEventListener("keydown",(function(t){t||(t=window.event);const e=t.keyCode||t.which;if("13"==e)return r(t),!1;"29"==e&&o.close()}),!0),a.focus(),o}choice(t,e,s,i){(i=i||{}).className="alert",i.title=i.title||"Select one option",i.width=i.width||280,"string"==typeof t&&(t="<p>"+t+"</p>");for(const s in e)t+="<button class='litebutton' data-value='"+s+"' style='width:45%; margin-left: 10px'>"+(e[s].content||e[s])+"</button>";i.noclose=!0;const n=this.showMessage(t,i);n.content.style.paddingBottom="10px";const o=n.content.querySelectorAll("button"),r=t=>{const i=t.target,o=e[i.dataset.value];n.close(),s&&s(o)};for(let t=0;t<o.length;t++)o[t].addEventListener("click",r);return n}downloadURL(t,e){const s=document.createElement("a");s.href=t,s.download=e,document.body.appendChild(s),s.click(),document.body.removeChild(s)}downloadFile(t,e,s){if(!e)return void console.warn("No file provided to download");s||(s=e.constructor===String?"text/plain":"application/octet-stream");let i=null;i=e.constructor!==File&&e.constructor!==Blob?new Blob([e],{type:s}):e;const n=URL.createObjectURL(i),o=document.createElement("a");o.setAttribute("href",n),o.setAttribute("download",t),o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o),setTimeout((()=>{URL.revokeObjectURL(n)}),6e4)}getUrlVars(){const t=[];let e;const s=window.location.href.slice(window.location.href.indexOf("?")+1).split("&");for(let i=0;i<s.length;i++)e=s[i].split("="),t.push(e[0]),t[e[0]]=e[1];return t}getUrlVar(t){return e.LiteGUI.getUrlVars()[t]}focus(t){t.focus()}blur(t){t.blur()}draggable(t,e,s,i,n){(e=e||t).addEventListener("mousedown",(function e(d){if("mousedown"==d.type)return l||(l=t.getClientRects()[0],a=l?l.left:0,c=l?l.top:0),n&&0==n(t,d)?(d.stopPropagation(),d.preventDefault(),!1):(o=d.clientX,r=d.clientY,document.addEventListener("mousemove",e),document.addEventListener("mouseup",e),s&&s(t,d),d.stopPropagation(),d.preventDefault(),!1);if("mouseup"==d.type)return document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",e),void(i&&i(t,d));if("mousemove"==d.type){const e=d.clientX-o,s=d.clientY-r;o=d.clientX,r=d.clientY,a+=e,c+=s,t.style.left=a+"px",t.style.top=c+"px"}return})),e.style.cursor="move";let o=0,r=0,l=t.getClientRects()[0],a=l?l.left:0,c=l?l.top:0;t.style.position="absolute",t.style.left=a+"px",t.style.top=c+"px"}cloneObject(t,e){const s=e||{};for(const e in t){if("_"==e[0]||"jQuery"==e.substring(0,5))continue;const i=t[e];if(null==i)s[e]=null;else{if("function"==typeof i)continue;if("number"==typeof i||"string"==typeof i)s[e]=i;else if(i.constructor==Float32Array)s[e]=Array.apply([],i);else if(Array.isArray(i))s[e]&&s[e].constructor==Float32Array?s[e].set(i):s[e]=JSON.parse(JSON.stringify(i));else try{s[e]=JSON.parse(JSON.stringify(i))}catch(t){console.error(t)}}}return s}safeName(t){return String(t).replace(/[\s.]/g,"")}htmlEncode(t){const e=document.createElement("div");return e.innerHTML=t,e.innerText}htmlDecode(t){const e=document.createElement("div");return e.innerText=t,e.innerHTML}sizeToCSS(t){const e=t;return null==e?null:e.constructor===String?e:e>=0?(0|e)+"px":"calc( 100% - "+Math.abs(0|e)+"px )"}getElementWindow(t){const e=t.ownerDocument;return e.defaultView||e.parentWindow}createDropArea(t,e,s,i){function n(e){t.addEventListener("dragexit",n),t.addEventListener("dragover",n),t.addEventListener("drop",o),e.stopPropagation(),e.preventDefault(),"dragenter"==e.type&&s&&s(e,t),"dragexit"==e.type&&i&&i(e,t)}function o(s){let i;if(s.stopPropagation(),s.preventDefault(),t.removeEventListener("dragexit",n),t.removeEventListener("dragover",n),t.removeEventListener("drop",o),e&&(i=e(s)),i)return s.stopPropagation(),s.stopImmediatePropagation(),!0}t.addEventListener("dragenter",n)}}function f(){null==e.escapeHtmlEntities&&(e.escapeHtmlEntities=function(t){return t.replace(/[\u00A0-\u2666<>&]/g,(t=>"&"+(e.escapeHtmlEntities.entityTable[t.charCodeAt(0)]||"#"+t.charCodeAt(0))+";"))},e.escapeHtmlEntities.entityTable={34:"quot",38:"amp",39:"apos",60:"lt",62:"gt",160:"nbsp",161:"iexcl",162:"cent",163:"pound",164:"curren",165:"yen",166:"brvbar",167:"sect",168:"uml",169:"copy",170:"ordf",171:"laquo",172:"not",173:"shy",174:"reg",175:"macr",176:"deg",177:"plusmn",178:"sup2",179:"sup3",180:"acute",181:"micro",182:"para",183:"middot",184:"cedil",185:"sup1",186:"ordm",187:"raquo",188:"frac14",189:"frac12",190:"frac34",191:"iquest",192:"Agrave",193:"Aacute",194:"Acirc",195:"Atilde",196:"Auml",197:"Aring",198:"AElig",199:"Ccedil",200:"Egrave",201:"Eacute",202:"Ecirc",203:"Euml",204:"Igrave",205:"Iacute",206:"Icirc",207:"Iuml",208:"ETH",209:"Ntilde",210:"Ograve",211:"Oacute",212:"Ocirc",213:"Otilde",214:"Ouml",215:"times",216:"Oslash",217:"Ugrave",218:"Uacute",219:"Ucirc",220:"Uuml",221:"Yacute",222:"THORN",223:"szlig",224:"agrave",225:"aacute",226:"acirc",227:"atilde",228:"auml",229:"aring",230:"aelig",231:"ccedil",232:"egrave",233:"eacute",234:"ecirc",235:"euml",236:"igrave",237:"iacute",238:"icirc",239:"iuml",240:"eth",241:"ntilde",242:"ograve",243:"oacute",244:"ocirc",245:"otilde",246:"ouml",247:"divide",248:"oslash",249:"ugrave",250:"uacute",251:"ucirc",252:"uuml",253:"yacute",254:"thorn",255:"yuml",402:"fnof",913:"Alpha",914:"Beta",915:"Gamma",916:"Delta",917:"Epsilon",918:"Zeta",919:"Eta",920:"Theta",921:"Iota",922:"Kappa",923:"Lambda",924:"Mu",925:"Nu",926:"Xi",927:"Omicron",928:"Pi",929:"Rho",931:"Sigma",932:"Tau",933:"Upsilon",934:"Phi",935:"Chi",936:"Psi",937:"Omega",945:"alpha",946:"beta",947:"gamma",948:"delta",949:"epsilon",950:"zeta",951:"eta",952:"theta",953:"iota",954:"kappa",955:"lambda",956:"mu",957:"nu",958:"xi",959:"omicron",960:"pi",961:"rho",962:"sigmaf",963:"sigma",964:"tau",965:"upsilon",966:"phi",967:"chi",968:"psi",969:"omega",977:"thetasym",978:"upsih",982:"piv",8226:"bull",8230:"hellip",8242:"prime",8243:"Prime",8254:"oline",8260:"frasl",8472:"weierp",8465:"image",8476:"real",8482:"trade",8501:"alefsym",8592:"larr",8593:"uarr",8594:"rarr",8595:"darr",8596:"harr",8629:"crarr",8656:"lArr",8657:"uArr",8658:"rArr",8659:"dArr",8660:"hArr",8704:"forall",8706:"part",8707:"exist",8709:"empty",8711:"nabla",8712:"isin",8713:"notin",8715:"ni",8719:"prod",8721:"sum",8722:"minus",8727:"lowast",8730:"radic",8733:"prop",8734:"infin",8736:"ang",8743:"and",8744:"or",8745:"cap",8746:"cup",8747:"int",8756:"there4",8764:"sim",8773:"cong",8776:"asymp",8800:"ne",8801:"equiv",8804:"le",8805:"ge",8834:"sub",8835:"sup",8836:"nsub",8838:"sube",8839:"supe",8853:"oplus",8855:"otimes",8869:"perp",8901:"sdot",8968:"lceil",8969:"rceil",8970:"lfloor",8971:"rfloor",9001:"lang",9002:"rang",9674:"loz",9824:"spades",9827:"clubs",9829:"hearts",9830:"diams",338:"OElig",339:"oelig",352:"Scaron",353:"scaron",376:"Yuml",710:"circ",732:"tilde",8194:"ensp",8195:"emsp",8201:"thinsp",8204:"zwnj",8205:"zwj",8206:"lrm",8207:"rlm",8211:"ndash",8212:"mdash",8216:"lsquo",8217:"rsquo",8218:"sbquo",8220:"ldquo",8221:"rdquo",8222:"bdquo",8224:"dagger",8225:"Dagger",8240:"permil",8249:"lsaquo",8250:"rsaquo",8364:"euro"})}e.Core=m,e.LiteGUI=new m,Object.defineProperty(String.prototype,"template",{value:function(t,e){let s=this;const i=/{{([^}}]+)?}}/g;let n;for(;n;){const o=e?new Function("with(this) { try { return "+n[1]+"} catch(e) { return 'error';} }").call(t):t[n[1]];s=s.replace(n[0],o),n=i.exec(s)}return s},enumerable:!1}),e.purgeElement=function t(e,s){let i,n,o,r=e.attributes;if(r)for(i=r.length-1;i>=0;i-=1)o=r[i].name,"function"==typeof e[o]&&(e[o]=null);if(r=e.childNodes,r)for(n=r.length,i=0;i<n;i+=1)t(e.childNodes[i],void 0)},e.verifyEscapeHtmlEntities=f,e.beautifyCode=function(t,e,s){return e=e||["abstract","else","instanceof","super","boolean","enum","int","switch","break","export","interface","synchronized","byte","extends","let","this","case","false","long","throw","catch","final","native","throws","char","finally","new","transient","class","float","null","true","const","for","package","try","continue","function","private","typeof","debugger","goto","protected","var","default","if","public","void","delete","implements","return","volatile","do","import","short","while","double","in","static","with"],t=(t=(t=(t=(t=(t=t.replace(/\b(\w+)\b/g,(t=>-1!=e.indexOf(t)?"<span class='rsv'>"+t+"</span>":t))).replace(/\b([0-9]+)\b/g,(t=>"<span class='num'>"+t+"</span>"))).replace(/(\w+\.\w+)/g,(t=>{const e=t.split(".");return"<span class='obj'>"+e[0]+"</span>.<span class='prop'>"+e[1]+"</span>"}))).replace(/(\w+)\(/g,(t=>"<span class='prop'>"+t.substr(0,t.length-1)+"</span>("))).replace(/("(\\.|[^"])*")/g,(t=>"<span class='str'>"+t+"</span>"))).replace(/\/\*[\s\S]*?\*\/|([^\\:]|^)\/\/.*$/gm,(t=>"<span class='cmnt'>"+t.replace(/<[^>]*>/g,"")+"</span>")),s||(t="<style>.obj { color: #79B; } .prop { color: #B97; }\t.str,.num { color: #A79; } .cmnt { color: #798; } .rsv { color: #9AB; } </style>"+t),t},e.beautifyJSON=function(t,e){"object"==typeof t&&(t=JSON.stringify(t));const s=["false","true","null"];return t=(t=(t=(t=(t=t.replace(/(\w+)/g,(t=>-1!=s.indexOf(t)?"<span class='rsv'>"+t+"</span>":t))).replace(/([0-9]+)/g,(t=>"<span class='num'>"+t+"</span>"))).replace(/(\w+\.\w+)/g,(t=>{const e=t.split(".");return"<span class='obj'>"+e[0]+"</span>.<span class='prop'>"+e[1]+"</span>"}))).replace(/("(\\.|[^"])*")/g,(t=>"<span class='str'>"+t+"</span>"))).replace(/(\/\/[a-zA-Z0-9?!()_ ]*)/g,(t=>"<span class='cmnt'>"+t+"</span>")),e||(t="<style>.obj { color: #79B; } .prop { color: #B97; }\t.str { color: #A79; } .num { color: #B97; } .cmnt { color: #798; } .rsv { color: #9AB; } </style>"+t),t},e.dataURItoBlob=function(t){const e=t.indexOf(","),s=atob(t.substr(e+1)),i=new ArrayBuffer(s.length),n=new Uint8Array(i),o=s.length;for(let t=0;t<o;t++)n[t]=s.charCodeAt(t);let r=t.substr(5,e-5);return r=r.substr(0,r.length-7),new Blob([i],{type:r})}},684:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Dialog=void 0;const i=s(776);class n{constructor(t,e){if(this.content=null,this.root=void 0,this.footer=null,this.minimized=[],this.header=null,this.resizable=!1,this.draggable=!1,e||t&&t.constructor===String){const s=t;(t=e||{}).id=s,console.warn("LiteGUI.Dialog legacy parameter, use options as first parameter instead of id.")}this._ctor(t)}getDialog(t){const e=document.getElementById(t);return e?e.dialog:null}_ctor(t){var e,s;t=t||{};const o=this;this.width=t.width,this.height=t.height,this.minWidth=t.minWidth||150,this.minHeight=t.minHeight||100,this.content=t.content||"";const r=document.createElement("div");t.id&&(r.id=t.id),r.className="litedialog "+(t.className||""),r.data=this,r.dialog=this;let l="";if(t.title&&(l+="<div class='panel-header'>"+t.title+"</div><div class='buttons'>",t.minimize&&(l+="<button class='litebutton mini-button minimize-button'>-</button>",l+="<button class='litebutton mini-button maximize-button' style='display:none'></button>"),t.hide&&(l+="<button class='litebutton mini-button hide-button'></button>"),t.detachable&&(l+="<button class='litebutton mini-button detach-button'></button>"),(t.close||t.closable)&&(l+="<button class='litebutton mini-button close-button'>"+i.LiteGUI.special_codes.close+"</button>"),l+="</div>"),l+="<div class='content'>"+this.content+"</div>",l+="<div class='panel-footer'></div>",r.innerHTML=l,this.root=r,this.header=r.querySelector(".panel-header"),this.content=r.querySelector(".content"),this.footer=r.querySelector(".panel-footer"),t.fullcontent&&(this.content.style.width="100%",this.content.style.height=t.title?"calc( 100% - "+n.title_height+" )":"100%"),t.buttons)for(const e in t.buttons)this.addButton(t.buttons[e].name,t.buttons[e]);1==t.scroll&&(this.content.style.overflow="auto");const a=r.querySelector(".close-button");a&&a.addEventListener("click",this.close.bind(this));const c=r.querySelector(".maximize-button");c&&c.addEventListener("click",this.maximize.bind(this));const d=r.querySelector(".minimize-button");d&&d.addEventListener("click",this.minimize.bind(this));const h=r.querySelector(".hide-button");h&&h.addEventListener("click",this.hide.bind(this));const u=r.querySelector(".detach-button");if(u&&u.addEventListener("click",(()=>{o.detachWindow(void 0,void 0)})),this.enableProperties(t),null===(e=this.root)||void 0===e||e.addEventListener("DOMNodeInsertedIntoDocument",(()=>{o.on_attached_to_DOM&&o.on_attached_to_DOM(),o.on_resize&&o.on_resize()})),null===(s=this.root)||void 0===s||s.addEventListener("DOMNodeRemovedFromDocument",(()=>{o.on_detached_from_DOM&&o.on_detached_from_DOM()})),t.attach||t.parent){let e=null;t.parent&&(e="string"==typeof t.parent?document.querySelector(t.parent):t.parent),e||(e=i.LiteGUI.root),e.appendChild(this.root),this.center()}}add(t){var e;null===(e=this.content)||void 0===e||e.appendChild(t.root||t)}enableProperties(t){t=t||{};const e=this,s=this.root;s.style.position="absolute",s.style.minWidth=this.minWidth+"px",s.style.minHeight=this.minHeight+"px",this.width&&(s.style.width=this.width+"px"),this.height&&("number"==typeof this.height?s.style.height=this.height+"px":-1!=this.height.indexOf("%")&&(s.style.height=this.height),this.content.style.height="calc( "+this.height+"px - 24px )"),s.style.boxShadow="0 0 3px black",t.draggable&&(this.draggable=!0,i.LiteGUI.draggable(s,s.querySelector(".panel-header"),(()=>{e.bringToFront()}),(()=>{}),(()=>!e.minimized))),t.resizable&&this.setResizable()}setResizable(){var t;if(this.resizable)return;const e=this.root;this.resizable=!0;const s=this.footer;s.style.minHeight="4px",s.classList.add("resizable");const n=document.createElement("div");n.className="resizable-corner",null===(t=this.root)||void 0===t||t.appendChild(n);const o=[0,0],r=this;let l=!1;const a=function(t){const s=t.target;if("mousedown"==t.type)document.body.addEventListener("mousemove",a),document.body.addEventListener("mouseup",a),l=s==n,o[0]=t.pageX,o[1]=t.pageY;else if("mousemove"==t.type){const s=i.LiteGUI.getRect(e),n=s.width,a=n-(o[0]-t.pageX),c=s.height,d=c-(o[1]-t.pageY);l&&(e.style.width=a+"px"),e.style.height=d+"px",o[0]=t.pageX,o[1]=t.pageY,r.content.style.height="calc( 100% - 24px )",!r.on_resize||n==a&&c==d||r.on_resize(t,a,d)}else"mouseup"==t.type&&(document.body.removeEventListener("mousemove",a),document.body.removeEventListener("mouseup",a),l=!1);return t.preventDefault(),t.stopPropagation(),!1};s.addEventListener("mousedown",a),n.addEventListener("mousedown",a,!0)}dockTo(t,e){if(!t)return;const s=this.root;e=e||"full",t=t.content||t,s.style.top=0,s.style.left=0,s.style.boxShadow="0 0 0","full"==e?(s.style.position="relative",s.style.width="100%",s.style.height="100%",this.content.style.width="100%",this.content.style.height="calc(100% - "+i.LiteGUI.Panel.title_height+")",this.content.style.overflow="auto"):"left"==e||"right"==e?(s.style.position="absolute",s.style.top=0,s.style[e]=0,s.style.width=this.width+"px",s.style.height="100%",this.content.style.height="calc(100% - "+i.LiteGUI.Panel.title_height+")",this.content.style.overflow="auto","right"==e&&(s.style.left="auto",s.style.right=0)):"bottom"!=e&&"top"!=e||(s.style.width="100%",s.style.height=this.height+"px","bottom"==e&&(s.style.bottom=0,s.style.top="auto")),this.draggable&&i.LiteGUI.draggable(s),t.content?t.content.appendChild(s):"string"==typeof t?(t=document.querySelector(t))&&t.appendChild(s):t.appendChild(s)}addButton(t,e){(e=e||{}).constructor===Function&&(e={callback:e});const s=this,i=document.createElement("button");i.className="litebutton",i.innerHTML=t,e.className&&(i.className+=" "+e.className),this.root.querySelector(".panel-footer").appendChild(i);return i.addEventListener("click",function(t){e.callback&&e.callback(i),e.close&&s.close()}.bind(i)),i}close(){i.LiteGUI.remove(this.root),i.LiteGUI.trigger(this,"closed",this),this.on_close&&this.on_close(),this.onclose&&console.warn("Dialog: Do not use onclose, use on_close instead"),this.dialog_window&&(this.dialog_window.close(),this.dialog_window=void 0)}highlight(t){t=t||100,this.root.style.outline="1px solid white";const e=this.root.ownerDocument;(e.defaultView||e.parentWindow).focus(),setTimeout((()=>{this.root.style.outline=null}),t)}minimize(){var t,e,s;if(this.minimized.length)return;this.old_box=null===(t=this.root)||void 0===t?void 0:t.getBoundingClientRect(),this.root.querySelector(".content").style.display="none";const n=null===(e=this.root)||void 0===e?void 0:e.querySelector(".minimize-button");n&&(n.style.display="none");const o=null===(s=this.root)||void 0===s?void 0:s.querySelector(".maximize-button");o&&(o.style.display=""),this.root.style.width=i.LiteGUI.Dialog.MINIMIZED_WIDTH+"px";i.LiteGUI.bind(this,"closed",(t=>{const e=t.target;this.minimized.splice(this.minimized.indexOf(e),1),this.arrangeMinimized()})),this.minimized.push(this),this.arrangeMinimized(),i.LiteGUI.trigger(this,"minimizing")}arrangeMinimized(){for(const t in this.minimized){const e=this.minimized[t],s=e.root.parentNode.getBoundingClientRect().height-20;e.root.style.left=i.LiteGUI.Dialog.MINIMIZED_WIDTH*parseInt(t),e.root.style.top=s+"px"}}maximize(){if(!this.minimized)return;this.minimized=[],this.root.querySelector(".content").style.display="",i.LiteGUI.draggable(this.root),this.root.style.left=this.old_box.left+"px",this.root.style.top=this.old_box.top+"px",this.root.style.width=this.old_box.width+"px",this.root.style.height=this.old_box.height+"px";const t=this.root.querySelector(".minimize-button");t&&(t.style.display="");const e=this.root.querySelector(".maximize-button");e&&(e.style.display="none"),this.minimized.splice(this.minimized.indexOf(this),1),this.arrangeMinimized(),i.LiteGUI.trigger(this,"maximizing")}makeModal(){var t;i.LiteGUI.showModalBackground(!0),null===(t=i.LiteGUI.modalbg_div)||void 0===t||t.appendChild(this.root),this.show(),this.center(),i.LiteGUI.bind(this,"closed",(function(t){i.LiteGUI.showModalBackground(!1)}))}bringToFront(){var t;const e=null===(t=this.root)||void 0===t?void 0:t.parentNode;e.removeChild(this.root),e.appendChild(this.root)}show(t){var e;if(!(null===(e=this.root)||void 0===e?void 0:e.parentNode)){if(t){const e=t.ownerDocument;(e.querySelector(".litegui-wrap")||e.body).appendChild(this.root);(e.defaultView||e.parentWindow).focus()}else i.LiteGUI.add(this);this.center()}this.detach_window||(this.root.style.display="",i.LiteGUI.trigger(this,"shown"))}hide(){this.root.style.display="none",i.LiteGUI.trigger(this,"hidden")}fadeIn(t){t=t||1e3,this.root.style.display="",this.root.style.opacity="0";const e=this;setTimeout((()=>{e.root.style.transition="opacity "+t+"ms",e.root.style.opacity="1"}),100)}setPosition(t,e){var s;(null===(s=this.root)||void 0===s?void 0:s.parentNode)||console.warn("LiteGUI.Dialog: Cannot set position of dialog if it is not in the DOM"),this.root.position="absolute",this.root.style.left=t+"px",this.root.style.top=e+"px"}setSize(t,e){this.root.style.width="number"==typeof t?t+"px":t,this.root.style.height="number"==typeof e?e+"px":e}setTitle(t){this.header&&(this.header.innerHTML=t)}center(){var t;if(!(null===(t=this.root)||void 0===t?void 0:t.parentNode))return;this.root.position="absolute";const e=this.root.offsetWidth,s=this.root.offsetHeight,i=this.root.parentNode.offsetWidth,n=this.root.parentNode.offsetHeight;this.root.style.left=Math.floor(.5*(i-e))+"px",this.root.style.top=Math.floor(.5*(n-s))+"px"}adjustSize(t,e){var s;if(t=t||0,this.content.style.height="auto",0==this.content.offsetHeight&&!e){const e=this;return void setTimeout((()=>{e.adjustSize(t,!0)}),1)}let i=0;const n=null===(s=this.root)||void 0===s?void 0:s.querySelector(".panel-footer");n&&(i+=n.offsetHeight);const o=this.content.offsetWidth,r=this.content.offsetHeight+20+t+i;this.setSize(o,r)}clear(){this.content.innerHTML=""}detachWindow(t,e){var s;if(this.dialog_window)return;const n=this.root.getClientRects()[0],o=n.width,r=n.height;let l="Window";this.header&&(l=this.header.textContent);const a=window.open("","","width="+o+", height="+r+", location=no, status=no, menubar=no, titlebar=no, fullscreen=yes");a.document.write("<head><title>"+l+"</title>"),this.dialog_window=a;const c=document.querySelectorAll("link[rel='stylesheet'],style");for(let t=0;t<c.length;t++)a.document.write(c[t].outerHTML);a.document.write("</head><body></body>"),a.document.close();return a.onbeforeunload=function(){const t=i.LiteGUI.windows.indexOf(a);-1!=t&&i.LiteGUI.windows.splice(t,1),e&&e()},a.document.body.appendChild(this.content),this.root.style.display="none",this._old_height=null===(s=this.content)||void 0===s?void 0:s.style.height,this.content.style.height="100%",i.LiteGUI.windows.push(a),t&&t(),a}reattachWindow(){var t;if(!this.dialog_window)return;null===(t=this.root)||void 0===t||t.appendChild(this.content),this.root.style.display="",this.content.style.height=this._old_height,delete this._old_height,this.dialog_window.close();const e=i.LiteGUI.windows.indexOf(this.dialog_window);-1!=e&&i.LiteGUI.windows.splice(e,1),this.dialog_window=void 0}showAll(){const t=document.body.querySelectorAll("litedialog");for(let e=0;e<t.length;e++){t[e].dialog.show()}}hideAll(){const t=document.body.querySelectorAll("litedialog");for(let e=0;e<t.length;e++){t[e].dialog.hide()}}closeAll(){const t=document.body.querySelectorAll("litedialog");for(let e=0;e<t.length;e++){t[e].dialog.close()}}}e.Dialog=n,n.MINIMIZED_WIDTH=200,n.title_height="20px"},773:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Dragger=void 0;const i=s(776);e.Dragger=class{constructor(t,e){this.dragging=!1;let s=t;null==s?s=0:s.constructor===String?s=parseFloat(s):s.constructor!==Number&&(s=0),this.value=s;const n=this,o=null!=e.precision?e.precision:3;this.options=e||{};const r=document.createElement("div");r.className="dragger "+(e.extraclass?e.extraclass:""),this.root=r;const l=document.createElement("span");l.className="inputfield "+(e.extraclass?e.extraclass:"")+(e.full?" full":""),e.disabled&&(l.className+=" disabled"),r.appendChild(l);const a=e.dragger_class||"full",c=document.createElement("input");c.className="text number "+(a||""),c.value=s.toFixed(o)+(e.units?e.units:""),c.tabIndex=e.tab_index,this.input=c,r.input=c,e.disabled&&(c.disabled=!0),e.tab_index&&(c.tabIndex=e.tab_index),l.appendChild(c),c.addEventListener("keydown",(t=>{const e=t.key||t.keyCode;if(38==e)m(1,t);else{if(40!=e)return;m(-1,t)}return t.stopPropagation(),t.preventDefault(),!0}));const d=document.createElement("div");d.className="drag_widget",e.disabled&&(d.className+=" disabled"),l.appendChild(d),r.dragger=d,d.addEventListener("mousedown",(function(t){u=c.ownerDocument,u.removeEventListener("mousemove",p),u.removeEventListener("mouseup",g),e.disabled||(r.requestPointerLock&&r.requestPointerLock(),u.addEventListener("mousemove",p),u.addEventListener("mouseup",g),d.data=[t.screenX,t.screenY],n.dragging=!0,i.LiteGUI.trigger(r,"start_dragging"));t.stopPropagation(),t.preventDefault()}));const h=function(t){if(document.activeElement!==c)return;m((void 0!==t.wheelDelta?t.wheelDelta:t.deltaY?-t.deltaY/3:0)>0?1:-1,t),t.stopPropagation(),t.preventDefault()};c.addEventListener("wheel",h.bind(c),!1),c.addEventListener("mousewheel",h.bind(c),!1);let u=null;function p(t){let s=[t.screenX-d.data[0],d.data[1]-t.screenY];void 0!==t.movementX&&(s=[t.movementX,-t.movementY]),d.data=[t.screenX,t.screenY];return m(s[e.horizontal?0:1],t),t.stopPropagation(),t.preventDefault(),!1}function g(t){n.dragging=!1,i.LiteGUI.trigger(r,"stop_dragging");const e=u||document;return u=null,e.removeEventListener("mousemove",p),e.removeEventListener("mouseup",g),e.exitPointerLock&&e.exitPointerLock(),i.LiteGUI.trigger(d,"blur"),t.stopPropagation(),t.preventDefault(),!1}function m(t,s){let n=t;e.linear||(n=n>0?Math.pow(n,1.2):-1*Math.pow(Math.abs(n),1.2));let r=e.step?e.step:1;s&&s.shiftKey?r*=10:s&&s.ctrlKey&&(r*=.1);let l=parseFloat(c.value)+n*r;null!=e.max&&l>e.max&&(l=e.max),null!=e.min&&l<e.min&&(l=e.min),c.value=l.toFixed(o),e.units&&(c.value+=e.units),i.LiteGUI.trigger(c,"change")}}setRange(t,e){this.options.min=t,this.options.max=e}setValue(t,e){let s=parseFloat(t);this.value=s,this.options.precision&&(s=s.toFixed(this.options.precision)),this.options.units&&(s+=this.options.units),this.input.value=s,e||i.LiteGUI.trigger(this.input,"change")}getValue(){return this.value}}},683:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Inspector=void 0;const i=s(776),n=s(776),o=s(90);class r{constructor(t){if(this.row_number=0,this.name_width=null,this.widgets_width=null,this.onchange=null,this.one_line=null,t&&t.constructor===String){const e=t;(t=arguments[1]||{}).id=e,console.warn("LiteGUI.Inspector legacy parameter, use options as first parameter instead of id.")}t=t||{};const e=document.createElement("DIV");this.root=e,this.root.className="inspector "+(t.full?"full":"")+(t.className||""),t.one_line&&(this.one_line=!0,this.root.className+=" one_line"),t.id&&(this.root.id=t.id),this.sections=new Array,this.values=new Map,this.widgets=new Array,this.widgets_by_name=new Map,this.row_number=0,this.addContainer("",{}),this.tab_index=Math.floor(1e4*Math.random()),t.width&&(this.root.style.width=i.LiteGUI.sizeToCSS(t.width).toString()),t.height&&(this.root.style.height=i.LiteGUI.sizeToCSS(t.height).toString(),t.one_line||(this.root.style.overflow="auto")),t.name_width&&(this.name_width=t.name_width),t.widgets_width&&(this.widgets_width=t.widgets_width),t.noscroll&&(this.root.style.overflow="hidden"),t.onchange&&(this.onchange=t.onchange),t.parent&&this.appendTo(t.parent,null),this.className=this.root.className,this.widgets_per_row=t.widgets_per_row||1}getValues(){const t=new Map;for(const e in this.widgets_by_name){const s=this.widgets_by_name.get(e).getValue();t.set(e,s)}return t}setValues(t){for(const e in t)this.widgets_by_name.get(e)&&this.widgets_by_name.get(e).setValue(t[e])}appendTo(t,e){t&&(t.constructor===String&&(t=document.querySelector(t)),t&&(e?t.insertBefore(this.root,t.firstChild):t.appendChild(this.root)))}clear(){for((0,n.purgeElement)(this.root,!0);this.root.hasChildNodes();)this.root.removeChild(this.root.lastChild);this.root.className=this.className,this.row_number=0,this.values.clear(),this.widgets=[],this.widgets_by_name.clear(),this.sections=[],this.current_section=null,this._current_container=null,this._current_container_stack=null,this.addContainer()}refresh(){this.on_refresh&&this.on_refresh()}append(t,e){const s=(e=e||{}).widget_parent||this._current_container||this.root;e.replace?e.replace.parentNode.replaceChild(t,e.replace):(t.section=this.current_section,s.appendChild(t))}pushContainer(t){if(this._current_container_stack){if(-1!=this._current_container_stack.indexOf(t))return void console.warn("Container already in the stack");this._current_container_stack.push(t)}else this._current_container_stack=[t];this._current_container=t}isContainerInStack(t){return!!this._current_container_stack&&-1!=this._current_container_stack.indexOf(t)}popContainer(t){if(this.row_number=0,this._current_container_stack&&this._current_container_stack.length){if(t){let e=this._current_container_stack.pop();for(;e&&e!=t;)e=this._current_container_stack.pop()}else this._current_container_stack.pop();this._current_container=this._current_container_stack[this._current_container_stack.length-1]}else this._current_container=null}setup(t){for(const e in t){const s=t[e];this.add(s.type,s.name,s.value,s.options)}}getWidget(t){return null!==t&&t.constructor===Number?this.widgets[t]:this.widgets_by_name.get(t.toString())}inspectInstance(t,e,s,i){if(!t)return;e||(e=t.getProperties?t.getProperties():this.collectProperties(t));const n=t.constructor;!s&&n.properties&&(s=n.properties);let o={};if(t.getInspectorProperties)o=t.getInspectorProperties();else for(const i in e){if(s&&s[i]){o[i]=r(s[i]);continue}const l=e[i];if(n["@"+i]){const t=n["@"+i];if(t&&null===t.widget)continue;o[i]=r(t)}else if(t["@"+i])o[i]=t["@"+i];else{if(null==l)continue;switch(l.constructor){case Number:o[i]={type:"number",step:.1};break;case String:o[i]={type:"string"};break;case Boolean:o[i]={type:"boolean"};break;default:if(l&&(l.constructor===Array||l.constructor.BYTES_PER_ELEMENT)){const t=null!=l[0]&&l[0].constructor===Number;switch(l.length){case 2:o[i]={type:t?"vec2":"Array",step:.1};break;case 3:o[i]={type:t?"vec3":"Array",step:.1};break;case 4:o[i]={type:t?"vec4":"Array",step:.1};break;default:o[i]={type:"Array"}}}}}}if(i)for(const t in i)delete o[i[t]];if(n.properties_order){const t={};for(const e in n.properties_order){const s=n.properties_order[e];o[s]?t[s]=o[s]:console.warn("property not found in instance:",s)}for(const e in o)t[e]||(t[e]=o[e]);o=t}return this.showProperties(t,o);function r(t,e){e=e||{};for(const s in t)e[s]=t[s];return e}}collectProperties(t){const e={};for(const s in t){if("_"==s[0]||"@"==s[0]||"jQuery"==s.substr(0,6))continue;const i=t[s];i&&i.constructor==Function&&!t.constructor["@"+s]||(e[s]=i)}return e}showProperties(t,e){for(const s in e){let i=s,n=e[s];if(!n)continue;if(n.constructor===String&&(n={type:n}),n.name&&(i=n.name),!n.callback){const e={instance:t,name:i,options:n};"function"!=n.type&&(n.callback=this.assignValue.bind(e))}if(!n.callback_update){const e={instance:t,name:i};n.callback_update=(()=>this.instance[this.name]).bind(e)}n.instance=t,n.varname=i;const o=n.widget||n.type||"string";this.on_addProperty&&this.on_addProperty(o,t,i,t[i],n),this.add(o,i,t[i],n)}if(t.constructor.widgets)for(const e in t.constructor.widgets){const s=t.constructor.widgets[e];this.add(s.widget,s.name,s.value,s)}t.onShowProperties&&t.onShowProperties(this),t.constructor.onShowProperties&&t.constructor.onShowProperties(t,this)}assignValue(t){var e,s;const i=this.instance,n=i[this.name];if(null==n||null==t||"enum"==this.options.type)i[this.name]=t;else if("number"==typeof n)i[this.name]=parseFloat(t);else if("string"==typeof n)i[this.name]=t;else if(!(t&&t.length&&n&&n.length)||Object.getOwnPropertyDescriptor(i,this.name)&&(null===(e=Object.getOwnPropertyDescriptor(i,this.name))||void 0===e?void 0:e.set)||Object.getOwnPropertyDescriptor(Object.getPrototypeOf(i),this.name)&&(null===(s=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(i),this.name))||void 0===s?void 0:s.set))i[this.name]=t;else for(let e=0;e<t.length;++e)n[e]=t[e]}createWidget(t,e,s){s=s||{},e=null==e?"":e;const n=document.createElement("DIV");n.className="widget "+(s.className||""),n.inspector=this,n.options=s,n.name=t,this.row_number+=this.widgets_per_row,this.row_number%2==0&&(n.className+=" even");const o=s.width||this.widgets_width;o&&(n.style.width=i.LiteGUI.sizeToCSS(o),n.style.width||(n.style.width="calc("+i.LiteGUI.sizeToCSS(o)+")"),n.style.minWidth="auto");const r=s.height||this.height;r&&(n.style.height=i.LiteGUI.sizeToCSS(r),n.style.height||(n.style.height="calc("+i.LiteGUI.sizeToCSS(r)+")"),n.style.minHeight="auto"),this.widgets.push(n),(s.widget_name||t)&&this.widgets_by_name.set(s.widget_name||t,n),1!=this.widgets_per_row&&(s.width||(n.style.width=(100/this.widgets_per_row).toFixed(2)+"%"),n.style.display="inline-block");let l="",a="";if(null!=t&&(this.name_width||s.name_width)&&!this.one_line){const t=i.LiteGUI.sizeToCSS(s.name_width||this.name_width);l="style='width: calc("+t+" - 0px); width: -webkit-calc("+t+" - 0px); width: -moz-calc("+t+" - 0px); '",a="style='width: calc( 100% - "+t+"); width: -webkit-calc(100% - "+t+"); width: -moz-calc( 100% - "+t+"); '"}s.name_width&&(l="style='width: "+i.LiteGUI.sizeToCSS(s.name_width)+" '"),s.content_width&&(a="style='width: "+i.LiteGUI.sizeToCSS(s.content_width)+" '");let c="",d="";const h=this.one_line?"":"<span class='filling'></span>";s.pretitle&&(d=s.pretitle);let u="wcontent ",p=t;if(s.title&&(p=s.title),null==t?u+=" full":c+=""===t?"<span class='wname' title='"+p+"' "+l+">"+d+"</span>":"<span class='wname' title='"+p+"' "+l+">"+d+t+h+"</span>",e.constructor===String||e.constructor===Number||e.constructor===Boolean)n.innerHTML=c+"<span class='info_content "+u+"' "+a+">"+e+"</span>";else{n.innerHTML=c+"<span class='info_content "+u+"' "+a+"></span>";const t=n.querySelector("span.info_content");t&&t.appendChild(e)}return n.content=n.querySelector("span.info_content"),n.remove=function(){this.parentNode&&this.parentNode.removeChild(this)},n}onWidgetChange(t,e,s,n,o,r){const l=t.section;let a;return n.skip_wchange||(l&&i.LiteGUI.trigger(l,"wbeforechange",s),i.LiteGUI.trigger(t,"wbeforechange",s)),this.values.set(e,s),n.callback&&(a=o?n.callback.apply(t,s):n.callback.call(t,s,r)),n.skip_wchange||(l&&i.LiteGUI.trigger(l,"wchange",s),i.LiteGUI.trigger(t,"wchange",s)),this.onchange&&this.onchange(e,s,t),a}add(t,e,s,i){if(!t)throw"Inspector: no type specified";1==arguments.length&&"object"==typeof t&&(t=(i=t).type,e=i.name,s=i.value);let n=r.widget_constructors[t.toLowerCase()];if(n){if("string"==typeof n&&(n=r.prototype[n]),n&&n.constructor===Function)return i&&i.constructor===Function&&(i={callback:i}),n.call(this,e,s,i)}else console.warn("LiteGUI.Inspector do not have a widget called",t)}getValue(t){return this.values.get(t)}applyOptions(t,e){t&&e&&(e.className&&(t.className+=" "+e.className),e.id&&(t.id=e.id),e.width&&(t.style.width=i.LiteGUI.sizeToCSS(e.width)),e.height&&(t.style.height=i.LiteGUI.sizeToCSS(e.height)))}addSeparator(){const t=document.createElement("DIV");return t.className="separator",this.append(t),t}addNull(t,e,s){return null}addString(t,e,s){s=this.processOptions(s),e=e||"";const n=this;this.values.set(t,e);let o="text";s.password&&(o="password");const r=s.focus?"autofocus":"",l=this.createWidget(t,"<span class='inputfield full "+(s.disabled?"disabled":"")+"'><input type='"+o+"' tabIndex='"+this.tab_index+"' "+r+" class='text string' value='"+e+"' "+(s.disabled?"disabled":"")+"/></span>",s),a=l.querySelector(".wcontent input");return s.placeHolder&&a.setAttribute("placeHolder",s.placeHolder),"right"==s.align&&(a.style.direction="rtl"),a.addEventListener(s.immediate?"keyup":"change",(e=>{const i=this.onWidgetChange.call(n,l,t,e.target.value,s,null,null);void 0!==i&&(a.value=i)})),s.callback_enter&&a.addEventListener("keydown",(e=>{if(13==e.keyCode){this.onWidgetChange.call(n,l,t,e.target.value,s,null,null);s.callback_enter(),e.preventDefault()}})),this.tab_index+=1,l.setIcon=function(t){t?(a.style.background="transparent url('"+t+"') no-repeat left 4px center",a.style.paddingLeft="1.7em"):(a.style.background="",a.style.paddingLeft="")},s.icon&&l.setIcon(s.icon),l.setValue=function(t,e){void 0!==t&&t!==a.value&&(a.value=t,e||i.LiteGUI.trigger(a,"change"))},l.getValue=function(){return a.value},l.focus=function(){this.querySelector("input").focus()},l.disable=function(){a.disabled=!0},l.enable=function(){a.disabled=!1},this.append(l,s),this.processElement(l,s),l}addStringButton(t,e,s){s=this.processOptions(s),void 0===e&&(e="");const n=this;this.values.set(t,e);const o=this.createWidget(t,"<span class='inputfield button'><input type='text' tabIndex='"+this.tab_index+"' class='text string' value='' "+(s.disabled?"disabled":"")+"/></span><button class='micro'>"+(s.button||"...")+"</button>",s),r=o.querySelector(".wcontent input");r.value=e,r.addEventListener("change",(e=>{const i=this.onWidgetChange.call(n,o,t,e.target.value,s,null,null);void 0!==i&&(r.value=i)})),s.disabled&&r.setAttribute("disabled","disabled"),o.setIcon=function(t){t?(r.style.background="transparent url('"+t+"') no-repeat left 4px center",r.style.paddingLeft="1.7em"):(r.style.background="",r.style.paddingLeft="")},s.icon&&o.setIcon(s.icon);const l=o.querySelector(".wcontent button");if(l.addEventListener("click",(t=>{s.callback_button&&s.callback_button.call(o,r.value,t)})),s.button_width){l.style.width=i.LiteGUI.sizeToCSS(s.button_width);o.querySelector(".inputfield").style.width="calc( 100% - "+l.style.width+" - 6px)"}return this.tab_index+=1,this.append(o,s),o.setValue=function(t,e){r.value=t,e||i.LiteGUI.trigger(r,"change")},o.disable=function(){r.disabled=!0,l.disabled=!0},o.enable=function(){r.disabled=!1,l.disabled=!1},o.getValue=function(){return r.value},o.focus=function(){i.LiteGUI.focus(r)},this.processElement(o,s),o}addTextarea(t,e,s){s=this.processOptions(s),e=e||"";const n=this;this.values.set(t,e);const o=this.createWidget(t,"<span class='inputfield textarea "+(s.disabled?"disabled":"")+"'><textarea tabIndex='"+this.tab_index+"' "+(s.disabled?"disabled":"")+"></textarea></span>",s);this.tab_index++;const r=o.querySelector(".wcontent textarea");return r.value=e,r.addEventListener(s.immediate?"keyup":"change",(e=>{this.onWidgetChange.call(n,o,t,e.target.value,s,!1,e)})),s.callback_keydown&&r.addEventListener("keydown",s.callback_keydown),s.height&&(r.style.height="calc( "+i.LiteGUI.sizeToCSS(s.height)+" - 5px )"),this.append(o,s),o.setValue=function(t,s){void 0!==t&&t!=r.value&&(e=t,r.value=t,s||i.LiteGUI.trigger(r,"change"))},o.getValue=function(t){return r.value},o.focus=function(){i.LiteGUI.focus(r)},o.disable=function(){r.disabled=!0},o.enable=function(){r.disabled=!1},this.processElement(o,s),o}addNumber(t,e,s){s=this.processOptions(s),e=e||0;const n=this;this.values.set(t,e);const o=this.createWidget(t,"",s);let r;this.append(o,s),s.extraclass="full",s.tab_index=this.tab_index,s.full=!0,s.precision=void 0!==s.precision?s.precision:2,s.step=void 0===s.step?0==s.precision?1:.1:s.step,this.tab_index++,r=new i.LiteGUI.Dragger(e,s),r.root.style.width="calc( 100% - 1px )",o.querySelector(".wcontent").appendChild(r.root);r.root.addEventListener("start_dragging",function(t){t.callback_before&&t.callback_before.call(o)}.bind(void 0,s)),o.dragger=r,s.disabled&&r.input.setAttribute("disabled","disabled");const l=o.querySelector("input");return l.addEventListener("change",(e=>{const l=e.target;if(i.LiteGUI.trigger(o,"wbeforechange",e.target.value),this.values.set(t,e.target.value),s.callback&&r.dragging){const t=s.callback.call(o,parseFloat(e.target.value));"number"==typeof t&&(l.value=t)}else if((s.callback||s.finalCallback)&&!r.dragging){let t;s.finalCallback?t=s.finalCallback.call(o,parseFloat(e.target.value)):s.callback&&(t=s.callback.call(o,parseFloat(e.target.value))),"number"==typeof t&&(l.value=t)}i.LiteGUI.trigger(o,"wchange",e.target.value),n.onchange&&n.onchange(t,e.target.value,o)})),r.root.addEventListener("stop_dragging",(t=>{i.LiteGUI.trigger(l,"change")})),o.setValue=function(t,e){void 0!==t&&(t=parseFloat(t),s.precision&&(t=t.toFixed(s.precision)),t+=s.units||"",l.value!=t&&(l.value=t,e||i.LiteGUI.trigger(l,"change")))},o.setRange=function(t,e){r.setRange(t,e)},o.getValue=function(){return parseFloat(l.value)},o.focus=function(){i.LiteGUI.focus(l)},o.disable=function(){l.disabled=!0},o.enable=function(){l.disabled=!1},this.processElement(o,s),o}addVector2(t,e,s){(s=this.processOptions(s)).step||(s.step=.1),e=e||[0,0];const n=this;this.values.set(t,e);const o=this.createWidget(t,"",s);s.step=s.step||.1,s.tab_index=this.tab_index,s.full=!0,this.tab_index++;const r=o.draggers=[],l=function(t){s.callback_before&&s.callback_before(t)};for(let t=0;t<2;t++){const n=new i.LiteGUI.Dragger(e[t],s);n.root.style.marginLeft=String(0),n.root.style.width="calc( 25% - 1px )",o.querySelector(".wcontent").appendChild(n.root),s.tab_index=this.tab_index,this.tab_index++,n.root.addEventListener("start_dragging",l),r.push(n)}const a=o.querySelectorAll("input"),c=e=>{let r=[];const l=a;for(let t=0;t<l.length;t++)r.push(parseFloat(l[t].value));i.LiteGUI.trigger(o,"wbeforechange",[r]),this.values.set(t,r);const c=e.target.dragger;if(s.callback&&c.dragging){const t=s.callback.call(o,r);if("object"==typeof t&&t.length>=2){for(let e=0;e<l.length;e++)l[e].value=t[e];r=t}}else if((s.callback||s.finalCallback)&&!c.dragging){let t;if(s.finalCallback?t=s.finalCallback.call(o,r):s.callback&&(t=s.callback.call(o,r)),"object"==typeof t&&t.length>=2){for(let e=0;e<l.length;e++)l[e].value=t[e];r=t}}i.LiteGUI.trigger(o,"wchange",[r]),n.onchange&&n.onchange(t,r,o)},d=function(t,e){i.LiteGUI.trigger(t,"change")};for(let t=0;t<a.length;++t){const e=r[t],s=a[t];s.dragger=e,s.addEventListener("change",c),e.root.addEventListener("stop_dragging",d.bind(void 0,s))}return this.append(o,s),o.setValue=function(t,e){if(t)for(let s=0;s<r.length;s++)r[s].setValue(t[s],e||s<r.length-1)},o.setRange=function(t,e){for(const s in r)r[s].setRange(t,e)},this.processElement(o,s),o}addVector3(t,e,s){(s=this.processOptions(s)).step||(s.step=.1),e=e||[0,0,0];const n=this;this.values.set(t,e);const o=this.createWidget(t,"",s);s.step=s.step||.1,s.tab_index=this.tab_index,s.full=!0,this.tab_index++;const r=o.draggers=[],l=function(t){s.callback_before&&s.callback_before(t)};for(let t=0;t<3;t++){const n=new i.LiteGUI.Dragger(e[t],s);n.root.style.marginLeft=String(0),n.root.style.width="calc( 25% - 1px )",o.querySelector(".wcontent").appendChild(n.root),s.tab_index=this.tab_index,this.tab_index++,n.root.addEventListener("start_dragging",l),r.push(n)}const a=o.querySelectorAll("input"),c=e=>{let r=[];const l=a;for(let t=0;t<l.length;t++)r.push(parseFloat(l[t].value));i.LiteGUI.trigger(o,"wbeforechange",[r]),this.values.set(t,r);const c=e.target.dragger;if(s.callback&&c.dragging){const t=s.callback.call(o,r);if("object"==typeof t&&t.length>=2){for(let e=0;e<l.length;e++)l[e].value=t[e];r=t}}else if((s.callback||s.finalCallback)&&!c.dragging){let t;if(s.finalCallback?t=s.finalCallback.call(o,r):s.callback&&(t=s.callback.call(o,r)),"object"==typeof t&&t.length>=2){for(let e=0;e<l.length;e++)l[e].value=t[e];r=t}}i.LiteGUI.trigger(o,"wchange",[r]),n.onchange&&n.onchange(t,r,o)},d=function(t,e){i.LiteGUI.trigger(t,"change")};for(let t=0;t<a.length;++t){const e=r[t],s=a[t];s.dragger=e,s.addEventListener("change",c),e.root.addEventListener("stop_dragging",d.bind(void 0,s))}return this.append(o,s),o.setValue=function(t,e){if(t)for(let s=0;s<r.length;s++)r[s].setValue(t[s],e||s<r.length-1)},o.setRange=function(t,e){for(const s in r)r[s].setRange(t,e)},this.processElement(o,s),o}addVector4(t,e,s){(s=this.processOptions(s)).step||(s.step=.1),e=e||[0,0,0,0];const n=this;this.values.set(t,e);const o=this.createWidget(t,"",s);s.step=s.step||.1,s.tab_index=this.tab_index,s.full=!0,this.tab_index++;const r=o.draggers=[],l=function(t){s.callback_before&&s.callback_before(t)};for(let t=0;t<4;t++){const n=new i.LiteGUI.Dragger(e[t],s);n.root.style.marginLeft=String(0),n.root.style.width="calc( 25% - 1px )",o.querySelector(".wcontent").appendChild(n.root),s.tab_index=this.tab_index,this.tab_index++,n.root.addEventListener("start_dragging",l),r.push(n)}const a=o.querySelectorAll("input"),c=e=>{let r=[];const l=a;for(let t=0;t<l.length;t++)r.push(parseFloat(l[t].value));i.LiteGUI.trigger(o,"wbeforechange",[r]),this.values.set(t,r);const c=e.target.dragger;if(s.callback&&c.dragging){const t=s.callback.call(o,r);if("object"==typeof t&&t.length>=4){for(let e=0;e<l.length;e++)l[e].value=t[e];r=t}}else if((s.callback||s.finalCallback)&&!c.dragging){let t;if(s.finalCallback?t=s.finalCallback.call(o,r):s.callback&&(t=s.callback.call(o,r)),"object"==typeof t&&t.length>=4){for(let e=0;e<l.length;e++)l[e].value=t[e];r=t}}i.LiteGUI.trigger(o,"wchange",[r]),n.onchange&&n.onchange(t,r,o)},d=function(t,e){i.LiteGUI.trigger(t,"change")};for(let t=0;t<a.length;++t){const e=r[t],s=a[t];s.dragger=e,s.addEventListener("change",c),e.root.addEventListener("stop_dragging",d.bind(void 0,s))}return this.append(o,s),o.setValue=function(t,e){if(t)for(let s=0;s<r.length;s++)r[s].setValue(t[s],e||s<r.length-1)},o.setRange=function(t,e){for(const s in r)r[s].setRange(t,e)},this.processElement(o,s),o}addPad(t,e,s){(s=this.processOptions(s)).step||(s.step=.1),e=e||[0,0];const n=this;this.values.set(t,e);const o=this.createWidget(t,"",s);s.step=s.step||.1,s.tab_index=this.tab_index,s.full=!0,this.tab_index++;const r=s.minx||s.min||0,l=s.miny||s.min||0,a=s.maxx||s.max||1,c=s.maxy||s.max||1,d=o.querySelector(".wcontent"),h=document.createElement("div");h.className="litepad",d.appendChild(h),h.style.width="100%",h.style.height="100px",s.background&&(h.style.backgroundImage="url('"+s.background+"')",h.style.backgroundSize="100%",h.style.backgroundRepeat="no-repeat");const u=document.createElement("div");u.className="litepad-handler",h.appendChild(u),s.tab_index=this.tab_index,this.tab_index++;let p=!1;return h._onMouseEvent=function(e){const d=h.getBoundingClientRect();if(e.mousex=e.pageX-d.left,e.mousey=e.pageY-d.top,e.preventDefault(),e.stopPropagation(),"mousedown"==e.type)document.body.addEventListener("mousemove",h._onMouseEvent),document.body.addEventListener("mouseup",h._onMouseEvent),p=!0;else if("mousemove"==e.type){let h=e.mousex/d.width,u=e.mousey/d.height;h=h*(a-r)+r,u=u*(c-l)+r;const p=[h,u];if(i.LiteGUI.trigger(o,"wbeforechange",[p]),o.setValue(p),s.callback){const t=s.callback.call(o,p);t&&t.length>=2&&o.setValue(t)}i.LiteGUI.trigger(o,"wchange",[p]),n.onchange&&n.onchange(t,p,o)}else"mouseup"==e.type&&(p=!1,document.body.removeEventListener("mousemove",h._onMouseEvent),document.body.removeEventListener("mouseup",h._onMouseEvent));return!0},h.addEventListener("mousedown",h._onMouseEvent),o.setValue=function(t,e){if(void 0===t)return;const s=h.getBoundingClientRect();let i=(t[0]-r)/(a-r),n=(t[1]-l)/(c-l);i=Math.max(0,Math.min(i,1)),n=Math.max(0,Math.min(n,1));const o=(s.width-10)/s.width*100,d=(s.height-10)/s.height*100;u.style.left=(i*o).toFixed(1)+"%",u.style.top=(n*d).toFixed(1)+"%"},this.append(o,s),o.setValue(e),this.processElement(o,s),o}addInfo(t,e,s){s=this.processOptions(s),e=null==e?"":e;let n=null;null!=t?n=this.createWidget(t,e,s):(n=document.createElement("div"),s.className&&(n.className=s.className),void 0!==e.nodeName?(n.innerHTML="<span class='winfo'></span>",n.childNodes[0].appendChild(e)):n.innerHTML="<span class='winfo'>"+e+"</span>");const o=n.querySelector(".winfo")||n.querySelector(".wcontent");s.callback&&n.addEventListener("click",s.callback.bind(n)),n.setValue=function(t){void 0!==t&&o&&(o.innerHTML=t)};let r=n.querySelector("span.info_content");return r||(r=n.querySelector(".winfo")),s.width&&(n.style.width=i.LiteGUI.sizeToCSS(s.width),n.style.display="inline-block",t||(o.style.margin="2px")),s.height&&(r.style.height=i.LiteGUI.sizeToCSS(s.height),r.style.overflow="auto"),n.scrollToBottom=function(){r.scrollTop=r.offsetTop},n.add=function(t){r.appendChild(t)},this.append(n,s),this.processElement(n,s),n}addSlider(t,e,s){void 0===(s=this.processOptions(s)).min&&(s.min=0),void 0===s.max&&(s.max=1),void 0===s.step&&(s.step=.01);const n=this;null==e&&(e=0),this.values.set(t,e);const o=this.createWidget(t,"<span class='inputfield full'>\n<input tabIndex='"+this.tab_index+"' type='text' class='slider-text fixed liteslider-value' value='' /><span class='slider-container'></span></span>",s),r=o.querySelector(".slider-container"),l=new i.LiteGUI.Slider(e,s);r.appendChild(l.root);const a=o.querySelector(".slider-text");return a.value=e,a.addEventListener("change",(i=>{const r=parseFloat(a.value);e=r,l.setValue(r),this.onWidgetChange.call(n,o,t,r,s,null,null)})),l.onChange=e=>{a.value=e,this.onWidgetChange.call(n,o,t,e,s,null,null)},this.append(o,s),o.setValue=function(t,s){void 0!==t&&(e=t,l.setValue(t,s))},o.getValue=function(){return e},this.processElement(o,s),o}addCheckbox(t,e,s){s=this.processOptions(s),e=Boolean(e);const n=this;this.values.set(t,e);const o=s.label_on||s.label||"on",r=s.label_off||s.label||"off",l=e?o:r,a=this.createWidget(t,"<span class='inputfield'><span tabIndex='"+this.tab_index+"' class='fixed flag checkbox "+(e?"on":"off")+"'>"+l+"</span></span>",s);this.tab_index++;const c=a.querySelector(".wcontent .checkbox");return c.addEventListener("keypress",(t=>{32==t.keyCode&&i.LiteGUI.trigger(c,"click")})),a.addEventListener("click",(()=>{e=!e,a.querySelector("span.flag").innerHTML=e?o:r,e?c.classList.add("on"):c.classList.remove("on"),this.onWidgetChange.call(n,a,t,e,s,null,null)})),a.getValue=function(){return e},a.setValue=function(s,n){void 0!==s&&(e=s,this.values.get(t)==s||n||i.LiteGUI.trigger(c,"click"))},this.append(a,s),this.processElement(a,s),a}addFlags(t,e,s){const i={};for(const e in t)i[e]=t[e];if(e)for(const t in e)void 0===i[t]&&(i[t]=!!e[t]);for(const e in i){const n={};for(const t in s)n[t]=s[t];n.callback=function(e){return function(s){t[e]=s}}(e),this.addCheckbox(e,i[e],n)}}addCombo(t,e,s){s=this.processOptions(s);const i=this;this.values.set(t,e),this.tab_index++;const n=this.createWidget(t,"<span class='inputfield full inputcombo "+(s.disabled?"disabled":"")+"'></span>",s);n.options=s;let o=s.values||[];o.constructor===Function&&(o=s.values());const r="<select tabIndex='"+this.tab_index+"' "+(s.disabled?"disabled":"")+" class='"+(s.disabled?"disabled":"")+"'></select>";n.querySelector("span.inputcombo").innerHTML=r,a(o);let l=!1;function a(t,s){t||(t=[]),o=t,s&&(e=s);let i="",r=0;for(const t in o){const s=o[t],n=o.constructor===Array?r:t;let l=o.constructor===Array?s:t;s&&s.title&&(l=s.title),i+="<option value='"+n+"' "+(s==e?" selected":"")+" data-index='"+n+"'>"+l+"</option>",r++}n.querySelector("select").innerHTML=i}return n.querySelector(".wcontent select").addEventListener("change",(r=>{const a=r.target.value;e=o[a],l||this.onWidgetChange.call(i,n,t,e,s,null,null)})),n.getValue=function(){return e},n.setValue=function(t,s){if(void 0===t)return;e=t;const i=n.querySelector("select"),r=i.querySelectorAll("option");let a=-1;if(o.constructor===Array)a=o.indexOf(t);else{let e=0;for(const s in o){if(o[e]==t){a=e;break}e++}}if(-1!=a){l=s;for(const t in r){const e=r[t];e&&e.dataset&&(parseFloat(e.dataset.index)==a?(e.setAttribute("selected",!0),i.selectedIndex=a):e.removeAttribute("selected"))}l=!1}},n.setOptionValues=a,this.append(n,s),this.processElement(n,s),n}addComboButtons(t,e,s){s=this.processOptions(s),e=e||"";const n=this;this.values.set(t,e);let o="";if(s.values)for(const t in s.values)o+="<button class='wcombobutton "+(e==s.values[t]?"selected":"")+"' data-name='options.values[i]'>"+s.values[t]+"</button>";const r=this.createWidget(t,o,s),l=r.querySelectorAll(".wcontent button");return i.LiteGUI.bind(l,"click",(e=>{const i=e.target,o=e.target.innerHTML;n.values.set(t,o);const l=r.querySelectorAll(".selected");for(let t=0;t<l.length;++t)l[t].classList.remove("selected");i.classList.add("selected"),this.onWidgetChange.call(n,r,t,o,s,null,null)})),this.append(r,s),this.processElement(r,s),r}addTags(t,e,s){s=this.processOptions(s),e=e||[];const n=this;this.values.set(t,e);let o="<select>";if(s.values)for(const t in s.values)o+="<option>"+s.values[t]+"</option>";o+="</select><div class='wtagscontainer inputfield'></div>";const r=this.createWidget(t,"<span class='inputfield full'>"+o+"</span>",s);r.tags={};for(const t in s.value)l(s.value[t]);function l(e){if(r.tags[e])return;i.LiteGUI.trigger(r,"wbeforechange",r.tags),r.tags[e]=!0;const o=document.createElement("div");o.data=e,o.className="wtag",o.innerHTML=e+"<span class='close'>X</span>",o.querySelector(".close").addEventListener("click",(e=>{const l=o.data;delete r.tags[l],i.LiteGUI.remove(o),i.LiteGUI.trigger(r,"wremoved",l),n.onWidgetChange.call(n,r,t,r.tags,s,null,null)})),r.querySelector(".wtagscontainer").appendChild(o),n.values.set(t,r.tags),s.callback&&s.callback.call(r,r.tags),i.LiteGUI.trigger(r,"wchange",r.tags),i.LiteGUI.trigger(r,"wadded",e),n.onchange&&n.onchange(t,r.tags,r)}return r.querySelector(".wcontent select").addEventListener("change",(t=>{l(t.target.value)})),this.append(r,s),this.processElement(r,s),r}addList(t,e,s){s=this.processOptions(s);const n=this;let o="";s.height&&(o="style='height: 100%; overflow: auto;'");const r="<ul class='lite-list' "+o+" tabIndex='"+this.tab_index+"'><ul>";this.tab_index++;const l=this.createWidget(t,"<span class='inputfield full "+(s.disabled?"disabled":"")+"' style='height: 100%;'>"+r+"</span>",s);l.querySelector(".info_content").style.height="100%";l.querySelector(".lite-list");const a=l.querySelector(".inputfield");a.style.height="100%",a.style.paddingBottom="0.2em";const c=l.querySelectorAll("ul"),d=function(t){const o=l.querySelector("li.selected");if(o){if(13==t.keyCode){if(!o)return;const t=e[o.dataset.pos];s.callback_dblclick&&s.callback_dblclick.call(n,t)}else if(40==t.keyCode){const t=o.nextSibling;t&&i.LiteGUI.trigger(t,"click"),o.scrollIntoViewIfNeeded&&o.scrollIntoViewIfNeeded({block:"end",behavior:"smooth"})}else{if(38!=t.keyCode)return;{const t=o.previousSibling;t&&i.LiteGUI.trigger(t,"click"),o.scrollIntoViewIfNeeded&&o.scrollIntoViewIfNeeded({block:"end",behavior:"smooth"})}}return t.preventDefault(),t.stopPropagation(),!0}},h=o=>{const r=o.target;if(s.multiselection)r.classList.toggle("selected");else{const t=l.querySelectorAll("li");for(let e=0;e<t.length;++e)t[e].classList.remove("selected");r.classList.add("selected")}const a=e[r.dataset.pos];this.onWidgetChange.call(n,l,t,a,s,null,null),i.LiteGUI.trigger(l,"wadded",a)},u=function(t){const i=e[t.target.dataset.pos];s.callback_dblclick&&s.callback_dblclick.call(n,i)},p=function(){document.addEventListener("keydown",d,!0)},g=function(){document.removeEventListener("keydown",d,!0)};for(let t=0;t<c.length;++t){const e=c[t];e.addEventListener("focus",p),e.addEventListener("blur",g)}function m(t,e,n){const o=n;let r=n;e=Boolean(e);let l=null,a="";null!=t&&(t.constructor===String||t.constructor===Number||t.constructor===Boolean?r=String(t):t&&(r=t.content||t.title||t.name||n,l=t.style,t.icon&&(a="<img src='"+t.icon+"' class='icon' /> "),t.selected&&(e=!0)));let c=r;c=c.replace(/<(?:.|\n)*?>/gm,"");const d=document.createElement("li");return d.classList.add("item-"+i.LiteGUI.safeName(o)),e&&d.classList.add("selected"),d.dataset.name=c,d.dataset.pos=o,d.value=t,l&&d.setAttribute("style",l),d.innerHTML=a+r,d.addEventListener("click",h),s.callback_dblclick&&d.addEventListener("dblclick",u),d}return l.updateItems=function(t,n){n=n||s.selected,e=t;const o=this.querySelector("ul");if(o.innerHTML="",e)for(const t in e){const s=m(e[t],n,t);o.appendChild(s)}const r=o.querySelectorAll("li");i.LiteGUI.bind(r,"click",h)},l.addItem=function(t,s,i){if(e.constructor!==Array)return void console.error("cannot add item to list of object, only array");e.push(t);const n=this.querySelector("ul"),o=m(t,s);n.appendChild(o)},l.removeItem=function(t){const e=l.querySelectorAll(".wcontent li");for(let s=0;s<e.length;s++)e[s].dataset.name==t&&i.LiteGUI.remove(e[s])},l.updateItems(e,s.selected),this.append(l,s),l.getSelected=function(){const t=[],e=this.querySelectorAll("ul li.selected");for(let s=0;s<e.length;++s)t.push(e[s].dataset.name);return t},l.getByIndex=function(t){return this.querySelectorAll("ul li")[t]},l.getIndex=l.getByIndex,l.selectIndex=function(t,e){const s=this.querySelectorAll("ul li");for(let i=0;i<s.length;++i){const n=s[i];i==t?n.classList.add("selected"):e||n.classList.remove("selected")}return s[t]},l.deselectIndex=function(t){const e=this.querySelectorAll("ul li")[t];return e&&e.classList.remove("selected"),e},l.scrollToIndex=function(t){const e=this.querySelectorAll("ul li")[t];e&&(this.scrollTop=e.offsetTop)},l.selectAll=function(){const t=this.querySelectorAll("ul li");for(let e=0;e<t.length;++e){const s=t[e];s.classList.contains("selected")||i.LiteGUI.trigger(s,"click")}},l.deselectAll=function(){const t=this.querySelectorAll("ul li");for(let e=0;e<t.length;++e){const s=t[e];s.classList.contains("selected")&&i.LiteGUI.trigger(s,"click")}},l.setValue=function(t){void 0!==t&&this.updateItems(t)},l.getNumberOfItems=function(){return this.querySelectorAll("ul li").length},l.filter=function(t,e){const s=this.querySelectorAll("ul li");let i=!1;if(t&&t.constructor===String){const s=t;e&&s.toLowerCase(),i=!0,t=function(t){return-1!=(e?t:t.toLowerCase()).indexOf(s)}}for(let e=0;e<s.length;++e){const n=s[e];if(!t){n.style.display="";continue}let o=n.value;i&&null!=o&&o.constructor!==String&&(o=n.innerHTML),t(o,n,n.classList.contains("selected"))?n.style.display="":n.style.display="none"}},l.selectByFilter=function(t){const e=this.querySelectorAll("ul li");for(let s=0;s<e.length;++s){const i=e[s],n=t(i.value,i,i.classList.contains("selected"));!0===n?i.classList.add("selected"):!1===n&&i.classList.remove("selected")}},s.height&&(l.scrollTop=0),this.processElement(l,s),l}addButton(t,e,s){s=this.processOptions(s),e=s.button_text||e||"";const n=this;let o="";null===t&&(o="single"),s.micro&&(o+=" micro");let r="";s.disabled&&(r="disabled='disabled'");const l=s.title||"",a=this.createWidget(t,"<button tabIndex='"+this.tab_index+"' "+r+"></button>",s);this.tab_index++;const c=a.querySelector("button");return c.setAttribute("title",l),c.className="litebutton "+o,c.innerHTML=e,c.addEventListener("click",(o=>{this.onWidgetChange.call(n,a,t,c.innerHTML,s,!1,o),i.LiteGUI.trigger(c,"wclick",e)})),this.append(a,s),a.wclick=function(t){s.disabled||i.LiteGUI.bind(this,"wclick",t)},a.setValue=function(t){void 0!==t&&(c.innerHTML=t)},a.disable=function(){c.disabled=!0},a.enable=function(){c.disabled=!1},this.processElement(a,s),a}addButtons(t,e,s){s=this.processOptions(s);const n=this;let o="";const r="calc( "+(100/(e=e||"").length).toFixed(3)+"% - 4px )",l="width:"+r+"; width: -moz-"+r+"; width: -webkit-"+r+"; margin: 2px;";if(e&&"object"==typeof e)for(const t in e){let i="";s.title&&s.title.constructor===Array&&(i=s.title[t]||""),o+="<button class='litebutton' title='"+i+"' tabIndex='"+this.tab_index+"' style='"+l+"'>"+e[t]+"</button>",this.tab_index++}const a=this.createWidget(t,o,s),c=a.querySelectorAll("button"),d=(e,o)=>{this.onWidgetChange.call(n,a,t,e.innerHTML,s,null,o),i.LiteGUI.trigger(a,"wclick",e.innerHTML)};for(let t=0;t<c.length;++t){const e=c[t];e.addEventListener("click",d.bind(void 0,e))}return this.append(a,s),this.processElement(a,s),a}addIcon(t,e,s){s=this.processOptions(s),e=e||"";const n=this,o=s.image,r=s.width||s.size||20,l=s.height||s.size||20,a=this.createWidget(t,"<span class='icon' "+(s.title?"title='"+s.title+"'":"")+" tabIndex='"+this.tab_index+"'></span>",s);this.tab_index++;const c=a.querySelector("span.wcontent"),d=a.querySelector("span.icon");let h=s.x||0;s.index&&(h=s.index*-r);const u=e?l:0;return a.style.minWidth=a.style.width=r+"px",a.style.margin="0 2px",a.style.padding="0",c.style.margin="0",c.style.padding="0",d.style.display="inline-block",d.style.cursor="pointer",d.style.width=r+"px",d.style.height=l+"px",d.style.backgroundImage="url('"+o+"')",d.style.backgroundPosition=h+"px "+u+"px",d.addEventListener("mousedown",(o=>{o.preventDefault(),e=!e;const r=this.onWidgetChange.call(n,a,t,e,s,null,null);i.LiteGUI.trigger(a,"wclick",e),void 0!==r&&(e=r);const c=e?l:0;d.style.backgroundPosition=h+"px "+c+"px",!1===s.toggle&&setTimeout((()=>{d.style.backgroundPosition=h+"px 0px",e=!1}),200)})),this.append(a,s),a.setValue=(i,o)=>{if(void 0===i)return;const r=(e=i)?l:0;d.style.backgroundPosition=h+"px "+r+"px",o||this.onWidgetChange.call(n,a,t,e,s,null,null)},a.getValue=function(){return e},this.processElement(a,s),a}addColor(t,e,s){s=this.processOptions(s),e=e||[0,0,0];const n=this;this.values.set(t,e);let l="<input tabIndex='"+this.tab_index+"' id='colorpicker-"+t+"' class='color' value='"+e[0]+","+e[1]+","+e[2]+"' "+(s.disabled?"disabled":"")+"/>";this.tab_index++,s.show_rgb&&(l+="<span class='rgb-color'>"+r.parseColor(e)+"</span>");const a=this.createWidget(t,l,s);this.append(a,s);const c=a.querySelector("input.color");window.jscolor=o.jscolor;let d=null;if(window.jscolor){d=new o.jscolor.color(c),d.pickerFaceColor="#333",d.pickerBorderColor="black",d.pickerInsetColor="#222";let r=1;if(s.disabled&&(d.pickerOnfocus=!1),e.constructor!==String&&e.length&&e.length>2){const t=1;d.fromRGB(e[0]*t,e[1]*t,e[2]*t),r=t}if(c.addEventListener("change",(t=>{const e=a.querySelector(".rgb-color");e&&(e.innerHTML=i.LiteGUI.Inspector.parseColor(d.rgb))})),c.addEventListener("focusin",(t=>{c.focused=!0})),c.addEventListener("focusout",(t=>{c.focused=!1;const e=[d.rgb[0]*r,d.rgb[1]*r,d.rgb[2]*r];s.finalCallback?s.finalCallback.call(a,e.concat(),"#"+d.toString(),d):s.callback&&s.callback.call(a,e.concat(),"#"+d.toString(),d)})),s.add_dragger){d.onImmediateChange=e=>{const o=[d.rgb[0]*r,d.rgb[1]*r,d.rgb[2]*r],l=[o.concat(),d.toString()];i.LiteGUI.trigger(a,"wbeforechange",l),this.values.set(t,o),s.callback&&e?s.callback.call(a,o.concat(),"#"+d.toString(),d):!s.callback&&!s.finalCallback||e||(s.finalCallback?s.finalCallback.call(a,o.concat(),"#"+d.toString(),d):s.callback&&s.callback.call(a,o.concat(),"#"+d.toString(),d)),i.LiteGUI.trigger(a,"wchange",l),n.onchange&&n.onchange(t,o.concat(),a)},s.step=s.step||.01,s.dragger_class="nano";const e=new i.LiteGUI.Dragger(1,s);a.querySelector(".wcontent").appendChild(e.root);const o=function(t){d.onImmediateChange&&d.onImmediateChange(t)},l=function(){c.focused||o(!1)};e.root.addEventListener("stop_dragging",l),e.input.addEventListener("change",(t=>{const s=parseFloat(e.input.value);r=s,o(e.dragging)})),a.setValue=function(t,s){d.fromRGB(t[0],t[1],t[2]),s||i.LiteGUI.trigger(e.input,"change")}}else d.onImmediateChange=()=>{const e=[d.rgb[0]*r,d.rgb[1]*r,d.rgb[2]*r],o=[e.concat(),d.toString()];i.LiteGUI.trigger(a,"wbeforechange",o),this.values.set(t,e),s.callback&&s.callback.call(a,e.concat(),"#"+d.toString(),d),i.LiteGUI.trigger(a,"wchange",o),n.onchange&&n.onchange(t,e.concat(),a)},a.setValue=function(t){d.fromRGB(t[0],t[1],t[2])};a.getValue=function(){return e}}else c.addEventListener("change",(t=>{const e=a.querySelector(".rgb-color");e&&(e.innerHTML=i.LiteGUI.Inspector.parseColor(d.rgb))}));return this.processElement(a,s),a}addColorPosition(t,e,s){s=this.processOptions(s),e=e||[0,0,0];const n=this;this.values.set(t,e);let l="<input tabIndex='"+this.tab_index+"' id='colorpicker-"+t+"' class='color' value='"+e[0]+","+e[1]+","+e[2]+"' "+(s.disabled?"disabled":"")+"/>";this.tab_index++,s.show_rgb&&(l+="<span class='rgb-color'>"+r.parseColor(e)+"</span>");const a=this.createWidget(t,l,s);this.append(a,s);const c=a.querySelector("input.color");let d=null;if(window.jscolor){if(d=new o.jscolor.color(c),d.pickerFaceColor="#333",d.pickerBorderColor="black",d.pickerInsetColor="#222",d.position=s.position||0,s.disabled&&(d.pickerOnfocus=!1),e.constructor!==String&&e.length&&e.length>2&&d.fromRGB(e[0],e[1],e[2]),c.addEventListener("change",(t=>{const e=a.querySelector(".rgb-color");e&&(e.innerHTML=i.LiteGUI.Inspector.parseColor(d.rgb))})),c.addEventListener("focusin",(t=>{c.focused=!0})),c.addEventListener("focusout",(t=>{c.focused=!1,s.finalCallback?s.finalCallback.call(a,d.position,"#"+d.toString(),d):s.callback&&s.callback.call(a,d.position,"#"+d.toString(),d)})),s.add_dragger){d.onImmediateChange=function(e){const o=[d.rgb[0],d.rgb[1],d.rgb[2]],r=[o.concat(),d.toString()];i.LiteGUI.trigger(a,"wbeforechange",r),this.values.set(t,o),s.callback&&e?s.callback.call(a,d.position,"#"+d.toString(),d):!s.callback&&!s.finalCallback||e||(s.finalCallback?s.finalCallback.call(a,d.position,"#"+d.toString(),d):s.callback&&s.callback.call(a,d.position,"#"+d.toString(),d)),i.LiteGUI.trigger(a,"wchange",r),n.onchange&&n.onchange(t,o.concat(),a)},s.step=s.step||.01,s.dragger_class="nano";const e=new i.LiteGUI.Dragger(d.position,s);a.querySelector(".wcontent").appendChild(e.root);const o=function(t){d.onImmediateChange&&d.onImmediateChange(t)},r=function(){c.focused||o(!1)};e.root.addEventListener("stop_dragging",r),e.input.addEventListener("change",(t=>{const s=parseFloat(e.input.value);d.position=s,o(e.dragging)})),a.setValue=function(t,s){d.fromRGB(t[0],t[1],t[2]),s||i.LiteGUI.trigger(e.input,"change")}}else d.onImmediateChange=()=>{const e=[d.rgb[0]*d.rgb_intensity,d.rgb[1]*d.rgb_intensity,d.rgb[2]*d.rgb_intensity],o=[e.concat(),d.toString()];i.LiteGUI.trigger(a,"wbeforechange",o),this.values.set(t,e),s.callback&&s.callback.call(a,e.concat(),"#"+d.toString(),d),i.LiteGUI.trigger(a,"wchange",o),n.onchange&&n.onchange(t,e.concat(),a)},a.setValue=function(t){d.fromRGB(t[0],t[1],t[2])};a.getValue=function(){return e}}else c.addEventListener("change",(t=>{const e=a.querySelector(".rgb-color");e&&(e.innerHTML=i.LiteGUI.Inspector.parseColor(d.rgb))}));return this.processElement(a,s),a}addFile(t,e,s){s=this.processOptions(s),e=e||"";const i=this;this.values.set(t,e);const n=this.createWidget(t,"<span class='inputfield full whidden' style='width: calc(100% - 26px)'><span class='filename'></span></span><button class='litebutton' style='width:20px; margin-left: 2px;'>...</button><input type='file' size='100' class='file' value='"+e+"'/>",s);n.querySelector(".wcontent").style.position="relative";const o=n.querySelector(".wcontent input");s.accept&&(o.accept=s.accept);const r=n.querySelector(".wcontent .filename");return e&&(r.innerText=e.name),o.addEventListener("change",(e=>{if(!e.target.files.length)return r.innerText="",void this.onWidgetChange.call(i,n,t,null,s,null,null);const o=e.target.files[0];if(o.files=e.target.files,s.generate_url&&(o.url=URL.createObjectURL(e.target.files[0])),r.innerText=o.name,s.read_file){const e=new FileReader;e.onload=e=>{o.data=e.target.result,this.onWidgetChange.call(i,n,t,o,s,null,null)},"binary"==s.read_file?e.readAsArrayBuffer(o):"data_url"==s.read_file?e.readAsDataURL(o):e.readAsText(o)}else this.onWidgetChange.call(i,n,t,o,s,null,null)})),this.append(n,s),n}addLine(t,e,s){s=this.processOptions(s),e=e||"";const n=this;this.values.set(t,e);const o=this.createWidget(t,"<span class='line-editor'></span>",s);o.style.width="100%";const r=new i.LiteGUI.LineEditor(e,s);return o.querySelector("span.line-editor").appendChild(r),i.LiteGUI.bind(r,"change",(e=>{i.LiteGUI.trigger(o,"wbeforechange",[e.target.value]),s.callback&&s.callback.call(o,e.target.value),i.LiteGUI.trigger(o,"wchange",[e.target.value]),this.onWidgetChange.call(n,o,t,e.target.value,s,null,null)})),this.append(o,s),o}addTree(t,e,s){s=this.processOptions(s),e=e||"";const n=this.createWidget(t,"<div class='wtree inputfield full'></div>",s),o=n.querySelector(".wtree");s.height&&(o.style.height="number"==typeof s.height?s.height+"px":s.height,o.style.overflow="auto");const r=n.tree=new i.LiteGUI.Tree(e,s.tree_options);return r.onItemSelected=function(t,e){s.callback&&s.callback.call(n,t,e)},o.appendChild(r.root),n.setValue=function(t){r.updateTree(t)},this.append(n,s),this.processElement(n,s),n}addDataTree(t,e,s){s=this.processOptions(s),e=e||"";const i=this.createWidget(t,"<div class='wtree'></div>",s);return function t(e,s){for(const i in s){const n=document.createElement("div");n.className="treenode","object"==typeof s[i]?(n.innerHTML="<span class='itemname'>"+i+"</span><span class='itemcontent'></span>",t(n.querySelector(".itemcontent"),s[i])):n.innerHTML="<span class='itemname'>"+i+"</span><span class='itemvalue'>"+s[i]+"</span>",e.appendChild(n)}}(i.querySelector(".wtree"),e),this.append(i,s),i}addArray(t,e,s){const i=this;if(!e||e.constructor!==Array)return void console.error("Inspector: Array widget value must be a valid array");const n=(s=this.processOptions(s)).data_type||"string",o=s.max_items||100;let r=null;this.widgets_per_row=3,this.addInfo(t,null,{name_width:"100%",width:"100% - 160px"});const l=this.addString("length",e.length||"0",{width:100,callback:t=>{const s=parseInt(t);e<0&&(e=0),e.length=s,c.call(r,null)}});this.addButtons(null,["+","-"],{width:60,callback:function(t){"+"==t?e.length=e.length+1:e.length>0&&(e.length=e.length-1),l.setValue(e.length),c.call(r,null)}}),this.widgets_per_row=1,r=this.addContainer(t,s),r.value=e;const a=function(t,e){t.value[t.index]=e,s.callback&&s.callback.call(r,t.value,t.index)},c=function(t){const e=t.value,r=Math.min(e.length,o);i.widgets_per_row+=1,t.innerHTML="";for(let o=0;o<r;++o){let r=null;void 0!==e[o]&&(r=e[o]);const l=document.createElement("div");l.className="array-row",l.innerHTML="<span class='row-index'>"+o+"</span><span class='row-cell'></span><button style='width: 30px;' class='litebutton single row-trash'><img src='imgs/mini-icon-trash.png'/></button>",t.appendChild(l);const c={widget_parent:l.querySelector(".row-cell"),callback:a.bind(void 0,{value:t.value,index:o})};if(s.data_options)for(const t in s.data_options)c[t]=s.data_options[t];i.add(n,null,r,c)}i.widgets_per_row-=1};return c(r),r.setValue=function(t){this.value=t,c(r)},r.getValue=function(){return this.value},r}addContainer(t,e){t&&t.constructor!==String&&console.warn("LiteGUI.Inspector.addContainer first parameter must be a string with the name");const s=this.startContainer(null,e);return this.endContainer(),s}startContainer(t,e){e=this.processOptions(e);const s=document.createElement("DIV");return s.className="wcontainer",this.applyOptions(s,e),this.row_number=0,this.append(s),this.pushContainer(s),e.widgets_per_row&&(this.widgets_per_row=e.widgets_per_row),e.height&&(s.style.height=i.LiteGUI.sizeToCSS(e.height),s.style.overflow="auto"),s.refresh=function(){s.on_refresh&&s.on_refresh.call(this,s)},s}endContainer(t,e){this.popContainer()}addSection(t,e){e=this.processOptions(e);const s=this;this.current_section&&this.current_section.end();const i=document.createElement("DIV");i.className="wsection",t||(i.className+=" notitle"),e.className&&(i.className+=" "+e.className),e.collapsed&&!e.no_collapse&&(i.className+=" collapsed"),e.id&&(i.id=e.id),e.instance&&(i.instance=e.instance);let n="";return t&&(n+="<div class='wsectiontitle'>"+(e.no_collapse?"":"<span class='switch-section-button'></span>")+t+"</div>"),n+="<div class='wsectioncontent'></div>",i.innerHTML=n,i._last_container_stack=this._current_container_stack.concat(),this.root.appendChild(i),this.sections.push(i),i.sectiontitle=i.querySelector(".wsectiontitle"),t&&!e.no_collapse&&i.sectiontitle.addEventListener("click",(t=>{if("button"==t.target.localName)return;i.classList.toggle("collapsed");const s=i.querySelector(".wsectioncontent");s.style.display="none"===s.style.display?null:"none",e.callback&&e.callback.call(i,i.classList.contains("collapsed"))})),e.collapsed&&!e.no_collapse&&(i.querySelector(".wsectioncontent").style.display="none"),this.setCurrentSection(i),e.widgets_per_row&&(this.widgets_per_row=e.widgets_per_row),i.refresh=function(){i.on_refresh&&i.on_refresh.call(this,i)},i.end=function(){if(s.current_section!=this)return;s._current_container_stack=this._last_container_stack,s._current_container=null;const t=this.querySelector(".wsectioncontent");t&&(s.isContainerInStack(t)&&s.popContainer(t),s.current_section=null)},i}setCurrentSection(t){if(this.current_section==t)return;this.current_section=t;const e=t.parentNode;this.popContainer(e);const s=t.querySelector(".wsectioncontent");this.pushContainer(s)}getCurrentSection(){for(let t=this._current_container_stack.length-1;t>=0;--t){const e=this._current_container_stack[t];if(e.classList.contains("wsectioncontent"))return e.parentNode}return null}endCurrentSection(){this.current_section&&this.current_section.end()}beginGroup(t,e){e=this.processOptions(e);const s=document.createElement("DIV");s.className="wgroup",t=t||"",s.innerHTML="<div class='wgroupheader "+(e.title?"wtitle":"")+"'><span class='switch-section-button'></span>"+t+"</div>",s.group=!0;const n=document.createElement("DIV");n.className="wgroupcontent",e.collapsed&&(n.style.display="none"),e.height&&(n.style.height=i.LiteGUI.sizeToCSS(e.height)),e.scrollable&&(n.style.overflow="auto"),s.appendChild(n);let o=e.collapsed||!1;const r=s.querySelector(".wgroupheader");return o&&r.classList.add("collapsed"),r.addEventListener("click",(t=>{const e=s.querySelector(".wgroupcontent").style;e.display="none"===e.display?"":"none",o=!o,o?r.classList.add("collapsed"):r.classList.remove("collapsed"),t.preventDefault()})),this.append(s,e),this.pushContainer(n),s}endGroup(){do{this.popContainer()}while(this._current_container&&!this._current_container.classList.contains("wgroupcontent"))}addTitle(t,e){e=this.processOptions(e);const s=document.createElement("DIV");let i="<span class='wtitle'><span class='text'>"+t+"</span>";return e.help&&(i+="<span class='help'><div class='help-content'>"+e.help+"</div></span>"),i+="</span>",s.innerHTML=i,s.setValue=function(t){this.querySelector(".text").innerHTML=t},this.row_number=0,this.append(s,e),s}scrollTo(t){const e=this.root.querySelector("#"+t);if(!e)return;const s=this.root.offsetTop,i=e.offsetTop-s;this.root.parentNode.parentNode.scrollTop=i}processOptions(t){return"function"==typeof t&&(t={callback:t}),t||{}}processElement(t,e){e.callback_update&&t.setValue&&(t.on_update=function(){this.setValue(e.callback_update.call(this),!0)})}updateWidgets(){for(let t=0;t<this.widgets.length;++t){const e=this.widgets[t];e.on_update&&e.on_update(e)}}static parseColor(t){return"<span style='color: #FAA'>"+t[0].toFixed(2)+"</span>,<span style='color: #AFA'>"+t[1].toFixed(2)+"</span>,<span style='color: #AAF'>"+t[2].toFixed(2)+"</span>"}}e.Inspector=r,r.widget_constructors={null:"addNull",title:"addTitle",info:"addInfo",number:"addNumber",slider:"addSlider",string:"addString",text:"addString",textarea:"addTextarea",color:"addColor",boolean:"addCheckbox",checkbox:"addCheckbox",icon:"addIcon",vec2:"addVector2",vector2:"addVector2",vec3:"addVector3",vector3:"addVector3",vec4:"addVector4",vector4:"addVector4",enum:"addCombo",dropdown:"addCombo",combo:"addCombo",button:"addButton",buttons:"addButtons",file:"addFile",line:"addLine",list:"addList",tree:"addTree",datatree:"addDataTree",pad:"addPad",array:"addArray",separator:"addSeparator"}},90:(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.jscolor=void 0;class jscolor{static install(){jscolor.addEvent(window,"load",jscolor.init())}static init(){jscolor.binding&&jscolor.bind(),jscolor.preloading&&jscolor.preload()}static getDir(){if(!jscolor.dir){var t=jscolor.detectDir();jscolor.dir=!1!==t?t:"jscolor/"}return jscolor.dir}static detectDir(){let t=location.href,e=document.getElementsByTagName("base");for(let s=0;s<e.length;s+=1)e[s].href&&(t=e[s].href);let s=document.getElementsByTagName("script");for(var i=0;i<s.length;i+=1)if(s[i].src&&/(^|\/)jscolor(.*).js([?#].*)?$/i.test(s[i].src)){var n=new jscolor.URI(s[i].src).toAbsolute(t);return n.path=n.path.replace(/[^\/]+$/,""),n.query=null,n.fragment=null,n.toString()}return!1}static bind(){for(var matchClass=new RegExp("(^|\\s)("+jscolor.bindClass+")\\s*(\\{[^}]*\\})?","i"),e=document.getElementsByTagName("input"),i=0;i<e.length;i+=1){var m;if(!e[i].color&&e[i].className&&(m=e[i].className.match(matchClass))){var prop={};if(m[3])try{eval("prop="+m[3])}catch(t){}e[i].color=new jscolor.color(e[i],prop)}}}static preload(){for(var t in jscolor.imgRequire)jscolor.imgRequire.hasOwnProperty(t)&&jscolor.loadImage(t)}static requireImage(t){jscolor.imgRequire[t]=!0}static loadImage(t){jscolor.imgLoaded[t]||(jscolor.imgLoaded[t]=new Image,jscolor.imgLoaded[t].src=jscolor.getDir()+t)}static fetchElement(t){return"string"==typeof t?document.getElementById(t):t}static addEvent(t,e,s){t.addEventListener?t.addEventListener(e,s,!1):t.attachEvent&&t.attachEvent("on"+e,s)}static fireEvent(t,e){var s;t&&(document.createEvent?((s=document.createEvent("HTMLEvents")).initEvent(e,!0,!0),t.dispatchEvent(s)):document.createEventObject?(s=document.createEventObject(),t.fireEvent("on"+e,s)):t["on"+e]&&t["on"+e]())}static getElementPos(t){var e=t,s=t,i=0,n=0;if(e.offsetParent)do{i+=e.offsetLeft,n+=e.offsetTop}while(e=e.offsetParent);for(;(s=s.parentNode)&&"BODY"!==s.nodeName.toUpperCase();)i-=s.scrollLeft,n-=s.scrollTop;return[i,n]}static getElementSize(t){return[t.offsetWidth,t.offsetHeight]}static getRelMousePos(t){var e=0,s=0;return t||(t=window.event),"number"==typeof t.offsetX?(e=t.offsetX,s=t.offsetY):"number"==typeof t.layerX&&(e=t.layerX,s=t.layerY),{x:e,y:s}}static getViewPos(){return"number"==typeof window.pageYOffset?[window.pageXOffset,window.pageYOffset]:document.body&&(document.body.scrollLeft||document.body.scrollTop)?[document.body.scrollLeft,document.body.scrollTop]:document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)?[document.documentElement.scrollLeft,document.documentElement.scrollTop]:[0,0]}static getViewSize(){return"number"==typeof window.innerWidth?[window.innerWidth,window.innerHeight]:document.body&&(document.body.clientWidth||document.body.clientHeight)?[document.body.clientWidth,document.body.clientHeight]:document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?[document.documentElement.clientWidth,document.documentElement.clientHeight]:[0,0]}}exports.jscolor=jscolor,jscolor.dir="",jscolor.bindClass="color",jscolor.preloading=!0,jscolor.binding=!0,jscolor.images={pad:[181,101],sld:[16,101],cross:[15,15],arrow:[7,11]},jscolor.imgRequire={},jscolor.imgLoaded={},jscolor.URI=class{constructor(t){this.scheme=null,this.authority=null,this.path="",this.query=null,this.fragment=null,t&&this.parse(t)}parse(t){var e=t.match(/^(([A-Za-z][0-9A-Za-z+.-]*)(:))?((\/\/)([^\/?#]*))?([^?#]*)((\?)([^#]*))?((#)(.*))?/);return this.scheme=e[3]?e[2]:null,this.authority=e[5]?e[6]:null,this.path=e[7],this.query=e[9]?e[10]:null,this.fragment=e[12]?e[13]:null,this}toString(){var t="";return null!==this.scheme&&(t=t+this.scheme+":"),null!==this.authority&&(t=t+"//"+this.authority),null!==this.path&&(t+=this.path),null!==this.query&&(t=t+"?"+this.query),null!==this.fragment&&(t=t+"#"+this.fragment),t}toAbsolute(t){var e=new jscolor.URI(t),s=this,i=new jscolor.URI;return null!==e.scheme&&(null!==s.scheme&&s.scheme.toLowerCase()===e.scheme.toLowerCase()&&(s.scheme=null),null!==s.scheme?(i.scheme=s.scheme,i.authority=s.authority,i.path=this.removeDotSegments(s.path),i.query=s.query):(null!==s.authority?(i.authority=s.authority,i.path=this.removeDotSegments(s.path),i.query=s.query):(""===s.path?(i.path=e.path,null!==s.query?i.query=s.query:i.query=e.query):("/"===s.path.substring(0,1)?i.path=this.removeDotSegments(s.path):(null!==e.authority&&""===e.path?i.path="/"+s.path:i.path=e.path.replace(/[^\/]+$/,"")+s.path,i.path=this.removeDotSegments(i.path)),i.query=s.query),i.authority=e.authority),i.scheme=e.scheme),i.fragment=s.fragment,i)}removeDotSegments(t){for(var e="";t;)if("../"===t.substring(0,3)||"./"===t.substring(0,2))t=t.replace(/^\.+/,"").substring(1);else if("/./"===t.substring(0,3)||"/."===t)t="/"+t.substring(3);else if("/../"===t.substring(0,4)||"/.."===t)t="/"+t.substring(4),e=e.replace(/\/?[^\/]*$/,"");else if("."===t||".."===t)t="";else{var s=t.match(/^\/?[^\/]*/)[0];t=t.substring(s.length),e+=s}return e}},jscolor.color=class color{constructor(t,e){for(var s in this.required=!0,this.adjust=!0,this.hash=!1,this.caps=!0,this.slider=!0,this.valueElement=t,this.styleElement=t,this.onImmediateChange=null,this.hsv=[0,0,1],this.rgb=[1,1,1],this.pickerOnfocus=!0,this.pickerMode="HSV",this.pickerPosition="bottom",this.pickerSmartPosition=!0,this.pickerButtonHeight=20,this.pickerClosable=!1,this.pickerCloseText="Close",this.pickerButtonColor="ButtonText",this.pickerFace=10,this.pickerFaceColor="ThreeDFace",this.pickerBorder=1,this.pickerBorderColor="ThreeDHighlight ThreeDShadow ThreeDShadow ThreeDHighlight",this.pickerInset=1,this.pickerInsetColor="ThreeDShadow ThreeDHighlight ThreeDHighlight ThreeDShadow",this.pickerZIndex=1e4,this.leaveValue=1,this.leaveStyle=2,this.leavePad=4,this.leaveSld=8,this.modeID="hvs"===this.pickerMode.toLowerCase()?1:0,this.abortBlur=!1,this.valueElement=jscolor.fetchElement(this.valueElement),this.styleElement=jscolor.fetchElement(this.styleElement),this.holdPad=!1,this.holdSld=!1,this.target=t,e)e.hasOwnProperty(s)&&(this[s]=e[s]);if(jscolor.addEvent(t,"focus",(()=>{this.pickerOnfocus&&this.showPicker()})),jscolor.addEvent(t,"blur",(()=>{this.blurTarget(),this.abortBlur=!1})),this.valueElement){var i=()=>{this.fromString(this.valueElement.value,this.leaveValue),this.dispatchImmediateChange()};jscolor.addEvent(this.valueElement,"keyup",i),jscolor.addEvent(this.valueElement,"input",i),jscolor.addEvent(this.valueElement,"blur",this.blurValue),this.valueElement.setAttribute("autocomplete","off")}switch(this.styleElement&&(this.styleElement.jscStyle={backgroundImage:this.styleElement.style.backgroundImage,backgroundColor:this.styleElement.style.backgroundColor,color:this.styleElement.style.color}),this.modeID){case 0:jscolor.requireImage("hs.png");break;case 1:jscolor.requireImage("hv.png")}jscolor.requireImage("cross.gif"),jscolor.requireImage("arrow.gif"),this.importColor()}get Hsv(){return this.hsv}get Rgb(){return this.rgb}hidePicker(){this.isPickerOwner()&&this.removePicker()}showPicker(){if(!this.isPickerOwner()){var t,e,s,i=jscolor.getElementPos(this.target),n=jscolor.getElementSize(this.target),o=jscolor.getViewPos(),r=jscolor.getViewSize(),l=this.getPickerDims(this);switch(this.pickerPosition.toLowerCase()){case"left":t=1,e=0,s=-1;break;case"right":t=1,e=0,s=1;break;case"top":t=0,e=1,s=-1;break;default:t=0,e=1,s=1}var a=(n[e]+l[e])/2;if(this.pickerSmartPosition)c=[-o[t]+i[t]+l[t]>r[t]&&-o[t]+i[t]+n[t]/2>r[t]/2&&i[t]+n[t]-l[t]>=0?i[t]+n[t]-l[t]:i[t],-o[e]+i[e]+n[e]+l[e]-a+a*s>r[e]?-o[e]+i[e]+n[e]/2>r[e]/2&&i[e]+n[e]-a-a*s>=0?i[e]+n[e]-a-a*s:i[e]+n[e]-a+a*s:i[e]+n[e]-a+a*s>=0?i[e]+n[e]-a+a*s:i[e]+n[e]-a-a*s];else var c=[i[t],i[e]+n[e]-a+a*s];this.drawPicker(c[t],c[e])}}importColor(){this.valueElement?this.adjust?!this.required&&/^\s*$/.test(this.valueElement.value)?(this.valueElement.value="",this.styleElement.style.backgroundImage=this.styleElement.jscStyle.backgroundImage,this.styleElement.style.backgroundColor=this.styleElement.jscStyle.backgroundColor,this.styleElement.style.color=this.styleElement.jscStyle.color,this.exportColor(this.leaveValue|this.leaveStyle)):this.fromString(this.valueElement.value)||this.exportColor():this.fromString(this.valueElement.value,this.leaveValue)||(this.styleElement.style.backgroundImage=this.styleElement.jscStyle.backgroundImage,this.styleElement.style.backgroundColor=this.styleElement.jscStyle.backgroundColor,this.styleElement.style.color=this.styleElement.jscStyle.color,this.exportColor(this.leaveValue|this.leaveStyle)):this.exportColor()}exportColor(t){if(!((t=t||0)&this.leaveValue)&&this.valueElement){var e=this.toString();this.caps&&(e=e.toUpperCase()),this.hash&&(e="#"+e),this.valueElement.value=e}t&this.leaveStyle||!this.styleElement||(this.styleElement.style.backgroundImage="none",this.styleElement.style.backgroundColor="#"+this.toString(),this.styleElement.style.color=.213*this.rgb[0]+.715*this.rgb[1]+.072*this.rgb[2]<.5?"#FFF":"#000"),t&this.leavePad||!this.isPickerOwner()||this.redrawPad(),t&this.leaveSld||!this.isPickerOwner()||this.redrawSld()}fromHSV(t,e,s,i){null!=t||t<0&&(t=0)||t>6&&(t=6),null!=e||e<0&&(e=0)||e>1&&(e=1),null!=s||s<0&&(s=0)||s>1&&(s=1),this.rgb=this.HSV_RGB(null===t?this.hsv[0]:this.hsv[0]=t,null===e?this.hsv[1]:this.hsv[1]=e,null===s?this.hsv[2]:this.hsv[2]=s),this.exportColor(i)}fromRGB(t,e,s,i){t<0&&(t=0)||t>1&&(t=1),e<0&&(e=0)||e>1&&(e=1),s<0&&(s=0)||s>1&&(s=1);var n=this.RGB_HSV(null===t?this.rgb[0]:this.rgb[0]=t,null===e?this.rgb[1]:this.rgb[1]=e,null===s?this.rgb[2]:this.rgb[2]=s);null!==n[0]&&(this.hsv[0]=n[0]),0!==n[2]&&(this.hsv[1]=n[1]),this.hsv[2]=n[2],this.exportColor(i)}fromString(t,e){var s=t.match(/^\W*([0-9A-F]{3}([0-9A-F]{3})?)\W*$/i);return!!s&&(6===s[1].length?this.fromRGB(parseInt(s[1].substring(0,2),16)/255,parseInt(s[1].substring(2,2),16)/255,parseInt(s[1].substring(4,2),16)/255,e):this.fromRGB(parseInt(s[1].charAt(0)+s[1].charAt(0),16)/255,parseInt(s[1].charAt(1)+s[1].charAt(1),16)/255,parseInt(s[1].charAt(2)+s[1].charAt(2),16)/255,e),!0)}toString(){return(256|Math.round(255*this.rgb[0])).toString(16).substring(1)+(256|Math.round(255*this.rgb[1])).toString(16).substring(1)+(256|Math.round(255*this.rgb[2])).toString(16).substring(1)}RGB_HSV(t,e,s){var i=Math.min(Math.min(t,e),s),n=Math.max(Math.max(t,e),s),o=n-i;if(0===o)return[null,0,n];var r=t===i?3+(s-e)/o:e===i?5+(t-s)/o:1+(e-t)/o;return[6===r?0:r,o/n,n]}HSV_RGB(t,e,s){if(null===t)return[s,s,s];var i=Math.floor(t),n=s*(1-e),o=s*(1-e*(i%2?t-i:1-(t-i)));switch(i){case 6:case 0:default:return[s,o,n];case 1:return[o,s,n];case 2:return[n,s,o];case 3:return[n,o,s];case 4:return[o,n,s];case 5:return[s,n,o]}}removePicker(){var t=jscolor.picker.owner.valueElement.ownerDocument;delete jscolor.picker.owner,t.getElementsByTagName("body")[0].removeChild(jscolor.picker.boxB)}drawPicker(t,e){if(!jscolor.picker){jscolor.picker={box:document.createElement("div"),boxB:document.createElement("div"),pad:document.createElement("div"),padB:document.createElement("div"),padM:document.createElement("div"),sld:document.createElement("div"),sldB:document.createElement("div"),sldM:document.createElement("div"),btn:document.createElement("div"),btnS:document.createElement("span"),btnT:document.createTextNode(this.pickerCloseText)};for(var s=0;s<jscolor.images.sld[1];s+=4){var i=document.createElement("div");i.style.height="4px",i.style.fontSize="1px",i.style.lineHeight="0",jscolor.picker.sld.appendChild(i)}jscolor.picker.sldB.appendChild(jscolor.picker.sld),jscolor.picker.box.appendChild(jscolor.picker.sldB),jscolor.picker.box.appendChild(jscolor.picker.sldM),jscolor.picker.padB.appendChild(jscolor.picker.pad),jscolor.picker.box.appendChild(jscolor.picker.padB),jscolor.picker.box.appendChild(jscolor.picker.padM),jscolor.picker.btnS.appendChild(jscolor.picker.btnT),jscolor.picker.btn.appendChild(jscolor.picker.btnS),jscolor.picker.box.appendChild(jscolor.picker.btn),jscolor.picker.boxB.appendChild(jscolor.picker.box)}var n=jscolor.picker;n.box.onmouseup=n.box.onmouseout=()=>{this.target.focus()},n.box.onmousedown=t=>(this.abortBlur=!0,t.preventDefault(),!1),n.box.onmousemove=t=>{(this.holdPad||this.holdSld)&&(this.holdPad&&this.setPad(t),this.holdSld&&this.setSld(t),document.getSelection()?document.getSelection().empty():window.getSelection&&window.getSelection().removeAllRanges(),this.dispatchImmediateChange())},n.padM.onmouseup=n.padM.onmouseout=()=>{this.holdPad&&(this.holdPad=!1,jscolor.fireEvent(this.valueElement,"change"))},n.padM.onmousedown=t=>{this.holdPad=!0,this.setPad(t),this.dispatchImmediateChange()},n.sldM.onmouseup=n.sldM.onmouseout=function(){this.holdSld&&(this.holdSld=!1,jscolor.fireEvent(this.valueElement,"change"))},n.sldM.onmousedown=t=>{this.holdSld=!0,this.setSld(t),this.dispatchImmediateChange()};var o=this.getPickerDims(this);n.box.style.width=o[0]+"px",n.box.style.height=o[1]+"px",n.boxB.style.position="absolute",n.boxB.style.clear="both",n.boxB.style.left=t+"px",n.boxB.style.top=e+"px",n.boxB.style.zIndex=this.pickerZIndex,n.boxB.style.border=this.pickerBorder+"px solid",n.boxB.style.borderColor=this.pickerBorderColor,n.boxB.style.background=this.pickerFaceColor,n.pad.style.width=jscolor.images.pad[0]+"px",n.pad.style.height=jscolor.images.pad[1]+"px",n.padB.style.position="absolute",n.padB.style.left=this.pickerFace+"px",n.padB.style.top=this.pickerFace+"px",n.padB.style.border=this.pickerInset+"px solid",n.padB.style.borderColor=this.pickerInsetColor,n.padM.style.position="absolute",n.padM.style.left="0",n.padM.style.top="0",n.padM.style.width=this.pickerFace+2*this.pickerInset+jscolor.images.pad[0]+jscolor.images.arrow[0]+"px",n.padM.style.height=n.box.style.height,n.padM.style.cursor="crosshair",n.sld.style.overflow="hidden",n.sld.style.width=jscolor.images.sld[0]+"px",n.sld.style.height=jscolor.images.sld[1]+"px",n.sldB.style.display=this.slider?"block":"none",n.sldB.style.position="absolute",n.sldB.style.right=this.pickerFace+"px",n.sldB.style.top=this.pickerFace+"px",n.sldB.style.border=this.pickerInset+"px solid",n.sldB.style.borderColor=this.pickerInsetColor,n.sldM.style.display=this.slider?"block":"none",n.sldM.style.position="absolute",n.sldM.style.right="0",n.sldM.style.top="0",n.sldM.style.width=jscolor.images.sld[0]+jscolor.images.arrow[0]+this.pickerFace+2*this.pickerInset+"px",n.sldM.style.height=n.box.style.height;try{n.sldM.style.cursor="pointer"}catch(t){n.sldM.style.cursor="hand"}var r,l,a,c=this;n.btn.style.display=this.pickerClosable?"block":"none",n.btn.style.position="absolute",n.btn.style.left=this.pickerFace+"px",n.btn.style.bottom=this.pickerFace+"px",n.btn.style.padding="0 15px",n.btn.style.height="18px",n.btn.style.border=this.pickerInset+"px solid",r=c.pickerInsetColor.split(/\s+/),l=r.length<2?r[0]:r[1]+" "+r[0]+" "+r[0]+" "+r[1],n.btn.style.borderColor=l,n.btn.style.color=this.pickerButtonColor,n.btn.style.font="12px sans-serif",n.btn.style.textAlign="center";try{n.btn.style.cursor="pointer"}catch(t){n.btn.style.cursor="hand"}switch(n.btn.onmousedown=function(){this.hidePicker()},n.btnS.style.lineHeight=n.btn.style.height,this.modeID){case 0:a="hs.png";break;case 1:a="hv.png"}n.padM.style.backgroundImage="url('"+jscolor.getDir()+"cross.gif')",n.padM.style.backgroundRepeat="no-repeat",n.sldM.style.backgroundImage="url('"+jscolor.getDir()+"arrow.gif')",n.sldM.style.backgroundRepeat="no-repeat",n.pad.style.backgroundImage="url('"+jscolor.getDir()+a+"')",n.pad.style.backgroundRepeat="no-repeat",n.pad.style.backgroundPosition="0 0",this.redrawPad(),this.redrawSld(),jscolor.picker.owner=this,jscolor.picker.owner.valueElement.ownerDocument.getElementsByTagName("body")[0].appendChild(n.boxB)}getPickerDims(t){return[2*t.pickerInset+2*t.pickerFace+jscolor.images.pad[0]+(t.slider?2*t.pickerInset+2*jscolor.images.arrow[0]+jscolor.images.sld[0]:0),t.pickerClosable?4*t.pickerInset+3*t.pickerFace+jscolor.images.pad[1]+t.pickerButtonHeight:2*t.pickerInset+2*t.pickerFace+jscolor.images.pad[1]]}redrawPad(){var t;switch(this.modeID){case 0:t=1;break;case 1:t=2}var e=Math.round(this.hsv[0]/6*(jscolor.images.pad[0]-1)),s=Math.round((1-this.hsv[t])*(jscolor.images.pad[1]-1));jscolor.picker.padM.style.backgroundPosition=this.pickerFace+this.pickerInset+e-Math.floor(jscolor.images.cross[0]/2)+"px "+(this.pickerFace+this.pickerInset+s-Math.floor(jscolor.images.cross[1]/2))+"px";var i,n,o,r=jscolor.picker.sld.childNodes;switch(this.modeID){case 0:i=this.HSV_RGB(this.hsv[0],this.hsv[1],1);for(var l=0;l<r.length;l+=1)r[l].style.backgroundColor="rgb("+i[0]*(1-l/r.length)*100+"%,"+i[1]*(1-l/r.length)*100+"%,"+i[2]*(1-l/r.length)*100+"%)";break;case 1:i=[this.hsv[2],0,0],n=[this.hsv[2],0,0],o=[this.hsv[2],0,0];var a=(l=Math.floor(this.hsv[0]))%2?this.hsv[0]-l:1-(this.hsv[0]-l);switch(l){case 6:case 0:i=[0,1,2];break;case 1:i=[1,0,2];break;case 2:i=[2,0,1];break;case 3:i=[2,1,0];break;case 4:i=[1,2,0];break;case 5:i=[0,2,1]}for(l=0;l<r.length;l+=1)n=1-1/(r.length-1)*l,o[1]=o[0]*(1-n*a),o[2]=o[0]*(1-n),r[l].style.backgroundColor="rgb("+100*o[i[0]]+"%,"+100*o[i[1]]+"%,"+100*o[i[2]]+"%)"}}redrawSld(){var t;switch(this.modeID){case 0:t=2;break;case 1:t=1}var e=Math.round((1-this.hsv[t])*(jscolor.images.sld[1]-1));jscolor.picker.sldM.style.backgroundPosition="0 "+(this.pickerFace+this.pickerInset+e-Math.floor(jscolor.images.arrow[1]/2))+"px"}isPickerOwner(){return jscolor.picker&&jscolor.picker.owner===this}blurTarget(){this.valueElement===this.target&&this.importColor(),this.pickerOnfocus&&this.hidePicker()}blurValue(){this.valueElement!==this.target&&this.importColor()}setPad(t){var e=jscolor.getRelMousePos(t),s=e.x-this.pickerFace-this.pickerInset,i=e.y-this.pickerFace-this.pickerInset;switch(this.modeID){case 0:this.fromHSV(s*(6/(jscolor.images.pad[0]-1)),1-i/(jscolor.images.pad[1]-1),null,this.leaveSld);break;case 1:this.fromHSV(s*(6/(jscolor.images.pad[0]-1)),null,1-i/(jscolor.images.pad[1]-1),this.leaveSld)}}setSld(t){var e=jscolor.getRelMousePos(t).y-this.pickerFace-this.pickerInset;switch(this.modeID){case 0:this.fromHSV(null,null,1-e/(jscolor.images.sld[1]-1),this.leavePad);break;case 1:this.fromHSV(null,1-e/(jscolor.images.sld[1]-1),null,this.leavePad)}}dispatchImmediateChange(){this.onImmediateChange&&("string"==typeof this.onImmediateChange?eval(this.onImmediateChange):this.onImmediateChange(this))}}},797:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Menubar=void 0;const i=s(776);e.Menubar=class{constructor(t,e){this.options=e||{},this.menu=[],this.panels=[],this.root=document.createElement("div"),this.root.id=t,this.root.className="litemenubar",this.content=document.createElement("ul"),this.root.appendChild(this.content),this.is_open=!1,this.auto_open=e.auto_open||!1,this.sort_entries=e.sort_entries||!1,this.closing_time=500}clear(){this.content.innerHTML="",this.menu=[],this.panels=[]}attachToPanel(t){t.content.insertBefore(this.root,t.content.firstChild)}add(t,e){this.data=e||{},"function"==typeof e&&(e={callback:e});const s=this.menu.length,i=t.split("/");let n,o=0,r=0,l=this.menu;for(;l;){if(o>5)throw"Error: Menubar too deep";if(l.length!=r){if(l[r]&&i[o]==l[r].name){if(o<i.length-1){n=l[r],null!=l[r].children&&(l=l[r].children),r=0,o++;continue}console.warn("Warning: Adding menu that already exists: "+t);break}r++}else{const t={name:"",parent:n,children:[],data:null,disable:function(){this.data&&(this.data.disabled=!0)},enable:function(){this.data&&delete this.data.disabled}};if(n=t,o==i.length-1&&(t.data=e),t.name=i[o],l.push(t),o++,o==i.length)break;t.children=[],l=t.children,r=0}}s!=this.menu.length&&this.updateMenu()}remove(t){const e=this.findMenu(t);if(!e)return;if(Array.isArray(e))return console.warn("Can't remove an entire list");if(!e.parent||!e.parent.children)return console.warn("menu without parent?");const s=e.parent.children.indexOf(e);-1!=s&&e.parent.children.splice(s,1)}separator(t,e){const s=this.findMenu(t);if(s)return Array.isArray(s)?console.warn("Can't separate an entire list"):void(s.children&&s.children.push({name:"",children:void 0,data:null,separator:!0,order:e||10}))}findMenu(t){const e=t.split("/");let s=0,i=0,n=this.menu;for(;i<=5;){if(s==e.length)return n;if(n.length<=i)return;if("*"==e[s])return n[i].children;if(e[s]!=n[i].name)i++;else{if(s==e.length-1)return n[i];n[i].children&&(n=n[i].children),i=0,s++}}}updateMenu(){const t=this;this.content.innerHTML="";const e=function(e,s){const i=e,n=i.data;n.data&&n.data.callback&&"function"==typeof n.data.callback&&n.data.callback(n.data),t.is_open?(t.is_open=!1,t.hidePanels()):(t.is_open=!0,t.showMenu(n,s,i))},s=function(e,s){if(t.hidePanels(),t.is_open||t.auto_open){const i=e;t.showMenu(i.data,s,i)}};for(const t in this.menu){const i=document.createElement("li");i.innerHTML="<span class='icon'></span><span class='name'>"+this.menu[t].name+"</span>",this.content.appendChild(i),i.data=this.menu[t],this.menu[t].element=i,i.addEventListener("click",e.bind(void 0,i)),i.addEventListener("mouseover",s.bind(void 0,i))}}hidePanels(){if(this.panels.length){for(const t in this.panels)i.LiteGUI.remove(this.panels[t]);this.panels=[]}}showMenu(t,e,s,i=!1){if(i||this.hidePanels(),!t.children||!t.children.length)return;const n=this;n.closing_by_leave&&clearInterval(n.closing_by_leave);const o=document.createElement("div");o.className="litemenubar-panel";const r=[];for(const e in t.children)r.push(t.children[e]);this.sort_entries&&r.sort(((t,e)=>{let s=10,i=10;return t&&t.data&&null!=t.data.order&&(s=t.data.order),t&&t.separator&&null!=t.order&&(s=t.order),e&&e.data&&null!=e.data.order&&(i=e.data.order),e&&e.separator&&null!=e.order&&(i=e.order),s-i}));const l=function(e,o){const r=e,l=r.data;if(l.data){if(l.data.disabled)return;l.data.instance&&l.data.property&&("checkbox"==l.data.type?(l.data.instance[l.data.property]=!l.data.instance[l.data.property],l.data.instance[l.data.property]?r.classList.add("checked"):r.classList.remove("checked")):l.data.hasOwnProperty("value")&&(l.data.instance[l.data.property]=l.data.value)),null!=l.data.checkbox&&(l.data.checkbox=!l.data.checkbox,l.data.checkbox?r.classList.add("checked"):r.classList.remove("checked")),l.data.callback&&"function"==typeof l.data.callback&&l.data.callback(l.data)}l.children&&l.children.length?n.showMenu(l,o,r,!0):l.data.keep_open?(n.is_open=!1,n.hidePanels(),n.is_open=!0,n.showMenu(t,o,s,i)):(n.is_open=!1,n.hidePanels())};for(const t in r){const e=document.createElement("p"),s=r[t];e.className="litemenu-entry "+(e.children?" submenu":"");const i=s.children&&s.children.length;if(i&&e.classList.add("has_submenu"),s&&s.name?e.innerHTML="<span class='icon'></span><span class='name'>"+s.name+(i?"<span class='more'>+</span>":"")+"</span>":e.classList.add("separator"),e.data=s,e.data.data){const t=e.data.data;("checkbox"==t.type&&t.instance&&t.property&&1==t.instance[t.property]||1==t.checkbox||t.instance&&t.property&&t.hasOwnProperty("value")&&t.instance[t.property]==t.value||"function"==typeof t.isChecked&&t.isChecked.call(t.instance,t))&&(e.className+=" checked"),t.disabled&&(e.className+=" disabled")}e.addEventListener("click",l.bind(void 0,e)),e.addEventListener("mouseenter",(t=>{})),o.appendChild(e)}o.addEventListener("mouseleave",(t=>{n.closing_by_leave&&clearInterval(n.closing_by_leave),n.closing_by_leave=setTimeout((()=>{n.is_open=!1,n.hidePanels()}))})),o.addEventListener("mouseenter",(t=>{n.closing_by_leave&&clearInterval(n.closing_by_leave),n.closing_by_leave=null}));const a=s.getBoundingClientRect();o.style.left=a.left+(i?200:0)+"px",o.style.top=a.top+a.height+(i?-20:10)+"px",this.panels.push(o),document.body.appendChild(o)}}},673:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Panel=void 0;const i=s(776);class n{constructor(t,e){!e&&t&&t.constructor!==String&&(e=t,t=""),this.options=e=e||{},this.content=e.content||"";const s=this.root=document.createElement("div");t&&(s.id=t),s.className="litepanel "+(e.className||""),s.data=this;let o="";e.title&&(o+="<div class='panel-header'>"+e.title+"</div>"),o+="<div class='content'>"+this.content+"</div>",o+="<div class='panel-footer'></div>",s.innerHTML=o,e.title&&(this.header=this.root.querySelector(".panel-header")),this.content=this.root.querySelector(".content"),this.footer=this.root.querySelector(".panel-footer"),e.width&&(this.root.style.width=i.LiteGUI.sizeToCSS(e.width)),e.height&&(this.root.style.height=i.LiteGUI.sizeToCSS(e.height)),e.position&&(this.root.style.position="absolute",this.root.style.left=i.LiteGUI.sizeToCSS(e.position[0]),this.root.style.top=i.LiteGUI.sizeToCSS(e.position[1])),1==e.scroll&&(this.content.style.overflow="auto"),n.title_height="20px"}add(t){this.content.appendChild(t.root)}clear(){for(;this.content.firstChild;)this.content.removeChild(this.content.firstChild)}}e.Panel=n},900:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Table=void 0;const i=s(776);e.Table=class{constructor(t){t=t||{},this.root=document.createElement("table"),this.root.classList.add("litetable"),this.columns=[],this.column_fields=[],this.rows=[],this.data=[],this._must_update_header=!0,t.colums&&this.setColumns(t.colums),t.scrollable&&(this.root.style.overflow="auto"),t.height&&(this.root.style.height=i.LiteGUI.sizeToCSS(t.height)),t.columns&&this.setColumns(t.columns),t.rows&&this.setRows(t.data)}setRows(t,e=!1){this.data=t,this.updateContent(e)}addRow(t,e){const s=document.createElement("tr");for(let e=0;e<this.column_fields.length;++e){const i=document.createElement("td");let n=null;n=t.constructor===Array?t[e]:t[this.column_fields[e]],void 0===n&&(n=""),i.innerHTML=n,this.value=this.column_fields[e];const o=this.columns[e];if(void 0===o)break;o.className&&(i.className=o.className),o.width&&(i.style.width=o.width),s.appendChild(i)}return this.root.appendChild(s),this.rows.push(s),e||this.data.push(t),s}updateRow(t,e){this.data[t]=e;const s=this.rows[t];if(!s)return;const i=s.querySelectorAll("td");for(let t=0;t<i.length;++t){const s=this.columns[t];let n=null;n=e.constructor===Array?e[t]:e[s.field],void 0===n&&(n=""),i[t].innerHTML=n}return s}updateCell(t,e,s){const i=this.rows[t];if(!i)return;const n=i.childNodes[e];return n?(n.innerHTML=s,n):void 0}setColumns(t){this.columns.length=0,this.column_fields.length=0;const e=Math.floor(100/t.length).toFixed(1)+"%",s=[];for(let n=0;n<t.length;++n){let o=t[n];if(null==o)continue;o.constructor!==String&&o.constructor!==Number||(o={name:String(o)});const r={name:o.name||"",width:i.LiteGUI.sizeToCSS(o.width||e),field:(o.field||o.name||"").toLowerCase(),className:o.className};n==t.length-1?r.width=" calc( 100% - ( "+s.join(" + ")+" ) )":s.push(r.width),this.columns.push(r),this.column_fields.push(r.field)}this._must_update_header=!0,this.updateContent()}updateContent(t=!1){if(this.root.innerHTML="",this._must_update_header){this.header=document.createElement("tr");for(let t=0;t<this.columns.length;++t){const e=this.columns[t],s=document.createElement("th");s.innerHTML=e.name,e.width&&(s.style.width=e.width),e.th=s,this.header.appendChild(s)}this._must_update_header=!1}if(this.root.appendChild(this.header),this.data)if(this.data.length!=this.rows.length&&(t=!1),t)for(let t=0;t<this.rows.length;++t){const e=this.data[t],s=this.updateRow(t,e);this.root.appendChild(s)}else{this.rows.length=0;for(let t=0;t<this.data.length;++t){const e=this.data[t];this.addRow(e,!0)}}}}},649:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Tabs=void 0;const i=s(776);class n{constructor(t,e){if(e||t&&t.constructor===String){const s=t;(t=e||{}).id=s,console.warn("LiteGUI.Tabs legacy parameter, use options as first parameter instead of id.")}this.options=t||{};const s=this.mode=t.mode||"horizontal",i=document.createElement("div");t.id&&(i.id=t.id),i.data=this,i.className="litetabs "+s,this.root=i,this.root.tabs=this,this.current_tab=-1,this.previous_tab=-1,"horizontal"==s?t.size&&("full"==t.size?this.root.style.height="100%":this.root.style.height=t.size):"vertical"==s&&t.size&&("full"==t.size?this.root.style.width="100%":this.root.style.width=t.size),t.width&&(this.root.style.width=t.width.constructor===Number?t.width.toFixed(0)+"px":t.width),t.height&&(this.root.style.height=t.height.constructor===Number?t.height.toFixed(0)+"px":t.height);const o=document.createElement("ul");o.className="wtabcontainer","vertical"==s?o.style.width=n.tabs_width+"px":o.style.height=n.tabs_height+"px",o.addEventListener("wheel",this.onMouseWheel),o.addEventListener("mousewheel",this.onMouseWheel),this.list=o,this.root.appendChild(this.list),this.tabs_root=o,this.tabs=[],this.tabs_by_index=[],this.selected=null,this.onchange=t.callback,t.parent&&this.appendTo(t.parent)}onMouseWheel(t){t.deltaY&&(this.list.scrollLeft+=t.deltaY)}show(){this.root.style.display="block"}hide(){this.root.style.display="none"}getCurrentTab(){return this.tabs[this.current_tab].tab}getCurrentTabId(){return this.tabs[this.current_tab].id}getPreviousTab(){return this.tabs[this.previous_tab].tab}appendTo(t,e=null){e?t.prepend(this.root):t.appendChild(this.root)}getTab(t){for(let e=0;e<this.tabs.length;e++)if(this.tabs[e].id==t)return this.tabs[e];return null}getTabByIndex(t){return this.tabs_by_index[t]}getNumOfTabs(){let t=0;for(const e in this.tabs)t++;return t}getTabContent(t){for(let e=0;e<this.tabs.length;e++)if(this.tabs[e].id==t)return this.tabs[e].content;return null}getTabIndexInTab(t){for(let e=0;e<this.tabs.length;e++)if(this.tabs[e].id==t)return e;return-1}getTabIndex(t){let e=null;for(let s=0;s<this.tabs.length;s++)this.tabs[s].id==t&&(e=this.tabs[s]);if(!e)return-1;for(let t=0;t<this.list.childNodes.length;t++)if(this.list.childNodes[t]==e.tab)return t;return-1}addTab(t,e,s=!1){var r;"function"==typeof e&&(e={callback:e}),this.options=e=e||{};const l=this;null==t&&(t="rand_"+(1e6*Math.random()|0));const a=document.createElement("li"),c=t.replace(/ /gi,"_");if(a.className="wtab wtab-"+c+" ",a.dataset.id=t,a.innerHTML="<span class='tabtitle'>"+(e.title||t)+"</span>",e.button&&(a.className+="button "),e.tab_className&&(a.className+=e.tab_className),e.bigicon&&(a.innerHTML="<img class='tabbigicon' src='"+e.bigicon+"'/>"+a.innerHTML),e.closable&&(a.innerHTML+="<span class='tabclose'>"+i.special_codes.close+"</span>",null===(r=a.querySelector("span.tabclose"))||void 0===r||r.addEventListener("click",(e=>{l.removeTab(t),e.preventDefault(),e.stopPropagation()}),!0)),void 0!==e.index){const t=this.list.childNodes[e.index];t?this.list.insertBefore(a,t):this.list.appendChild(a)}else this.plus_tab?this.list.insertBefore(a,this.plus_tab):this.list.appendChild(a);if(e.tab_width&&(a.style.width=e.tab_width.constructor===Number?e.tab_width.toFixed(0)+"px":e.tab_width,a.style.minWidth="0"),this.options.autoswitch){a.classList.add("autoswitch");const t=t=>{const e=t.target;l._timeout_mouseover&&clearTimeout(l._timeout_mouseover),l._timeout_mouseover=setTimeout((()=>{i.LiteGUI.trigger(e,"click"),l._timeout_mouseover=null}),500)};a.addEventListener("dragenter",t),a.addEventListener("dragleave",(t=>{l._timeout_mouseover&&(clearTimeout(l._timeout_mouseover),l._timeout_mouseover=null)}))}const d=document.createElement("div");if(e.id&&(d.id=e.id),d.className="wtabcontent wtabcontent-"+c+" "+(e.className||""),d.dataset.id=t,d.style.display="none","horizontal"==this.mode?e.size&&(d.style.overflow="auto","full"==e.size?(d.style.width="100%",d.style.height="calc( 100% - "+n.tabs_height+"px )",d.style.height="-moz-calc( 100% - "+n.tabs_height+"px )",d.style.height="-webkit-calc( 100% - "+n.tabs_height+"px )"):d.style.height=e.size):"vertical"==this.mode&&e.size&&(d.style.overflow="auto","full"==e.size?(d.style.height="100%",d.style.width="calc( 100% - "+n.tabs_width+"px )",d.style.width="-moz-calc( 100% - "+n.tabs_width+"px )",d.style.width="-webkit-calc( 100% - "+n.tabs_width+"px )"):d.style.width=e.size),void 0!==e.width&&(d.style.width="string"==typeof e.width?e.width:e.width+"px"),void 0!==e.height&&(d.style.height="string"==typeof e.height?e.height:e.height+"px"),e.content&&("string"==typeof e.content?d.innerHTML=e.content:d.appendChild(e.content)),this.root.appendChild(d),e.button){const t=t=>{if(!t.target)return;const s=t.target.dataset.id;e.callback&&e.callback(s,t)};a.addEventListener("click",t.bind(a))}else a.addEventListener("click",this.onTabClicked.call);a.options=e,a.tabs=this;const h=a.querySelector("span.tabtitle"),u=new o(t,a,d,h);e.onclose&&(u.onClose=e.onclose);let p=this.getTabIndexInTab(t);return this.tabs[p]=u,this.recomputeTabsByIndex(),a.addEventListener("contextmenu",(t=>(2!=t.button||(t.preventDefault(),e.callback_context&&e.callback_context.call(u)),!1))),1!=e.selected&&null!=this.selected||this.selectTab(t,e.skip_callbacks),u}addPlusTab(t){this.plus_tab&&console.warn("There is already a plus tab created in this tab widget"),this.plus_tab=this.addTab("plus_tab",{title:"+",tab_width:20,button:!0,callback:t,skip_callbacks:!0})}addButtonTab(t,e,s){return this.addTab(t,{title:e,tab_width:20,button:!0,callback:s,skip_callbacks:!0})}onTabClicked(t,e){if(e.selected)return;if(!e.parentNode)return;const s=this.options;if(!this)throw"tabs not found";if(s.callback_canopen&&0==s.callback_canopen())return;const n=e.dataset.id;-1!=this.current_tab&&this.tabs[this.current_tab].id!=n&&this.tabs[this.current_tab].content&&e.options.callback_leave&&e.options.callback_leave(this.tabs[this.current_tab].id,this.tabs[this.current_tab].tab,this.tabs[this.current_tab].content);let o=null;for(const t in this.tabs){const e=this.tabs[t];t==n?(e.selected=!0,e.content.style.display="",o=e.content):(e.selected=!1,e.content.style.display="none")}const r=this.list.querySelectorAll("li.wtab");for(let t=0;t<r.length;++t)r[t].selected=!1;e.selected=!0,this.previous_tab=this.current_tab,this.current_tab=this.getTabIndexInTab(n),t&&(s.callback&&s.callback(n,o,t),i.LiteGUI.trigger(this,"wchange",[n,o]),this.onchange&&this.onchange(n,o)),this.selected=n}selectTab(t,e=!1){if(!t)return;const s=this.list.querySelectorAll("li.wtab");for(let e=0;e<s.length;e++)if(t==s[e].dataset.id){this.onTabClicked.call;break}}setTabVisibility(t,e){const s=this.getTab(t);s&&(s.tab.style.display=e?"none":"",s.content.style.display=e?"none":"")}recomputeTabsByIndex(){this.tabs_by_index=[];for(const t in this.tabs){const e=this.tabs[t];let s=0,i=e.tab;for(;null!=i;)s++,i=i.previousSibling;this.tabs_by_index[s]=e}}removeTab(t){const e=this.getTab(t);if(!e)return void console.warn("tab not found: "+t);e.onClose&&e.onClose(e),e.tab.parentNode&&e.tab.parentNode.removeChild(e.tab),e.content.parentNode&&e.content.parentNode.removeChild(e.content);const s=this.getTabIndexInTab(t);delete this.tabs[s],this.recomputeTabsByIndex()}removeAllTabs(t=!1){const e=[];for(const t in this.tabs)e.push(this.tabs[t]);for(const s in e){const i=e[s];if(i==this.plus_tab&&t)continue;i.tab.parentNode&&i.tab.parentNode.removeChild(i.tab),i.content.parentNode&&i.content.parentNode.removeChild(i.content);const n=this.getTabIndexInTab(i.id);delete this.tabs[n]}this.recomputeTabsByIndex()}clear(){this.removeAllTabs()}hideTab(t){this.setTabVisibility(t,!1)}showTab(t){this.setTabVisibility(t,!0)}transferTab(t,e,s=0){const i=this.getTab(t);if(!i)return;e.tabs[e.getTabIndexInTab(t)]=i,void 0!==s?e.list.insertBefore(i.tab,e.list.childNodes[s]):e.list.appendChild(i.tab),e.root.appendChild(i.content),delete this.tabs[this.getTabIndexInTab(t)];let n=null;for(const t in this.tabs)if(n=t,n)break;n&&this.selectTab(n),i.tab.selected=!1,e.selectTab(t)}detachTab(t,e,s){const n=this.getTabIndex(t);if(!this.tabs[n])return;const o=window.open("","","width=800, height=600, location=no, status=no, menubar=no, titlebar=no, fullscreen=yes");if(!o)return;o.document.write("<head><title>"+t+"</title>");const r=document.querySelectorAll("link[rel='stylesheet'],style");for(let t=0;t<r.length;t++)o.document.write(r[t].outerHTML);o.document.write("</head><body></body>"),o.document.close();const l=this,a=new i.LiteGUI.Tabs(null,this.options);return o.tabs=a,o.onbeforeunload=function(){a.transferTab(t,l,n),s&&s()},a.list.style.height="20px",o.document.body.appendChild(a.root),l.transferTab(t,a,n),a.tabs[a.getTabIndexInTab(t)].tab.selected=!0,this.recomputeTabsByIndex(),e&&e(),o}destroy(t){this.removeTab(t)}}e.Tabs=n,n.tabs_width=64,n.tabs_height=26;class o{constructor(t,e,s,i){this.id=t,this.tab=e,this.content=s,this.title=i}add(t){this.content.appendChild(t.root||t)}setTitle(t){this.title.innerHTML=t}click(){i.LiteGUI.trigger(this.tab,"click")}}},526:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Tree=void 0;const i=s(776);class n{constructor(t,e,s){if(this._skip_scroll=!1,s||t&&t.constructor===String){const i=t;t=e,(e=s||{}).id=i,console.warn("LiteGUI.Tree legacy parameter, use data as first parameter instead of id.")}e=e||{};const i=document.createElement("div");this.root=i,e.id&&(i.id=e.id),i.className="litetree",this.tree=t;const n=this;e=e||{allow_rename:!1,allow_drag:!0,allow_multiselection:!1},this.options=e,this.indent_offset=e.indent_offset||0,e.height&&(this.root.style.height="string"==typeof e.height?e.height:Math.round(e.height)+"px"),this.collapsed_depth=3,null!=e.collapsed_depth&&(this.collapsed_depth=e.collapsed_depth),i.addEventListener("click",(t=>{t.target==n.root&&n.onBackgroundClicked&&n.onBackgroundClicked(t,n)})),i.addEventListener("contextmenu",(t=>(2!=t.button||(n.onContextMenu&&n.onContextMenu(t),t.preventDefault()),!1)));const o=this.createAndInsert(t,e,null,void 0);if(!o)throw"Error in LiteGUI.Tree, createAndInsert returned null";o.className+=" root_item",this.root_item=o}updateTree(t){this.root.innerHTML="";const e=this.createAndInsert(t,this.options,null,void 0);e?(e.className+=" root_item",this.root_item=e):this.root_item=void 0}insertItem(t,e,s,i){if(!e){const t=this.root.childNodes[0];t&&(e=t.dataset.item_id)}const n=this.createAndInsert(t,i,e,s);return e&&this._updateListBox(this._findElement(e)),n}createAndInsert(t,e,s,i){let n=-1;s?n=this._findElementIndex(s):void 0===s&&(n=0);let o=null,r=0;-1!=n&&(o=this.root.childNodes[n],r=parseInt(o.dataset.level)+1);const l=this.createTreeItem(t,e,r);if(!l)return;l.parent_id=s;if(this.getItem(l.dataset.item_id)&&console.warn("There another item with the same ID in this tree"),-1==n?this.root.appendChild(l):this._insertInside(l,n,i,void 0),o&&!this._isNodeChildrenVisible(s)&&l.classList.add("hidden"),t.children)for(let s=0;s<t.children.length;++s)this.createAndInsert(t.children[s],e,t.id,void 0);return this._updateListBox(l,e,r),e&&e.selected&&this.markAsSelected(l,!0),l}_insertInside(t,e,s,i){const o=this.root.childNodes[e];if(!o)throw"No parent node found, index: "+e+", nodes: "+this.root.childNodes.length;const r=parseInt(o.dataset.level),l=void 0!==i?i:r+1,a=t.querySelector(".indentblock");a&&(a.style.paddingLeft=(l+this.indent_offset)*n.INDENT+"px"),t.dataset.level=l;for(let i=e+1;i<this.root.childNodes.length;++i){const e=this.root.childNodes[i];if(!e.classList||!e.classList.contains("ltreeitem"))continue;const n=parseInt(e.dataset.level);if(n==l&&s)s--;else if(n<l||0===s&&n===l)return void this.root.insertBefore(t,e)}this.root.appendChild(t)}_isNodeChildrenVisible(t){const e=this.getItem(t);if(!e)return!1;if(e.classList.contains("hidden"))return!1;const s=e.querySelector(".listbox");return!s||"closed"!=s.getValue()}_findElement(t){if(!t||t.constructor!==String)throw"findElement param must be string with item id";for(let e=0;e<this.root.childNodes.length;++e){const s=this.root.childNodes[e];if(s.classList&&s.classList.contains("ltreeitem")&&s.classList.contains("ltreeitem-"+t))return s}return null}_findElementIndex(t){for(let e=0;e<this.root.childNodes.length;++e){const s=this.root.childNodes[e];if(s.classList&&s.classList.contains("ltreeitem"))if("string"==typeof t){if(s.dataset.item_id===t)return e}else if(s===t)return e}return-1}_findElementLastChildIndex(t){if(-1==t)return-1;const e=parseInt(this.root.childNodes[t].dataset.level);for(let s=t+1;s<this.root.childNodes.length;++s){const t=this.root.childNodes[s];if(!t.classList||!t.classList.contains("ltreeitem"))continue;if(parseInt(t.dataset.level)==e)return s}return-1}_findChildElements(t,e){const s=this._findElementIndex(t);if(-1==s)return;const i=this.root.childNodes[s],n=parseInt(i.dataset.level),o=[];for(let t=s+1;t<this.root.childNodes.length;++t){const s=this.root.childNodes[t];if(!s.classList||!s.classList.contains("ltreeitem"))continue;const i=parseInt(s.dataset.level);if(!(e&&i>n+1)){if(i<=n)return o;o.push(s)}}return o}createTreeItem(t,e,s){if(null==t)return void console.error("Tree item cannot be null");e=e||this.options;const n=document.createElement("li");n.className="ltreeitem";const o=this;if(t.id){const e=t.id.replace(/\s/g,"_");n.className+=" ltreeitem-"+e,n.dataset.item_id=t.id}if(t.dataset)for(const e in t.dataset)n.dataset[e]=t.dataset[e];t.DOM=n,n.data=t,void 0!==s&&(n.dataset.level=s,n.classList.add("ltree-level-"+s));const r=document.createElement("div");r.className="ltreeitemtitle",t.className&&(r.className+=" "+t.className),r.innerHTML="<span class='precontent'></span><span class='indentblock'></span><span class='collapsebox'></span><span class='incontent'></span><span class='postcontent'></span>";const l=t.content||t.id||"";if(r.querySelector(".incontent").innerHTML=l,t.precontent&&(r.querySelector(".precontent").innerHTML=t.precontent),t.postcontent&&(r.querySelector(".postcontent").innerHTML=t.postcontent),t.dataset)for(const e in t.dataset)n.dataset[e]=t.dataset[e];n.appendChild(r),n.title_element=r,!1===t.visible&&(n.style.display="none");const a=n;a.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();const s=a;if(!s.title_element._editing){if(e.ctrlKey&&o.options.allow_multiselection){if(o.isNodeSelected(s))return s.classList.remove("selected"),i.LiteGUI.trigger(o,"item_remove_from_selection",{item:s,data:s.data}),void i.LiteGUI.trigger(o.root,"item_remove_from_selection",{item:s,data:s.data});o.markAsSelected(s,!0),i.LiteGUI.trigger(o,"item_add_to_selection",{item:s,data:s.data}),i.LiteGUI.trigger(o.root,"item_add_to_selection",{item:s,data:s.data});let e=!1;t.callback&&(e=t.callback.call(o,s)),!e&&o.onItemAddToSelection&&o.onItemAddToSelection(s.data,s)}if(e.shiftKey&&o.options.allow_multiselection){const t=o.getSelectedItem();if(!t)return;if(t===s)return;const e=Array.prototype.slice.call(t.parentNode.children),n=e.indexOf(t),r=e.indexOf(s),l=r>n?e.slice(n,r):e.slice(r,n);for(let t=0;t<l.length;++t){const e=l[t];o.markAsSelected(e,!0),i.LiteGUI.trigger(o,"item_add_to_selection",{item:e,data:e.data}),i.LiteGUI.trigger(o.root,"item_add_to_selection",{item:e,data:e.data})}}else{o.markAsSelected(s),o._skip_scroll=!0,i.LiteGUI.trigger(o,"item_selected",{item:s,data:s.data}),i.LiteGUI.trigger(o.root,"item_selected",{item:s,data:s.data});let e=!1;t.callback&&(e=t.callback.call(o,s)),!e&&o.onItemSelected&&o.onItemSelected(s.data,s),o._skip_scroll=!1}}}.bind(a)),a.addEventListener("dblclick",function(t){const e=a,s=e.title_element.querySelector(".incontent");if(i.LiteGUI.trigger(o,"item_dblclicked",e),i.LiteGUI.trigger(o.root,"item_dblclicked",e),!s._editing&&o.options.allow_rename){s._editing=!0,s._old_name=s.innerHTML;const n=s;s.innerHTML="<input type='text' value='"+s.innerHTML+"' />";const r=s.querySelector("input");r.addEventListener("blur",(t=>{const s=t.target.value;setTimeout((()=>{n.innerHTML=s}),1),delete n._editing,i.LiteGUI.trigger(o.root,"item_renamed",{old_name:n._old_name,new_name:s,item:e,data:e.data}),delete n._old_name})),r.addEventListener("keydown",(t=>{13==t.keyCode&&r.blur()})),r.focus(),t.preventDefault()}t.preventDefault(),t.stopPropagation()}.bind(a));a.addEventListener("contextmenu",(function(t){const e=a;if(t.preventDefault(),t.stopPropagation(),2==t.button)return!!o.onItemContextMenu&&o.onItemContextMenu(t,{item:e,data:e.data})}));const c=r;this.options.allow_drag&&(c.draggable=!0,c.addEventListener("dragstart",(e=>{if(e.dataTransfer.setData("item_id",this.parentNode.dataset.item_id),!t.onDragData)return;const s=t.onDragData();if(s)for(const t in s)e.dataTransfer.setData(t,s[t])})));let d=0;return c.addEventListener("dragenter",(e=>{if(e.preventDefault(),t.skipdrag)return!1;0==d&&r.classList.add("dragover"),d++})),c.addEventListener("dragleave",(t=>{t.preventDefault(),d--,0==d&&r.classList.remove("dragover")})),c.addEventListener("dragover",(function(t){t.preventDefault()})),c.addEventListener("drop",(e=>{const s=e.target;if(r.classList.remove("dragover"),e.preventDefault(),t.skipdrag)return!1;const n=e.dataTransfer.getData("item_id");if(!n)return i.LiteGUI.trigger(o.root,"drop_on_item",{item:s,event:e}),void(o.onDropItem&&o.onDropItem(e,s.parentNode.data));const l=s.parentNode.dataset.item_id;(!o.onMoveItem||o.onMoveItem&&0!=o.onMoveItem(o.getItem(n),o.getItem(l)))&&o.moveItem(n,l)&&i.LiteGUI.trigger(o.root,"item_moved",{item:o.getItem(n),parent_item:o.getItem(l)}),o.onDropItem&&o.onDropItem(e,s.parentNode.data)})),n}filterByName(t){for(let e=0;e<this.root.childNodes.length;++e){const s=this.root.childNodes[e];if(!s.classList||!s.classList.contains("ltreeitem"))continue;const i=s.querySelector(".incontent");if(!i)continue;const o=i.innerHTML.toLowerCase();if(t&&-1==o.indexOf(t.toLowerCase()))s.classList.add("filtered");else{s.data&&!1!==s.data.visible&&s.classList.remove("filtered");const e=s.querySelector(".indentblock");e&&(e.style.paddingLeft=t?0:(parseInt(s.dataset.level)+this.indent_offset)*n.INDENT+"px")}}}filterByRule(t,e){if(!t)throw"filterByRule requires a callback";for(let s=0;s<this.root.childNodes.length;++s){const n=this.root.childNodes[s];if(!n.classList||!n.classList.contains("ltreeitem"))continue;const o=n.querySelector(".incontent");if(o)if(t(n.data,o,e)){n.data&&!1!==n.data.visible&&n.classList.remove("filtered");const t=n.querySelector(".indentblock");t&&(t.style.paddingLeft=e?0:(parseInt(n.dataset.level)+this.indent_offset)*i.LiteGUI.Tree.INDENT+"px")}else n.classList.add("filtered")}}getItem(t){if(!t)return null;if(t.classList)return t;for(let e=0;e<this.root.childNodes.length;++e){const s=this.root.childNodes[e];if(s.classList&&s.classList.contains("ltreeitem")&&s.dataset.item_id===t)return s}return null}expandItem(t,e){const s=this.getItem(t);if(!s)return;if(!s.listbox)return;if(s.listbox.setValue(!0),!e)return;const i=this.getParent(s);i&&this.expandItem(i,e)}collapseItem(t){const e=this.getItem(t);e&&e.listbox&&e.listbox.setValue(!1)}isInsideArea(t){const e=t.constructor===String?this.getItem(t):t;if(!e)return!1;const s=this.root.getClientRects();if(!s.length)return!1;const i=s[0].height,n=e.offsetTop;return this.root.scrollTop<n&&n<this.root.scrollTop+i}scrollToItem(t){const e=t.constructor===String?this.getItem(t):t;if(!e)return;const s=this.root.parentNode;if(!s)return;const i=s.getBoundingClientRect(),o=i.h;if(!i)return;const r=(parseInt(e.dataset.level)+this.indent_offset)*n.INDENT+50;s.scrollTop=e.offsetTop-.5*o|0,.75*i.width<r?s.scrollLeft=r:s.scrollLeft=0}setSelectedItem(t,e,s){if(!t)return void this.unmarkAllAsSelected();const n=this.getItem(t);return n?n.classList.contains("selected")?void 0:(this.markAsSelected(n),e&&!this._skip_scroll&&this.scrollToItem(n),this.expandItem(n,!0),s&&i.LiteGUI.trigger(n,"click"),n):null}addItemToSelection(t){if(!t)return;const e=this.getItem(t);return e?(this.markAsSelected(e,!0),e):null}removeItemFromSelection(t){if(!t)return;const e=this.getItem(t);if(!e)return null;e.classList.remove("selected")}getSelectedItem(){return this.root.querySelector(".ltreeitem.selected")}getSelectedItems(){return this.root.querySelectorAll(".ltreeitem.selected")}isItemSelected(t){const e=this.getItem(t);return!!e&&this.isNodeSelected(e)}getChildren(t,e=!1){return t&&t.constructor!==String&&t.dataset&&(t=t.dataset.item_id),this._findChildElements(t,e)}getParent(t){const e=this.getItem(t);return e?this.getItem(e.parent_id):null}getAncestors(t,e){e=e||[];const s=this.getItem(t);return s?(e.push(s),this.getAncestors(s.parent_id,e)):e}isAncestor(t,e){const s=this.getItem(t);if(!s)return!1;const i=this.getItem(e),n=this.getItem(s.parent_id);return!!n&&(n==i||this.isAncestor(n,e))}moveItem(t,e){if(t===e)return!1;const s=this.getItem(t),i=this.getItem(e);if(this.isAncestor(i,s))return!1;let n=this._findElementIndex(i);const o=parseInt(i.dataset.level),r=this.getParent(s);if(!r)return console.error("node parent not found by id, maybe id has changed"),!1;const l=o-parseInt(r.dataset.level);if(!i||!s)return!1;if(i==r)return!1;s.parent_id=e;const a=this.getChildren(s);if(a){a.unshift(s);for(let t=0;t<a.length;t++)a[t].parentNode.removeChild(a[t]);for(let t=0;t<a.length;t++){const e=a[t],s=parseInt(e.dataset.level)+l;e.dataset.level=s}n=this._findElementIndex(i);let t=this._findElementLastChildIndex(n);-1==t&&(t=0);for(let e=0;e<a.length;e++){const s=a[e];this._insertInside(s,n,t+e-1,parseInt(s.dataset.level))}}return this._updateListBox(i),r&&this._updateListBox(r),!0}removeItem(t,e){let s=t;if("string"==typeof t&&(s=this.getItem(t)),!s)return!1;const i=this.getParent(s);let n=null;if(e&&(n=this.getChildren(s)),this.root.removeChild(s),n)for(let t=0;t<n.length;t++)this.root.removeChild(n[t]);return i&&this._updateListBox(i),!0}updateItem(t,e){const s=this.getItem(t);if(!s)return!1;if(s.data=e,e.id&&(s.id=e.id),e.content){s.title_element.querySelector(".incontent").innerHTML=e.content}return!0}updateItemId(t,e){const s=this.getItem(t);if(!s)return!1;const i=this.getChildren(t,!0);s.id=e;for(let t=0;t<i.length;++t){i[t].parent_id=e}return!0}clear(t){if(!t)return void(this.root.innerHTML="");const e=this.root.querySelectorAll(".ltreeitem");for(let t=1;t<e.length;t++){const s=e[t];this.root.removeChild(s)}}getNodeByIndex(t){return this.root.querySelectorAll(".ltreeitem")[t]}unmarkAllAsSelected(){this.root.classList.remove("selected");const t=this.root.querySelectorAll(".ltreeitem.selected");if(t)for(let e=0;e<t.length;e++)t[e].classList.remove("selected");const e=this.root.querySelectorAll(".ltreeitem.semiselected");for(let t=0;t<e.length;t++)e[t].classList.remove("semiselected")}isNodeSelected(t){return!!t.classList.contains("selected")}markAsSelected(t,e=!1){if(t.classList.contains("selected"))return;e||this.unmarkAllAsSelected(),t.classList.add("selected");let s=this.getParent(t);const i=[];for(;s&&-1==i.indexOf(s);)s.classList.add("semiselected"),i.push(s),s=this.getParent(s)}_updateListBox(t,e,s=0){if(!t)return;const n=this;if(!t.listbox){const e=t.title_element.querySelector(".collapsebox"),s=i.LiteGUI.widget.createLiteBox(!0,(e=>{n.onClickBox(e,t),i.LiteGUI.trigger(n.root,"item_collapse_change",{item:t,data:s.getValue()})})),o=s.element;o.stopPropagation=!0,o.setEmpty(!0),e.appendChild(o),t.listbox=o}(e&&e.collapsed||s>=this.collapsed_depth)&&t.listbox.collapse();const o=this.getChildren(t.dataset.item_id);o&&(o.length?t.listbox.setEmpty(!1):t.listbox.setEmpty(!0))}onClickBox(t,e){const s=this.getChildren(e);if(s)for(let t=0;t<s.length;++t){const e=s[t],i=this.getParent(e);let n=!0;i&&(n=this._isNodeChildrenVisible(i)),n?e.classList.remove("hidden"):e.classList.add("hidden")}}}e.Tree=n,n.INDENT=20},360:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ComplexList=e.LineEditor=e.Slider=e.List=e.LiteBox=e.Checkbox=e.ContextMenu=e.SearchBox=e.Button=e.widget=void 0;const i=s(776);e.widget=class{constructor(){}createButton(t,e){return new n(t,e)}createSearchBox(t,e){return new o(t,e)}createContextMenu(t,e){return new r(t,e)}createCheckbox(t,e){return new l(t,e)}static createLiteBox(t,e){return new a(t,e)}createList(t,e,s){return new c(t,e,s)}createSlider(t,e){return new d(t,e)}createLineEditor(t,e){return new h(t,e)}createComplexList(t){return new u(t)}};class n{constructor(t,e){"function"==typeof(e=e||{})&&(e={callback:e});const s=document.createElement("div");s.className="litegui button",this.root=s;const i=document.createElement("button");i.className="litebutton",this.content=i,s.appendChild(i),i.innerHTML=t,i.addEventListener("click",(t=>{this.click()})),e.callback&&(this.callback=e.callback)}click(){this.callback&&this.callback.call(this)}}e.Button=n;class o{constructor(t,e){this.options=e||{},this.value=t||"";const s=document.createElement("div");s.className="litegui searchbox";const i=null!=e.placeholder?e.placeholder:"Search";s.innerHTML="<input value='"+t+"' placeholder='"+i+"'/>",this.input=s.querySelector("input"),this.root=s,this.input.onchange=function(t){console.warn("Valor de e: "+t)}}setValue(t){this.input.value=t,this.input.onchange&&this.input.onchange(new Event("change"))}getValue(){return this.input.value}}e.SearchBox=o;class r{constructor(t,e){e=e||{},this.options=e,e.parentMenu&&(e.parentMenu.constructor!==this.constructor?(console.error("parentMenu must be of class ContextMenu, ignoring it"),e.parentMenu=null):(this.parentMenu=e.parentMenu,this.parentMenu.lock=!0,this.parentMenu.current_submenu=this)),e.event&&"MouseEvent"!==e.event.constructor.name&&"PointerEvent"!==e.event.constructor.name&&"CustomEvent"!==e.event.constructor.name&&(console.error("Event passed to ContextMenu is not of type MouseEvent or CustomEvent. Ignoring it."),e.event=null);const s=document.createElement("div");if(s.className="litecontextmenu litemenubar-panel",s.style.minWidth="100",s.style.minHeight="100",s.style.pointerEvents="none",setTimeout((()=>{s.style.pointerEvents="auto"}),100),s.addEventListener("mouseup",(t=>(t.preventDefault(),!0)),!0),s.addEventListener("contextmenu",(t=>(2!=t.button||t.preventDefault(),!1)),!0),s.addEventListener("mousedown",(t=>2==t.button&&(this.close.bind(this,t),t.preventDefault(),!0)),!0),this.root=s,e.title){const t=document.createElement("div");t.className="litemenu-title",t.innerHTML=e.title,s.appendChild(t)}for(const s in t){let i=t.constructor==Array?t[s]:s;null!=i&&i.constructor!==String&&(i=void 0===i.content?String(i):i.content);const n=t[s];this.addItem(i,n,e)}function i(t){const e=parseInt(s.style.top);return s.style.top=(e+.1*t.deltaY).toFixed()+"px",t.preventDefault(),!0}s.addEventListener("mouseleave",(t=>{!this.lock&&this.root&&(this.root.closingTimer&&clearTimeout(this.root.closingTimer),this.root.closingTimer=setTimeout(this.close.bind(this,t),500))})),s.addEventListener("mouseenter",(t=>{s.closingTimer&&clearTimeout(s.closingTimer)})),s.addEventListener("wheel",i,!0),s.addEventListener("mousewheel",i,!0);let n=document;e.event&&(n=e.event.target.ownerDocument),n||(n=document),n.body.appendChild(s);let o=e.left||0,r=e.top||0;if(e.event)if("MouseEvent"!==e.event.constructor.name&&"PointerEvent"!==e.event.constructor.name&&"CustomEvent"!==e.event.constructor.name)console.warn("Event passed to ContextMenu is not of type MouseEvent"),e.event=null;else{if(o=e.event.pageX-10,r=e.event.pageY-10,e.title&&(r-=20),e.parentMenu){const t=e.parentMenu.root.getBoundingClientRect();o=t.left+t.width}const t=document.body.getBoundingClientRect(),i=s.getBoundingClientRect();o>t.width-i.width-10&&(o=t.width-i.width-10),r>t.height-i.height-10&&(r=t.height-i.height-10)}s.style.left=o+"px",s.style.top=r+"px"}close(t,e){this.root.parentNode&&this.root.parentNode.removeChild(this.root),this.parentMenu&&!e&&(this.parentMenu.lock=!1,this.parentMenu.current_submenu=null,void 0===t?this.parentMenu.close():t&&!i.LiteGUI.isCursorOverElement(t,this.parentMenu.root)&&i.LiteGUI.trigger(this.parentMenu.root,"mouseleave",t)),this.current_submenu&&this.current_submenu.close(t,!0),this.root.closingTimer&&clearTimeout(this.root.closingTimer)}getTopMenu(){return this.options.parentMenu?this.options.parentMenu.getTopMenu():this}getFirstEvent(){return this.options.parentMenu?this.options.parentMenu.getFirstEvent():this.options.event}addItem(t,e,s){const n=this;this.options=s||{};const o=document.createElement("div");o.className="litemenu-entry submenu";let r=!1;null===e?o.classList.add("separator"):(o.innerHTML=e&&e.title?e.title:t,o.value=e,e&&(e.disabled&&(r=!0,o.classList.add("disabled")),(e.submenu||e.has_submenu)&&o.classList.add("has_submenu")),"function"==typeof e?(o.dataset.value=t,o.onclick=e):o.dataset.value=e),this.root.appendChild(o);const l=function(t){const e=t.target,o=e.value;let r=!0;if(n.current_submenu&&n.current_submenu.close(t),s.callback){!0===s.callback.call(n,o,s,t)&&(r=!1)}if(o){if(o.callback&&!s.ignore_item_callbacks&&!0!==o.disabled){!0===o.callback.call(e,o,s,t,n)&&(r=!1)}if(o.submenu){if(!o.submenu.options)throw"ContextMenu submenu needs options";i.LiteGUI.ContextMenu(o.submenu.options,{callback:o.submenu.callback,event:t,parentMenu:n,ignore_item_callbacks:o.submenu.ignore_item_callbacks,title:o.submenu.title,autoopen:s.autoopen});r=!1}}r&&!n.lock&&n.close(t,!0)},a=function(t){const e=t.target,s=e.value;s&&s.has_submenu&&l.call(e,t)};return r||o.addEventListener("click",l.bind(o)),s.autoopen&&o.addEventListener("mouseenter",a.bind(o)),o}}e.ContextMenu=r;class l{constructor(t,e){this.value=t;const s=this.root=document.createElement("span");s.className="litecheckbox inputfield",s.dataset.value=t.toString();const i=this.element=document.createElement("span");i.className="fixed flag checkbox "+(t?"on":"off"),s.appendChild(i),s.addEventListener("click",this.onClick),this.onChange=e}setValue(t){if(this.value===t||!this.root||!this.element)return;if(this.root.dataset.value==t.toString())return;this.root.dataset.value=t.toString(),t?(this.element.classList.remove("off"),this.element.classList.add("on")):(this.element.classList.remove("on"),this.element.classList.add("off"));const e=this.value;this.value=t,this.onChange(t,e)}getValue(){return"true"==this.root.dataset.value}onClick(t){this.setValue("true"!=this.root.dataset.value),"function"===t.preventDefault&&t.preventDefault(),"function"===t.stopPropagation&&t.stopPropagation()}}e.Checkbox=l;class a{constructor(t,e){this.stopPropagation=!1;const s=document.createElement("span");this.element=s,s.className="listbox "+(t?"listopen":"listclosed"),s.innerHTML=t?"&#9660;":"&#9658;",s.dataset.value=t?"open":"closed",s.onclick=function(t){const e=t.target;null==e||e.setValue("open"!=s.dataset.value),t.stopPropagation&&t.stopPropagation()},s.onchange=e,s.setEmpty=function(t){t?this.classList.add("empty"):this.classList.remove("empty")},s.expand=function(){this.setValue(!0)},s.collapse=function(){this.setValue(!1)}}setValue(t){this.element&&this.element.dataset.value!=(t?"open":"closed")&&(t?(this.element.dataset.value="open",this.element.innerHTML="&#9660;",this.element.classList.add("listopen"),this.element.classList.remove("listclosed")):(this.element.dataset.value="closed",this.element.innerHTML="&#9658;",this.element.classList.remove("listopen"),this.element.classList.add("listclosed")),this.element.onchange&&this.element.onchange(new Event("change")))}getValue(){return this.element.dataset.value}setEmpty(t){t&&(this.element=null)}}e.LiteBox=a;class c{constructor(t,e,s){s=s||{};const n=this.root=document.createElement("ul");n.id=t,n.className="litelist";const o=this;this.callback=s.callback;const r=function(t){const e=t.target,s=n.querySelectorAll(".list-item.selected");for(let t=0;t<s.length;++t)s[t].classList.remove("selected");e.classList.add("selected"),i.LiteGUI.trigger(o.root,"wchanged",e),o.callback&&o.callback(e.data)};for(const t in e){const s=document.createElement("li");s.className="list-item",s.data=e[t],s.dataset.value=e[t];let i="";"string"==typeof e[t]?i=e[t]+"<span class='arrow'></span>":(i=(e[t].name||e[t].title||"")+"<span class='arrow'></span>",e[t].id&&(s.id=e[t].id)),s.innerHTML=i,s.addEventListener("click",r.bind(s)),n.appendChild(s)}s.parent&&(s.parent.root?s.parent.root.appendChild(n):s.parent.appendChild(n))}getSelectedItem(){return this.root.querySelector(".list-item.selected")}setSelectedItem(t){const e=this.root.querySelectorAll(".list-item");for(let s=0;s<e.length;s++){const n=e[s];if(n.data==t){i.LiteGUI.trigger(n,"click");break}}}}e.List=c;class d{constructor(t,e){this.doc_binded=null,this.options=e||{};const s=this.root=document.createElement("div");this.value=t,s.className="liteslider",s.addEventListener("mousedown",(t=>{let e,i;t.offsetX?(e=t.offsetX,i=t.offsetY):t.layerX&&(e=t.layerX,i=t.layerY),this.setFromX(e),this.doc_binded=s.ownerDocument,this.doc_binded.addEventListener("mousemove",this.onMouseMove),this.doc_binded.addEventListener("mouseup",this.onMouseUp),t.preventDefault(),t.stopPropagation()})),this.setValue(t)}setFromX(t){const e=this.root.getBoundingClientRect();if(!e)return;const s=t/e.width,i=this.options.min||0,n=(this.options.max||1)-i;this.setValue(n*s+i)}onMouseMove(t){const e=this.root.getBoundingClientRect();if(!e)return;const s=(void 0===t.x?t.pageX:t.x)-e.left;return this.setFromX(s),"function"==typeof t.preventDefault&&t.preventDefault(),!1}onMouseUp(t){const e=this.doc_binded||document;return this.doc_binded=null,e.removeEventListener("mousemove",this.onMouseMove),e.removeEventListener("mouseup",this.onMouseUp),"function"==typeof t.preventDefault&&t.preventDefault(),!1}setValue(t,e=!1){const s=this.options.min||0,n=this.options.max||1;t<s?t=s:t>n&&(t=n);const o=(t-s)/(n-s),r=(100*o).toFixed(1)+"%",l=(100*o+2).toFixed(1)+"%";this.root.style.background="linear-gradient(to right, #999 "+r+", #FC0 "+l+", #333 "+l+")",t!=this.value&&(this.value=t,e||(i.LiteGUI.trigger(this.root,"change",t),this.onChange&&this.onChange(t)))}}e.Slider=d;class h{constructor(t,e){this.options=e||{};const s=this.root=document.createElement("div");s.className="curve "+(e.extraclass?e.extraclass:""),s.style.minHeight="50px",s.style.width=e.width||"100%",s.bgcolor=e.bgcolor||"#222",s.pointscolor=e.pointscolor||"#5AF",s.linecolor=e.linecolor||"#444",s.valuesArray=t,s.xrange=e.xrange||[0,1],s.yrange=e.yrange||[0,1],s.defaulty=null!=e.defaulty?e.defaulty:.5,s.no_trespassing=e.no_trespassing||!1,s.show_samples=e.show_samples||0,s.options=e,s.style.minWidth="50px",s.style.minHeight="20px";const i=this.canvas=document.createElement("canvas");return i.width=e.width||200,i.height=e.height||50,s.appendChild(i),s.canvas=i,s.addEventListener("mousedown",this.onmousedown),this.selected=-1,this.last_mouse=[0,0],this.redraw(),s}getValueAt(t){if(t<this.root.xrange[0]||t>this.root.xrange[1])return this.root.defaulty;let e,s=[this.root.xrange[0],this.root.defaulty],i=0;for(let n=0;n<this.root.valuesArray.length;n++){if(e=this.root.valuesArray[n],t==e[0])return e[1];if(t<e[0])return i=(t-s[0])/(e[0]-s[0]),s[1]*(1-i)+e[1]*i;s=e}return e=[this.root.xrange[1],this.root.defaulty],i=(t-s[0])/(e[0]-s[0]),s[1]*(1-i)+e[1]*i}resample(t){const e=[],s=(this.root.xrange[1]-this.root.xrange[0])/t;for(let t=this.root.xrange[0];t<=this.root.xrange[1];t+=s)e.push(this.getValueAt(t));return e}addValue(t){for(let e=0;e<this.root.valuesArray.length;e++){if(!(this.root.valuesArray[e][0]<t[0]))return this.root.valuesArray.splice(e,0,t),void this.redraw()}this.root.valuesArray.push(t),this.redraw()}convert(t){return[this.canvas.width*((this.root.xrange[1]-this.root.xrange[0])*t[0]+this.root.xrange[0]),this.canvas.height*((this.root.yrange[1]-this.root.yrange[0])*t[1]+this.root.yrange[0])]}unconvert(t){return[(t[0]/this.canvas.width-this.root.xrange[0])/(this.root.xrange[1]-this.root.xrange[0]),(t[1]/this.canvas.height-this.root.yrange[0])/(this.root.yrange[1]-this.root.yrange[0])]}redraw(){if(!this.canvas||!this.canvas.parentNode)return;const t=this.canvas.parentNode.getBoundingClientRect();t&&this.canvas.width!=t.width&&t.width&&t.width<1e3&&(this.canvas.width=t.width),t&&this.canvas.height!=t.height&&t.height&&t.height<1e3&&(this.canvas.height=t.height);const e=this.canvas.getContext("2d");if(!e)return;e.setTransform(1,0,0,1,0,0),e.translate(0,this.canvas.height),e.scale(1,-1),e.fillStyle=this.root.bgcolor,e.fillRect(0,0,this.canvas.width,this.canvas.height),e.strokeStyle=this.root.linecolor,e.beginPath();let s=this.convert([this.root.xrange[0],this.root.defaulty]);e.moveTo(s[0],s[1]);for(const t in this.root.valuesArray){const i=this.root.valuesArray[t];s=this.convert(i),e.lineTo(s[0],s[1])}s=this.convert([this.root.xrange[1],this.root.defaulty]),e.lineTo(s[0],s[1]),e.stroke();for(let t=0;t<this.root.valuesArray.length;t+=1){const i=this.root.valuesArray[t];s=this.convert(i),this.selected==t?e.fillStyle="white":e.fillStyle=this.root.pointscolor,e.beginPath(),e.arc(s[0],s[1],this.selected==t?4:2,0,2*Math.PI),e.fill()}if(this.root.show_samples){const t=this.resample(this.root.show_samples);e.fillStyle="#888";for(let i=0;i<t.length;i+=1){const n=[i*((this.root.xrange[1]-this.root.xrange[0])/this.root.show_samples)+this.root.xrange[0],t[i]];s=this.convert(n),e.beginPath(),e.arc(s[0],s[1],2,0,2*Math.PI),e.fill()}}}onmousedown(t){document.addEventListener("mousemove",this.onmousemove),document.addEventListener("mouseup",this.onmouseup);const e=this.canvas.getBoundingClientRect(),s=t.clientX-e.left,i=t.clientY-e.top;if(this.selected=this.computeSelected(s,this.canvas.height-i),-1==this.selected){const t=this.unconvert([s,this.canvas.height-i]);this.root.valuesArray.push(t),this.sortValues(),this.selected=this.root.valuesArray.indexOf(t)}this.last_mouse=[s,i],this.redraw(),t.preventDefault(),t.stopPropagation()}onmousemove(t){const e=this.canvas.getBoundingClientRect();let s=t.clientX-e.left,i=t.clientY-e.top;if(s<0?s=0:s>this.canvas.width&&(s=this.canvas.width),i<0?i=0:i>this.canvas.height&&(i=this.canvas.height),-1!=this.selected&&this.distance([t.clientX-e.left,t.clientY-e.top],[s,i])>.5*this.canvas.height)return this.root.valuesArray.splice(this.selected,1),void this.onmouseup(t);const n=this.last_mouse[0]-s,o=this.last_mouse[1]-i,r=this.unconvert([-n,o]);if(-1!=this.selected){let t=this.root.xrange[0],e=this.root.xrange[1];this.root.no_trespassing&&(this.selected>0&&(t=this.root.valuesArray[this.selected-1][0]),this.selected<this.root.valuesArray.length-1&&(e=this.root.valuesArray[this.selected+1][0]));const s=this.root.valuesArray[this.selected];s[0]+=r[0],s[1]+=r[1],s[0]<t?s[0]=t:s[0]>e&&(s[0]=e),s[1]<this.root.yrange[0]?s[1]=this.root.yrange[0]:s[1]>this.root.yrange[1]&&(s[1]=this.root.yrange[1])}this.sortValues(),this.redraw(),this.last_mouse[0]=s,this.last_mouse[1]=i,this.onchange(),t.preventDefault(),t.stopPropagation()}onmouseup(t){this.selected=-1,this.redraw(),document.removeEventListener("mousemove",this.onmousemove),document.removeEventListener("mouseup",this.onmouseup),this.onchange(),t.preventDefault(),t.stopPropagation()}onresize(t){this.redraw()}onchange(){this.options.callback?this.options.callback.call(this.root,this.root.value):i.LiteGUI.trigger(this.root,"change")}distance(t,e){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))}computeSelected(t,e){let s=1e5;let i=-1;for(let n=0;n<this.root.valuesArray.length;n++){const o=this.root.valuesArray[n],r=this.convert(o),l=this.distance([t,e],r);l<s&&l<8&&(s=l,i=n)}return i}sortValues(){let t=null;-1!=this.selected&&(t=this.root.valuesArray[this.selected]),this.root.valuesArray.sort(((t,e)=>t[0]-e[0])),t&&(this.selected=this.root.valuesArray.indexOf(t))}}e.LineEditor=h;class u{constructor(t){this.options=t||{},this.root=document.createElement("div"),this.root.className="litecomplexlist",this.item_code=t.item_code||"<div class='listitem'><span class='tick'><span>"+i.special_codes.tick+"</span></span><span class='title'></span><button class='trash'>"+i.special_codes.close+"</button></div>",t.height&&(this.root.style.height=i.LiteGUI.sizeToCSS(t.height)),this.selected=null,this.onItemSelected=null,this.onItemToggled=null,this.onItemRemoved=null}addTitle(t){const e=i.LiteGUI.createElement("div",".listtitle",t);return this.root.appendChild(e),e}addHTML(t,e){const s=i.LiteGUI.createElement("div",".listtext",t);return e&&s.addEventListener("mousedown",e),this.root.appendChild(s),s}clear(){this.root.innerHTML=""}addItem(t,e,s,n){const o=e||t.content||t.name,r=i.LiteGUI.createListItem(this.item_code,{".title":o});r.item=t,s&&r.classList.add("enabled"),n||(r.querySelector(".trash").style.display="none");const l=this;return r.addEventListener("mousedown",(e=>{e.preventDefault(),r.setSelected(!0),l.onItemSelected&&l.onItemSelected(t,r)})),r.querySelector(".tick").addEventListener("mousedown",(e=>{e.preventDefault(),r.classList.toggle("enabled"),l.onItemToggled&&l.onItemToggled(t,r,r.classList.contains("enabled"))})),r.querySelector(".trash").addEventListener("mousedown",(e=>{e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),l.onItemRemoved&&l.onItemRemoved(t,r)})),r.setContent=function(t,e){e?r.querySelector(".title").innerHTML=t:r.querySelector(".title").innerText=t},r.toggleEnabled=function(){r.classList.toggle("enabled")},r.setSelected=function(t){i.LiteGUI.removeClass(l.root,"selected"),t?this.classList.add("selected"):this.classList.remove("selected"),l.selected=r.item},r.show=function(){this.style.display=""},r.hide=function(){this.style.display="none"},this.root.appendChild(r),r}}e.ComplexList=u}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var s=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](s,s.exports,__webpack_require__),s.exports}var __webpack_exports__=__webpack_require__(776);LiteGUI=__webpack_exports__.LiteGUI})();